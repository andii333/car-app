"use strict";(self.webpackChunkcar_app=self.webpackChunkcar_app||[]).push([[179],{2011:(st,De,k)=>{k.d(De,{Dh:()=>he,GT:()=>de,cc:()=>Se,hO:()=>Ve,on:()=>U,pX:()=>re,xv:()=>pe});var f=k(4650),ee=k(127),N=k(5813);st=k.hmd(st);const se=["ngOnDestroy"],re=(fe,Ze,tt,Te={})=>new Proxy(fe,{get:(ve,be)=>tt.runOutsideAngular(()=>{var Be;if(fe[be])return!(null===(Be=Te?.spy)||void 0===Be)&&Be.get&&Te.spy.get(be,fe[be]),fe[be];if(se.indexOf(be)>-1)return()=>{};const je=Ze.toPromise().then(V=>{const me=V&&V[be];return"function"==typeof me?me.bind(V):me&&me.then?me.then(Z=>tt.run(()=>Z)):tt.run(()=>me)});return new Proxy(()=>{},{get:(V,me)=>je[me],apply:(V,me,Z)=>je.then(J=>{var ie;const te=J&&J(...Z);return!(null===(ie=Te?.spy)||void 0===ie)&&ie.apply&&Te.spy.apply(be,Z,te),te})})})}),de=(fe,Ze)=>{Ze.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(Te=>{Object.defineProperty(fe.prototype,Te,Object.getOwnPropertyDescriptor(tt.prototype||tt,Te))})})};class ue{constructor(Ze){return Ze}}const he=new f.OlP("angularfire2.app.options"),pe=new f.OlP("angularfire2.app.name");function U(fe,Ze,tt){const ve="object"==typeof tt&&tt||{};ve.name=ve.name||"string"==typeof tt&&tt||"[DEFAULT]";const Be=ee.Z.apps.filter(je=>je&&je.name===ve.name)[0]||Ze.runOutsideAngular(()=>ee.Z.initializeApp(fe,ve));try{JSON.stringify(fe)!==JSON.stringify(Be.options)&&j("error",`${Be.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Be)}const j=(fe,...Ze)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Ze)},K={provide:ue,useFactory:U,deps:[he,f.R0b,[new f.FiY,pe]]};let Ve=(()=>{class fe{constructor(tt){ee.Z.registerVersion("angularfire",N.q4.full,"core"),ee.Z.registerVersion("angularfire",N.q4.full,"app-compat"),ee.Z.registerVersion("angular",f.q4F.full,tt.toString())}static initializeApp(tt,Te){return{ngModule:fe,providers:[{provide:he,useValue:tt},{provide:pe,useValue:Te}]}}}return fe.\u0275fac=function(tt){return new(tt||fe)(f.LFG(f.Lbi))},fe.\u0275mod=f.oAB({type:fe}),fe.\u0275inj=f.cJS({providers:[K]}),fe})();function Se(fe,Ze,tt,Te,ve){const[,be,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(be)return function _e(fe,Ze){try{return fe.toString()===Ze.toString()}catch{return fe===Ze}}(ve,Be)||(ye("error",`${Ze} was already initialized on the ${tt} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:ve,was:Be})),be;{const je=Te();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,ve]),je}}const Qe=!!st.hot,ye=(fe,...Ze)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,De,k)=>{k.d(De,{q4:()=>it,iC:()=>io,HU:()=>Ls,vb:()=>Po,JM:()=>Oa});var f=k(4650),ee=k(5867),N=k(5861),se=k(9681),re=k(2090),de=k(4859),ue=k(1877),he=k(8766);const pe="@firebase/installations",U="0.5.12",K=`w:${U}`,Ve="FIS_v2",Ze=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Te({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ve(I){return{token:I.token,requestStatus:2,expiresIn:J(I.expiresIn),creationTime:Date.now()}}function be(I,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,N.Z)(function*(I,D){const F=(yield D.json()).error;return Ze.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function V(I,{refreshToken:D}){const M=je(I);return M.append("Authorization",function ie(I){return`${Ve} ${I}`}(D)),M}function me(I){return Z.apply(this,arguments)}function Z(){return(Z=(0,N.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function J(I){return Number(I.replace("s","000"))}function te(I,D){return Re.apply(this,arguments)}function Re(){return(Re=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:M}){const F=Te(I),Y=je(I),ne=D.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&Y.append("x-firebase-client",pt)}const xe={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:Ve,appId:I.appId,sdkVersion:K})},et=yield me(()=>fetch(F,xe));if(et.ok){const pt=yield et.json();return{fid:pt.fid||M,registrationStatus:2,refreshToken:pt.refreshToken,authToken:ve(pt.authToken)}}throw yield be("Create Installation",et)})).apply(this,arguments)}function Pe(I){return new Promise(D=>{setTimeout(D,I)})}const Bt=/^[cdef][\w-]{21}$/;function ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function en(I){return function lt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Bt.test(M)?M:""}catch{return""}}function En(I){return`${I.appName}!${I.appId}`}const Ht=new Map;function Gt(I,D){const M=En(I);Jt(M,D),function sa(I,D){const M=function lr(){return!Pr&&"BroadcastChannel"in self&&(Pr=new BroadcastChannel("[Firebase] FID Change"),Pr.onmessage=I=>{Jt(I.data.key,I.data.fid)}),Pr}();M&&M.postMessage({key:I,fid:D}),function Nr(){0===Ht.size&&Pr&&(Pr.close(),Pr=null)}()}(M,D)}function Jt(I,D){const M=Ht.get(I);if(M)for(const F of M)F(D)}let Pr=null;const Rr="firebase-installations-store";let ii=null;function vs(){return ii||(ii=(0,he.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Rr)}})),ii}function We(I,D){return kr.apply(this,arguments)}function kr(){return(kr=(0,N.Z)(function*(I,D){const M=En(I),Y=(yield vs()).transaction(Rr,"readwrite"),ne=Y.objectStore(Rr),Ce=yield ne.get(M);return yield ne.put(D,M),yield Y.done,(!Ce||Ce.fid!==D.fid)&&Gt(I,D.fid),D})).apply(this,arguments)}function zi(I){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,N.Z)(function*(I){const D=En(I),F=(yield vs()).transaction(Rr,"readwrite");yield F.objectStore(Rr).delete(D),yield F.done})).apply(this,arguments)}function oi(I,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,N.Z)(function*(I,D){const M=En(I),Y=(yield vs()).transaction(Rr,"readwrite"),ne=Y.objectStore(Rr),Ce=yield ne.get(M),xe=D(Ce);return void 0===xe?yield ne.delete(M):yield ne.put(xe,M),yield Y.done,xe&&(!Ce||Ce.fid!==xe.fid)&&Gt(I,xe.fid),xe})).apply(this,arguments)}function Tn(I){return jn.apply(this,arguments)}function jn(){return(jn=(0,N.Z)(function*(I){let D;const M=yield oi(I.appConfig,F=>{const Y=an(F),ne=dt(I,Y);return D=ne.registrationPromise,ne.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function an(I){return mt(I||{fid:ze(),registrationStatus:0})}function dt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ze.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function ot(I,D){return tn.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Jn(I)}:{installationEntry:D}}function tn(){return(tn=(0,N.Z)(function*(I,D){try{const M=yield te(I,D);return We(I.appConfig,M)}catch(M){throw tt(M)&&409===M.customData.serverCode?yield zi(I.appConfig):yield We(I.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Jn(I){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,N.Z)(function*(I){let D=yield _r(I.appConfig);for(;1===D.registrationStatus;)yield Pe(100),D=yield _r(I.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Tn(I);return F||M}return D})).apply(this,arguments)}function _r(I){return oi(I,D=>{if(!D)throw Ze.create("installation-not-found");return mt(D)})}function mt(I){return function qi(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function zt(I,D){return si.apply(this,arguments)}function si(){return(si=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},M){const F=$t(I,M),Y=V(I,M),ne=D.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&Y.append("x-firebase-client",pt)}const xe={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:I.appId}})},et=yield me(()=>fetch(F,xe));if(et.ok)return ve(yield et.json());throw yield be("Generate Auth Token",et)})).apply(this,arguments)}function $t(I,{fid:D}){return`${Te(I)}/${D}/authTokens:generate`}function q(I){return B.apply(this,arguments)}function B(){return(B=(0,N.Z)(function*(I,D=!1){let M;const F=yield oi(I.appConfig,ne=>{if(!nt(ne))throw Ze.create("not-registered");const Ce=ne.authToken;if(!D&&on(Ce))return ne;if(1===Ce.requestStatus)return M=L(I,D),ne;{if(!navigator.onLine)throw Ze.create("app-offline");const xe=$n(ne);return M=Ie(I,xe),xe}});return M?yield M:F.authToken})).apply(this,arguments)}function L(I,D){return $.apply(this,arguments)}function $(){return($=(0,N.Z)(function*(I,D){let M=yield z(I.appConfig);for(;1===M.authToken.requestStatus;)yield Pe(100),M=yield z(I.appConfig);const F=M.authToken;return 0===F.requestStatus?q(I,D):F})).apply(this,arguments)}function z(I){return oi(I,D=>{if(!nt(D))throw Ze.create("not-registered");return function Rt(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ie(I,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(I,D){try{const M=yield zt(I,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield We(I.appConfig,F),M}catch(M){if(!tt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield We(I.appConfig,F)}else yield zi(I.appConfig);throw M}})).apply(this,arguments)}function nt(I){return void 0!==I&&2===I.registrationStatus}function on(I){return 2===I.requestStatus&&!function qt(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function $n(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function hn(){return(hn=(0,N.Z)(function*(I){const D=I,{installationEntry:M,registrationPromise:F}=yield Tn(D);return F?F.catch(console.error):q(D).catch(console.error),M.fid})).apply(this,arguments)}function Ei(){return(Ei=(0,N.Z)(function*(I,D=!1){const M=I;return yield wr(M),(yield q(M,D)).token})).apply(this,arguments)}function wr(I){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,N.Z)(function*(I){const{registrationPromise:D}=yield Tn(I);D&&(yield D)})).apply(this,arguments)}function vo(I){return Ze.create("missing-app-config-values",{valueName:I})}const _s="installations",fn=I=>{const D=I.getProvider("app").getImmediate(),M=function un(I){if(!I||!I.options)throw vo("App Configuration");if(!I.name)throw vo("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!I.options[M])throw vo(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},zo=I=>{const D=I.getProvider("app").getImmediate(),M=(0,se._getProvider)(D,_s).getImmediate();return{getId:()=>function At(I){return hn.apply(this,arguments)}(M),getToken:Y=>function Pn(I){return Ei.apply(this,arguments)}(M,Y)}};(function Ac(){(0,se._registerComponent)(new de.wA(_s,fn,"PUBLIC")),(0,se._registerComponent)(new de.wA("installations-internal",zo,"PRIVATE"))})(),(0,se.registerVersion)(pe,U),(0,se.registerVersion)(pe,U,"esm2017");const Di="@firebase/remote-config",kn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gh{constructor(D,M,F,Y){this.client=D,this.storage=M,this.storageCache=F,this.logger=Y}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Y=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var M=this;return(0,N.Z)(function*(){const[F,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Y;D.eTag=Y&&Y.eTag;const ne=yield M.client.fetch(D),Ce=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&Ce.push(M.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(Ce),ne})()}}function Pc(I=navigator){return I.languages&&I.languages[0]||I.language}class Nc{constructor(D,M,F,Y,ne,Ce){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=Y,this.apiKey=ne,this.appId=Ce}fetch(D){var M=this;return(0,N.Z)(function*(){var F,Y,ne;const[Ce,xe]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,wt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ut={sdk_version:M.sdkVersion,app_instance_id:Ce,app_instance_id_token:xe,app_id:M.appId,language_code:Pc()},gn={method:"POST",headers:wt,body:JSON.stringify(ut)},sr=fetch(pt,gn),Vs=new Promise((Us,is)=>{D.signal.addEventListener(()=>{const pi=new Error("The operation was aborted.");pi.name="AbortError",is(pi)})});let ko;try{yield Promise.race([sr,Vs]),ko=yield sr}catch(Us){let is="fetch-client-network";throw"AbortError"===(null===(F=Us)||void 0===F?void 0:F.name)&&(is="fetch-timeout"),kn.create(is,{originalErrorMessage:null===(Y=Us)||void 0===Y?void 0:Y.message})}let Ct=ko.status;const xi=ko.headers.get("ETag")||void 0;let Fo,Yr;if(200===ko.status){let Us;try{Us=yield ko.json()}catch(is){throw kn.create("fetch-client-parse",{originalErrorMessage:null===(ne=is)||void 0===ne?void 0:ne.message})}Fo=Us.entries,Yr=Us.state}if("INSTANCE_STATE_UNSPECIFIED"===Yr?Ct=500:"NO_CHANGE"===Yr?Ct=304:("NO_TEMPLATE"===Yr||"EMPTY_CONFIG"===Yr)&&(Fo={}),304!==Ct&&200!==Ct)throw kn.create("fetch-status",{httpStatus:Ct});return{status:Ct,eTag:xi,config:Fo}})()}}class zp{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,N.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var Y=this;return(0,N.Z)(function*(){yield function Gn(I,D){return new Promise((M,F)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(ne),F(kn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const ne=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function od(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const Ce={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(Ce),Y.attemptFetch(D,Ce)}})()}}class sd{constructor(D,M,F,Y,ne){this.app=D,this._client=M,this._storageCache=F,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rc(I,D){var M;const F=I.target.error||void 0;return kn.create(D,{originalErrorMessage:F&&(null===(M=F)||void 0===M?void 0:M.message)})}const bo="app_namespace_store";class zh{constructor(D,M,F,Y=function Zp(){return new Promise((I,D)=>{var M;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Y=>{D(Rc(Y,"storage-open"))},F.onsuccess=Y=>{I(Y.target.result)},F.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(bo,{keyPath:"compositeKey"})}}catch(F){D(kn.create("storage-open",{originalErrorMessage:null===(M=F)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,ne)=>{var Ce;const et=F.transaction([bo],"readonly").objectStore(bo),pt=M.createCompositeKey(D);try{const wt=et.get(pt);wt.onerror=ut=>{ne(Rc(ut,"storage-get"))},wt.onsuccess=ut=>{const gn=ut.target.result;Y(gn?gn.value:void 0)}}catch(wt){ne(kn.create("storage-get",{originalErrorMessage:null===(Ce=wt)||void 0===Ce?void 0:Ce.message}))}})})()}set(D,M){var F=this;return(0,N.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((ne,Ce)=>{var xe;const pt=Y.transaction([bo],"readwrite").objectStore(bo),wt=F.createCompositeKey(D);try{const ut=pt.put({compositeKey:wt,value:M});ut.onerror=gn=>{Ce(Rc(gn,"storage-set"))},ut.onsuccess=()=>{ne()}}catch(ut){Ce(kn.create("storage-set",{originalErrorMessage:null===(xe=ut)||void 0===xe?void 0:xe.message}))}})})()}delete(D){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,ne)=>{var Ce;const et=F.transaction([bo],"readwrite").objectStore(bo),pt=M.createCompositeKey(D);try{const wt=et.delete(pt);wt.onerror=ut=>{ne(Rc(ut,"storage-delete"))},wt.onsuccess=()=>{Y()}}catch(wt){ne(kn.create("storage-delete",{originalErrorMessage:null===(Ce=wt)||void 0===Ce?void 0:Ce.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ud{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),ne=yield M;ne&&(D.lastFetchStatus=ne);const Ce=yield F;Ce&&(D.lastSuccessfulFetchTimestampMillis=Ce);const xe=yield Y;xe&&(D.activeConfig=xe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function lu(){return qh.apply(this,arguments)}function qh(){return(qh=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function Io(){(0,se._registerComponent)(new de.wA("remote-config",function I(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw kn.create("registration-window");if(!(0,re.hl)())throw kn.create("indexed-db-unavailable");const{projectId:ne,apiKey:Ce,appId:xe}=F.options;if(!ne)throw kn.create("registration-project-id");if(!Ce)throw kn.create("registration-api-key");if(!xe)throw kn.create("registration-app-id");const et=new zh(xe,F.name,M=M||"firebase"),pt=new ud(et),wt=new ue.Yd(Di);wt.logLevel=ue.in.ERROR;const ut=new Nc(Y,se.SDK_VERSION,M,ne,Ce,xe),gn=new zp(ut,et),sr=new Gh(gn,et,pt,wt),Vs=new sd(F,sr,pt,et,wt);return function An(I){const D=(0,re.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Vs),Vs},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Di,"0.3.11"),(0,se.registerVersion)(Di,"0.3.11","esm2017")}();const Ti="/firebase-messaging-sw.js",Ki="/firebase-cloud-messaging-push-scope",Yi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ca="google.c.a.c_id",du="google.c.a.c_l",kc="google.c.a.ts",Wh="google.c.a.e";var Qi=(()=>{return(I=Qi||(Qi={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Qi;var I})();function qr(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fr(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Y=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)Y[ne]=F.charCodeAt(ne);return Y}const ws="fcm_token_details_db",or="fcm_token_object_Store";function Zh(I){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(ws))return null;let D=null;return(yield(0,he.X3)(ws,5,{upgrade:(F=(0,N.Z)(function*(Y,ne,Ce,xe){var et;if(ne<2||!Y.objectStoreNames.contains(or))return;const pt=xe.objectStore(or),wt=yield pt.index("fcmSenderId").get(I);if(yield pt.clear(),wt)if(2===ne){const ut=wt;if(!ut.auth||!ut.p256dh||!ut.endpoint)return;D={token:ut.fcmToken,createTime:null!==(et=ut.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:ut.auth,p256dh:ut.p256dh,endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:"string"==typeof ut.vapidKey?ut.vapidKey:qr(ut.vapidKey)}}}else if(3===ne){const ut=wt;D={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:qr(ut.auth),p256dh:qr(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:qr(ut.vapidKey)}}}else if(4===ne){const ut=wt;D={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:qr(ut.auth),p256dh:qr(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:qr(ut.vapidKey)}}}}),function(ne,Ce,xe,et){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(ws),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),vn(D)?D:null;var F}),Kh.apply(this,arguments)}function vn(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Wr="firebase-messaging-store";let br=null;function fu(){return br||(br=(0,he.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Wr)}})),br}function Cs(I){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,N.Z)(function*(I){const D=ci(I),F=yield(yield fu()).transaction(Wr).objectStore(Wr).get(D);if(F)return F;{const Y=yield Zh(I.appConfig.senderId);if(Y)return yield Ut(I,Y),Y}})).apply(this,arguments)}function Ut(I,D){return pu.apply(this,arguments)}function pu(){return(pu=(0,N.Z)(function*(I,D){const M=ci(I),Y=(yield fu()).transaction(Wr,"readwrite");return yield Y.objectStore(Wr).put(D,M),yield Y.done,D})).apply(this,arguments)}function Zo(I){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(I){const D=ci(I),F=(yield fu()).transaction(Wr,"readwrite");yield F.objectStore(Wr).delete(D),yield F.done})).apply(this,arguments)}function ci({appConfig:I}){return I.appId}const mn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yt(I,D){return yu.apply(this,arguments)}function yu(){return(yu=(0,N.Z)(function*(I,D){var M;const F=yield Lc(I),Y=Ee(D),ne={method:"POST",headers:F,body:JSON.stringify(Y)};let Ce;try{Ce=yield(yield fetch(Xi(I.appConfig),ne)).json()}catch(xe){throw mn.create("token-subscribe-failed",{errorInfo:null===(M=xe)||void 0===M?void 0:M.toString()})}if(Ce.error)throw mn.create("token-subscribe-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw mn.create("token-subscribe-no-token");return Ce.token})).apply(this,arguments)}function Qh(I,D){return vu.apply(this,arguments)}function vu(){return(vu=(0,N.Z)(function*(I,D){var M;const F=yield Lc(I),Y=Ee(D.subscriptionOptions),ne={method:"PATCH",headers:F,body:JSON.stringify(Y)};let Ce;try{Ce=yield(yield fetch(`${Xi(I.appConfig)}/${D.token}`,ne)).json()}catch(xe){throw mn.create("token-update-failed",{errorInfo:null===(M=xe)||void 0===M?void 0:M.toString()})}if(Ce.error)throw mn.create("token-update-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw mn.create("token-update-no-token");return Ce.token})).apply(this,arguments)}function _u(I,D){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,N.Z)(function*(I,D){var M;const Y={method:"DELETE",headers:yield Lc(I)};try{const Ce=yield(yield fetch(`${Xi(I.appConfig)}/${D}`,Y)).json();if(Ce.error)throw mn.create("token-unsubscribe-failed",{errorInfo:Ce.error.message})}catch(ne){throw mn.create("token-unsubscribe-failed",{errorInfo:null===(M=ne)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function Xi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Lc(I){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*({appConfig:I,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ee({p256dh:I,auth:D,endpoint:M,vapidKey:F}){const Y={web:{endpoint:M,auth:D,p256dh:I}};return F!==Yi&&(Y.web.applicationPubKey=F),Y}const kt=6048e5;function wu(I){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,N.Z)(function*(I){const D=yield Vc(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:qr(D.getKey("auth")),p256dh:qr(D.getKey("p256dh"))},F=yield Cs(I.firebaseDependencies);if(F){if(hd(F.subscriptionOptions,M))return Date.now()>=F.createTime+kt?bs(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield _u(I.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return ha(I.firebaseDependencies,M)}return ha(I.firebaseDependencies,M)})).apply(this,arguments)}function _n(I){return bu.apply(this,arguments)}function bu(){return(bu=(0,N.Z)(function*(I){const D=yield Cs(I.firebaseDependencies);D&&(yield _u(I.firebaseDependencies,D.token),yield Zo(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function bs(I,D){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,N.Z)(function*(I,D){try{const M=yield Qh(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Ut(I.firebaseDependencies,F),M}catch(M){throw yield _n(I),M}})).apply(this,arguments)}function ha(I,D){return fa.apply(this,arguments)}function fa(){return(fa=(0,N.Z)(function*(I,D){const F={token:yield yt(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Ut(I,F),F.token})).apply(this,arguments)}function Vc(I,D){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,N.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fr(D)})})).apply(this,arguments)}function hd(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function pa(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function wn(I,D){if(!D.notification)return;I.notification={};const M=D.notification.title;M&&(I.notification.title=M);const F=D.notification.body;F&&(I.notification.body=F);const Y=D.notification.image;Y&&(I.notification.image=Y)}(D,I),function Ai(I,D){!D.data||(I.data=D.data)}(D,I),function Bc(I,D){var M,F,Y,ne,Ce;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const xe=null!==(Y=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Y?Y:null===(ne=D.notification)||void 0===ne?void 0:ne.click_action;xe&&(I.fcmOptions.link=xe);const et=null===(Ce=D.fcmOptions)||void 0===Ce?void 0:Ce.analytics_label;et&&(I.fcmOptions.analyticsLabel=et)}(D,I),D}function Ko(I){return"object"==typeof I&&!!I&&ca in I}function eo(I,D){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function ga(I){return mn.create("missing-app-config-values",{valueName:I})}eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Yp{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Kp(I){if(!I||!I.options)throw ga("App Configuration Object");if(!I.name)throw ga("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of D)if(!M[F])throw ga(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function jc(I){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,N.Z)(function*(I){var D;try{I.swRegistration=yield navigator.serviceWorker.register(Ti,{scope:Ki}),I.swRegistration.update().catch(()=>{})}catch(M){throw mn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function ma(I,D){return $c.apply(this,arguments)}function $c(){return($c=(0,N.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield jc(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function ya(I,D){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,N.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Yi)})).apply(this,arguments)}function Du(){return(Du=(0,N.Z)(function*(I,D){if(!navigator)throw mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mn.create("permission-blocked");return yield ya(I,D?.vapidKey),yield ma(I,D?.serviceWorkerRegistration),wu(I)})).apply(this,arguments)}function Gc(I,D,M){return zc.apply(this,arguments)}function zc(){return(zc=(0,N.Z)(function*(I,D,M){const F=qc(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[ca],message_name:M[du],message_time:M[kc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qc(I){switch(I){case Qi.NOTIFICATION_CLICKED:return"notification_open";case Qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Yo(){return(Yo=(0,N.Z)(function*(I,D){const M=D.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Qi.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(pa(M)):I.onMessageHandler.next(pa(M)));const F=M.data;Ko(F)&&"1"===F[Wh]&&(yield Gc(I,M.messageType,F))})).apply(this,arguments)}const Qo="@firebase/messaging",zn=I=>{const D=new Yp(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function fd(I,D){return Yo.apply(this,arguments)}(D,M)),D},Lr=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function Eu(I,D){return Du.apply(this,arguments)}(D,F)}};function pd(){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function cn(){(0,se._registerComponent)(new de.wA("messaging",zn,"PUBLIC")),(0,se._registerComponent)(new de.wA("messaging-internal",Lr,"PRIVATE")),(0,se.registerVersion)(Qo,"0.9.16"),(0,se.registerVersion)(Qo,"0.9.16","esm2017")}();const Ds="analytics",yd="firebase_id",Jo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Su="https://www.googletagmanager.com/gtag/js",Cn=new ue.Yd("@firebase/analytics");function Mu(I){return Promise.all(I.map(D=>D.catch(M=>M)))}function xu(I,D){const M=document.createElement("script");M.src=`${Su}?l=${I}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Xh(I,D,M,F,Y,ne){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,N.Z)(function*(I,D,M,F,Y,ne){const Ce=F[Y];try{if(Ce)yield D[Ce];else{const et=(yield Mu(M)).find(pt=>pt.measurementId===Y);et&&(yield D[et.appId])}}catch(xe){Cn.error(xe)}I("config",Y,ne)})).apply(this,arguments)}function As(I,D,M,F,Y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,N.Z)(function*(I,D,M,F,Y){try{let ne=[];if(Y&&Y.send_to){let Ce=Y.send_to;Array.isArray(Ce)||(Ce=[Ce]);const xe=yield Mu(M);for(const et of Ce){const pt=xe.find(ut=>ut.measurementId===et),wt=pt&&D[pt.appId];if(!wt){ne=[];break}ne.push(wt)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),I("event",F,Y||{})}catch(ne){Cn.error(ne)}})).apply(this,arguments)}function _d(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(Su))return D;return null}const tr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ca=new class Si{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Cd(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ba(I){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,N.Z)(function*(I){var D;const{appId:M,apiKey:F}=I,Y={method:"GET",headers:Cd(F)},ne=Jo.replace("{app-id}",M),Ce=yield fetch(ne,Y);if(200!==Ce.status&&304!==Ce.status){let xe="";try{const et=yield Ce.json();null!==(D=et.error)&&void 0!==D&&D.message&&(xe=et.error.message)}catch{}throw tr.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:xe})}return Ce.json()})).apply(this,arguments)}function Sn(I){return li.apply(this,arguments)}function li(){return(li=(0,N.Z)(function*(I,D=Ca,M){const{appId:F,apiKey:Y,measurementId:ne}=I.options;if(!F)throw tr.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:F};throw tr.create("no-api-key")}const Ce=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Ru;return setTimeout((0,N.Z)(function*(){xe.abort()}),void 0!==M?M:6e4),Pu({appId:F,apiKey:Y,measurementId:ne},Ce,xe,D)})).apply(this,arguments)}function Pu(I,D,M){return es.apply(this,arguments)}function es(){return(es=(0,N.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:M},F,Y=Ca){var ne,Ce;const{appId:xe,measurementId:et}=I;try{yield Ia(F,D)}catch(pt){if(et)return Cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null===(ne=pt)||void 0===ne?void 0:ne.message}]`),{appId:xe,measurementId:et};throw pt}try{const pt=yield ba(I);return Y.deleteThrottleMetadata(xe),pt}catch(pt){const wt=pt;if(!Nu(wt)){if(Y.deleteThrottleMetadata(xe),et)return Cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${wt?.message}]`),{appId:xe,measurementId:et};throw pt}const ut=503===Number(null===(Ce=wt?.customData)||void 0===Ce?void 0:Ce.httpStatus)?(0,re.$s)(M,Y.intervalMillis,30):(0,re.$s)(M,Y.intervalMillis),gn={throttleEndTimeMillis:Date.now()+ut,backoffCount:M+1};return Y.setThrottleMetadata(xe,gn),Cn.debug(`Calling attemptFetch again in ${ut} millis`),Pu(I,gn,F,Y)}})).apply(this,arguments)}function Ia(I,D){return new Promise((M,F)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(ne),F(tr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Nu(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ru{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let To,Da;function Ao(){return(Ao=(0,N.Z)(function*(I,D,M,F,Y){if(Y&&Y.global)I("event",M,F);else{const ne=yield D;I("event",M,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function ns(I){Da=I}function Xc(I){To=I}function no(){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,N.Z)(function*(){var I;if(!(0,re.hl)())return Cn.warn(tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return Cn.warn(tr.create("indexeddb-unavailable",{errorInfo:null===(I=D)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function xs(){return(xs=(0,N.Z)(function*(I,D,M,F,Y,ne,Ce){var xe;const et=Sn(I);et.then(sr=>{M[sr.measurementId]=sr.appId,I.options.measurementId&&sr.measurementId!==I.options.measurementId&&Cn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sr=>Cn.error(sr)),D.push(et);const pt=no().then(sr=>{if(sr)return F.getId()}),[wt,ut]=yield Promise.all([et,pt]);_d()||xu(ne,wt.measurementId),Da&&(Y("consent","default",Da),ns(void 0)),Y("js",new Date);const gn=null!==(xe=Ce?.config)&&void 0!==xe?xe:{};return gn.origin="firebase",gn.update=!0,null!=ut&&(gn[yd]=ut),Y("config",wt.measurementId,gn),To&&(Y("set",To),Xc(void 0)),wt.measurementId})).apply(this,arguments)}class Lu{constructor(D){this.app=D}_delete(){return delete Vr[this.app.options.appId],Promise.resolve()}}let Vr={},So=[];const Os={};let Ns,rs,Ps="dataLayer",Ta=!1;function Cy(I,D,M){!function Qp(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),M=tr.create("invalid-analytics-context",{errorInfo:D});Cn.warn(M.message)}}();const F=I.options.appId;if(!F)throw tr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw tr.create("no-api-key");Cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vr[F])throw tr.create("already-exists",{id:F});if(!Ta){!function vd(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Ps);const{wrappedGtag:ne,gtagCore:Ce}=function va(I,D,M,F,Y){let ne=function(...Ce){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function Ou(I,D,M,F){function ne(){return(ne=(0,N.Z)(function*(Ce,xe,et){try{"event"===Ce?yield As(I,D,M,xe,et):"config"===Ce?yield Xh(I,D,M,F,xe,et):"consent"===Ce?I("consent","update",et):I("set",xe)}catch(pt){Cn.error(pt)}})).apply(this,arguments)}return function Y(Ce,xe,et){return ne.apply(this,arguments)}}(ne,I,D,M),{gtagCore:ne,wrappedGtag:window[Y]}}(Vr,So,Os,Ps,"gtag");rs=ne,Ns=Ce,Ta=!0}return Vr[F]=function Ms(I,D,M,F,Y,ne,Ce){return xs.apply(this,arguments)}(I,So,Os,D,Ns,Ps,M),new Lu(I)}function Iy(){return ef.apply(this,arguments)}function ef(){return(ef=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const rt="@firebase/analytics";!function pn(){(0,se._registerComponent)(new de.wA(Ds,(D,{options:M})=>Cy(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new de.wA("analytics-internal",function I(D){try{const M=D.getProvider(Ds).getImmediate();return{logEvent:(F,Y,ne)=>function rn(I,D,M,F){I=(0,re.m9)(I),function bd(I,D,M,F,Y){return Ao.apply(this,arguments)}(rs,Vr[I.app.options.appId],D,M,F).catch(Y=>Cn.error(Y))}(M,F,Y,ne)}}catch(M){throw tr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(rt,"0.8.0"),(0,se.registerVersion)(rt,"0.8.0","esm2017")}();var hi=k(4408),Ir=k(7565);const Uu=new class Mo extends Ir.v{}(class Aa extends hi.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var tl=k(4986),Sa=k(8505),Rs=k(9468),xo=k(5363);const it=new f.GfV("7.4.1"),Ma="__angularfire_symbol__analyticsIsSupportedValue",Oo="__angularfire_symbol__analyticsIsSupported",xa="__angularfire_symbol__remoteConfigIsSupportedValue",ks="__angularfire_symbol__remoteConfigIsSupported",qn="__angularfire_symbol__messagingIsSupportedValue",nl="__angularfire_symbol__messagingIsSupported";function Oa(I,D,M){if(D){if(1===D.length)return D[0];const ne=D.filter(Ce=>Ce.app===M);if(1===ne.length)return ne[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Oo]||(globalThis[Oo]=Iy().then(I=>globalThis[Ma]=I).catch(()=>globalThis[Ma]=!1)),globalThis[nl]||(globalThis[nl]=pd().then(I=>globalThis[qn]=I).catch(()=>globalThis[qn]=!1)),globalThis[ks]||(globalThis[ks]=lu().then(I=>globalThis[xa]=I).catch(()=>globalThis[xa]=!1));const Po=(I,D)=>{const M=D?[D]:(0,ee.C6)(),F=[];return M.forEach(Y=>{Y.container.getProvider(I).instances.forEach(Ce=>{F.includes(Ce)||F.push(Ce)})}),F};function No(){}class fi{constructor(D,M=Uu){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const Y=this.zone;return this.delegate.schedule(function(Ce){Y.runGuarded(()=>{D.apply(this,[Ce])})},M,F)}}class il{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",No,{},No,No)),M.pipe((0,Sa.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ls=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new fi(Zone.current)),this.insideAngular=M.run(()=>new fi(Zone.current,tl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ur(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function io(I){return Ur(),function Fn(I){return function(M){return(M=M.lift(new il(I.ngZone))).pipe((0,Rs.R)(I.outsideAngular),(0,xo.Q)(I.insideAngular))}}(Ur())(I)}},2090:(st,De,k)=>{k.d(De,{$s:()=>qi,BH:()=>Ve,G6:()=>je,L:()=>he,LL:()=>Re,Sg:()=>Se,UG:()=>ye,US:()=>de,ZB:()=>j,ZR:()=>te,b$:()=>tt,eu:()=>me,hl:()=>V,jU:()=>fe,m9:()=>$t,ne:()=>vs,pd:()=>Rr,r3:()=>vr,ru:()=>Ze,tV:()=>pe,uI:()=>Qe,vZ:()=>Pr,w1:()=>ve,xO:()=>yo,xb:()=>Jt,z$:()=>_e,zI:()=>Z,zd:()=>Ii});const se=function(q){const B=[];let L=0;for(let $=0;$<q.length;$++){let z=q.charCodeAt($);z<128?B[L++]=z:z<2048?(B[L++]=z>>6|192,B[L++]=63&z|128):55296==(64512&z)&&$+1<q.length&&56320==(64512&q.charCodeAt($+1))?(z=65536+((1023&z)<<10)+(1023&q.charCodeAt(++$)),B[L++]=z>>18|240,B[L++]=z>>12&63|128,B[L++]=z>>6&63|128,B[L++]=63&z|128):(B[L++]=z>>12|224,B[L++]=z>>6&63|128,B[L++]=63&z|128)}return B},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,B){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let z=0;z<q.length;z+=3){const Ie=q[z],Ue=z+1<q.length,nt=Ue?q[z+1]:0,on=z+2<q.length,qt=on?q[z+2]:0;let At=(15&nt)<<2|qt>>6,hn=63&qt;on||(hn=64,Ue||(At=64)),$.push(L[Ie>>2],L[(3&Ie)<<4|nt>>4],L[At],L[hn])}return $.join("")},encodeString(q,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(q):this.encodeByteArray(se(q),B)},decodeString(q,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(q):function(q){const B=[];let L=0,$=0;for(;L<q.length;){const z=q[L++];if(z<128)B[$++]=String.fromCharCode(z);else if(z>191&&z<224){const Ie=q[L++];B[$++]=String.fromCharCode((31&z)<<6|63&Ie)}else if(z>239&&z<365){const on=((7&z)<<18|(63&q[L++])<<12|(63&q[L++])<<6|63&q[L++])-65536;B[$++]=String.fromCharCode(55296+(on>>10)),B[$++]=String.fromCharCode(56320+(1023&on))}else{const Ie=q[L++],Ue=q[L++];B[$++]=String.fromCharCode((15&z)<<12|(63&Ie)<<6|63&Ue)}}return B.join("")}(this.decodeStringToByteArray(q,B))},decodeStringToByteArray(q,B){this.init_();const L=B?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let z=0;z<q.length;){const Ie=L[q.charAt(z++)],nt=z<q.length?L[q.charAt(z)]:0;++z;const qt=z<q.length?L[q.charAt(z)]:64;++z;const Rt=z<q.length?L[q.charAt(z)]:64;if(++z,null==Ie||null==nt||null==qt||null==Rt)throw Error();$.push(Ie<<2|nt>>4),64!==qt&&($.push(nt<<4&240|qt>>2),64!==Rt&&$.push(qt<<6&192|Rt))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},he=function(q){return function(q){const B=se(q);return de.encodeByteArray(B,!0)}(q).replace(/\./g,"")},pe=function(q){try{return de.decodeString(q,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function j(q,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return B}for(const L in B)!B.hasOwnProperty(L)||!K(L)||(q[L]=j(q[L],B[L]));return q}function K(q){return"__proto__"!==q}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,L)=>{this.resolve=B,this.reject=L})}wrapCallback(B){return(L,$)=>{L?this.reject(L):this.resolve($),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(L):B(L,$))}}}function Se(q,B){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=B||"demo-project",z=q.iat||0,Ie=q.sub||q.user_id;if(!Ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:z,exp:z+3600,auth_time:z,sub:Ie,user_id:Ie,firebase:{sign_in_provider:"custom",identities:{}}},q);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ue)),""].join(".")}function _e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ze(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){const q=_e();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function je(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){return"object"==typeof indexedDB}function me(){return new Promise((q,B)=>{try{let L=!0;const $="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open($);z.onsuccess=()=>{z.result.close(),L||self.indexedDB.deleteDatabase($),q(!0)},z.onupgradeneeded=()=>{L=!1},z.onerror=()=>{var Ie;B((null===(Ie=z.error)||void 0===Ie?void 0:Ie.message)||"")}}catch(L){B(L)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class te extends Error{constructor(B,L,$){super(L),this.code=B,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor(B,L,$){this.service=B,this.serviceName=L,this.errors=$}create(B,...L){const $=L[0]||{},z=`${this.service}/${B}`,Ie=this.errors[B],Ue=Ie?function Pe(q,B){return q.replace(lt,(L,$)=>{const z=B[$];return null!=z?String(z):`<${$}?>`})}(Ie,$):"Error";return new te(z,`${this.serviceName}: ${Ue} (${z}).`,$)}}const lt=/\{\$([^}]+)}/g;function vr(q,B){return Object.prototype.hasOwnProperty.call(q,B)}function Jt(q){for(const B in q)if(Object.prototype.hasOwnProperty.call(q,B))return!1;return!0}function Pr(q,B){if(q===B)return!0;const L=Object.keys(q),$=Object.keys(B);for(const z of L){if(!$.includes(z))return!1;const Ie=q[z],Ue=B[z];if(lr(Ie)&&lr(Ue)){if(!Pr(Ie,Ue))return!1}else if(Ie!==Ue)return!1}for(const z of $)if(!L.includes(z))return!1;return!0}function lr(q){return null!==q&&"object"==typeof q}function yo(q){const B=[];for(const[L,$]of Object.entries(q))Array.isArray($)?$.forEach(z=>{B.push(encodeURIComponent(L)+"="+encodeURIComponent(z))}):B.push(encodeURIComponent(L)+"="+encodeURIComponent($));return B.length?"&"+B.join("&"):""}function Ii(q){const B={};return q.replace(/^\?/,"").split("&").forEach($=>{if($){const[z,Ie]=$.split("=");B[decodeURIComponent(z)]=decodeURIComponent(Ie)}}),B}function Rr(q){const B=q.indexOf("?");if(!B)return"";const L=q.indexOf("#",B);return q.substring(B,L>0?L:void 0)}function vs(q,B){const L=new We(q,B);return L.subscribe.bind(L)}class We{constructor(B,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{B(this)}).catch($=>{this.error($)})}next(B){this.forEachObserver(L=>{L.next(B)})}error(B){this.forEachObserver(L=>{L.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,L,$){let z;if(void 0===B&&void 0===L&&void 0===$)throw new Error("Missing Observer.");z=function zi(q,B){if("object"!=typeof q||null===q)return!1;for(const L of B)if(L in q&&"function"==typeof q[L])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:L,complete:$},void 0===z.next&&(z.next=Dn),void 0===z.error&&(z.error=Dn),void 0===z.complete&&(z.complete=Dn);const Ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),Ie}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,B)}sendOne(B,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{L(this.observers[B])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dn(){}function qi(q,B=1e3,L=2){const $=B*Math.pow(L,q),z=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+z)}function $t(q){return q&&q._delegate?q._delegate:q}},8032:(st,De,k)=>{var f=k(4650);let ee=null;function N(){return ee}const ue=new f.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function pe(){return(0,f.LFG)(j)}()},providedIn:"platform"}),n})();const U=new f.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){K()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){K()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ve(){return new j((0,f.LFG)(ue))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function _e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ze)},providedIn:"root"}),n})();const fe=new f.OlP("appBaseHref");let Ze=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+Qe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+Qe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=_e(Be(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Se,n.stripTrailingSlash=_e,n.\u0275fac=function(t){return new(t||n)(f.LFG(ye))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return new Te((0,f.LFG)(ye))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}var Z=(()=>((Z=Z||{})[Z.Format=0]="Format",Z[Z.Standalone=1]="Standalone",Z))(),J=(()=>((J=J||{})[J.Narrow=0]="Narrow",J[J.Abbreviated=1]="Abbreviated",J[J.Wide=2]="Wide",J[J.Short=3]="Short",J))(),ie=(()=>((ie=ie||{})[ie.Short=0]="Short",ie[ie.Medium=1]="Medium",ie[ie.Long=2]="Long",ie[ie.Full=3]="Full",ie))(),te=(()=>((te=te||{})[te.Decimal=0]="Decimal",te[te.Group=1]="Group",te[te.List=2]="List",te[te.PercentSign=3]="PercentSign",te[te.PlusSign=4]="PlusSign",te[te.MinusSign=5]="MinusSign",te[te.Exponential=6]="Exponential",te[te.SuperscriptingExponent=7]="SuperscriptingExponent",te[te.PerMille=8]="PerMille",te[te.Infinity=9]="Infinity",te[te.NaN=10]="NaN",te[te.TimeSeparator=11]="TimeSeparator",te[te.CurrencyDecimal=12]="CurrencyDecimal",te[te.CurrencyGroup=13]="CurrencyGroup",te))();function Ht(n,e){return We((0,f.cg1)(n)[f.wAp.DateFormat],e)}function Gt(n,e){return We((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function vr(n,e){return We((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function Ot(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===te.CurrencyDecimal)return t[f.wAp.NumberSymbols][te.Decimal];if(e===te.CurrencyGroup)return t[f.wAp.NumberSymbols][te.Group]}return r}function Ii(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function We(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function kr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Gr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Tn={},jn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var an=(()=>((an=an||{})[an.Short=0]="Short",an[an.ShortGMT=1]="ShortGMT",an[an.Long=2]="Long",an[an.Extended=3]="Extended",an))(),dt=(()=>((dt=dt||{})[dt.FullYear=0]="FullYear",dt[dt.Month=1]="Month",dt[dt.Date=2]="Date",dt[dt.Hours=3]="Hours",dt[dt.Minutes=4]="Minutes",dt[dt.Seconds=5]="Seconds",dt[dt.FractionalSeconds=6]="FractionalSeconds",dt[dt.Day=7]="Day",dt))(),ot=(()=>((ot=ot||{})[ot.DayPeriods=0]="DayPeriods",ot[ot.Days=1]="Days",ot[ot.Months=2]="Months",ot[ot.Eras=3]="Eras",ot))();function tn(n,e,t,r){let s=function hn(n){if(Ei(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,u=1,d=1]=n.split("-").map(m=>+m);return Jn(s,u-1,d)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Gr))return function Pn(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),E=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,d,m,w,E),e}(r)}const e=new Date(n);if(!Ei(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Xn(t,e)||e;let m,d=[];for(;e;){if(m=jn.exec(e),!m){d.push(e);break}{d=d.concat(m.slice(1));const S=d.pop();if(!S)break;e=S}}let w=s.getTimezoneOffset();r&&(w=$n(r,w),s=function At(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function Rt(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*($n(e,s)-s))}(s,r,!0));let E="";return d.forEach(S=>{const O=function qt(n){if(on[n])return on[n];let e;switch(n){case"G":case"GG":case"GGG":e=$t(ot.Eras,J.Abbreviated);break;case"GGGG":e=$t(ot.Eras,J.Wide);break;case"GGGGG":e=$t(ot.Eras,J.Narrow);break;case"y":e=zt(dt.FullYear,1,0,!1,!0);break;case"yy":e=zt(dt.FullYear,2,0,!0,!0);break;case"yyy":e=zt(dt.FullYear,3,0,!1,!0);break;case"yyyy":e=zt(dt.FullYear,4,0,!1,!0);break;case"Y":e=nt(1);break;case"YY":e=nt(2,!0);break;case"YYY":e=nt(3);break;case"YYYY":e=nt(4);break;case"M":case"L":e=zt(dt.Month,1,1);break;case"MM":case"LL":e=zt(dt.Month,2,1);break;case"MMM":e=$t(ot.Months,J.Abbreviated);break;case"MMMM":e=$t(ot.Months,J.Wide);break;case"MMMMM":e=$t(ot.Months,J.Narrow);break;case"LLL":e=$t(ot.Months,J.Abbreviated,Z.Standalone);break;case"LLLL":e=$t(ot.Months,J.Wide,Z.Standalone);break;case"LLLLL":e=$t(ot.Months,J.Narrow,Z.Standalone);break;case"w":e=Ue(1);break;case"ww":e=Ue(2);break;case"W":e=Ue(1,!0);break;case"d":e=zt(dt.Date,1);break;case"dd":e=zt(dt.Date,2);break;case"c":case"cc":e=zt(dt.Day,1);break;case"ccc":e=$t(ot.Days,J.Abbreviated,Z.Standalone);break;case"cccc":e=$t(ot.Days,J.Wide,Z.Standalone);break;case"ccccc":e=$t(ot.Days,J.Narrow,Z.Standalone);break;case"cccccc":e=$t(ot.Days,J.Short,Z.Standalone);break;case"E":case"EE":case"EEE":e=$t(ot.Days,J.Abbreviated);break;case"EEEE":e=$t(ot.Days,J.Wide);break;case"EEEEE":e=$t(ot.Days,J.Narrow);break;case"EEEEEE":e=$t(ot.Days,J.Short);break;case"a":case"aa":case"aaa":e=$t(ot.DayPeriods,J.Abbreviated);break;case"aaaa":e=$t(ot.DayPeriods,J.Wide);break;case"aaaaa":e=$t(ot.DayPeriods,J.Narrow);break;case"b":case"bb":case"bbb":e=$t(ot.DayPeriods,J.Abbreviated,Z.Standalone,!0);break;case"bbbb":e=$t(ot.DayPeriods,J.Wide,Z.Standalone,!0);break;case"bbbbb":e=$t(ot.DayPeriods,J.Narrow,Z.Standalone,!0);break;case"B":case"BB":case"BBB":e=$t(ot.DayPeriods,J.Abbreviated,Z.Format,!0);break;case"BBBB":e=$t(ot.DayPeriods,J.Wide,Z.Format,!0);break;case"BBBBB":e=$t(ot.DayPeriods,J.Narrow,Z.Format,!0);break;case"h":e=zt(dt.Hours,1,-12);break;case"hh":e=zt(dt.Hours,2,-12);break;case"H":e=zt(dt.Hours,1);break;case"HH":e=zt(dt.Hours,2);break;case"m":e=zt(dt.Minutes,1);break;case"mm":e=zt(dt.Minutes,2);break;case"s":e=zt(dt.Seconds,1);break;case"ss":e=zt(dt.Seconds,2);break;case"S":e=zt(dt.FractionalSeconds,1);break;case"SS":e=zt(dt.FractionalSeconds,2);break;case"SSS":e=zt(dt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=B(an.Short);break;case"ZZZZZ":e=B(an.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=B(an.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=B(an.Long);break;default:return null}return on[n]=e,e}(S);E+=O?O(s,t,w):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),E}function Jn(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Xn(n,e){const t=function Pe(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(Tn[t]=Tn[t]||{},Tn[t][e])return Tn[t][e];let r="";switch(e){case"shortDate":r=Ht(n,ie.Short);break;case"mediumDate":r=Ht(n,ie.Medium);break;case"longDate":r=Ht(n,ie.Long);break;case"fullDate":r=Ht(n,ie.Full);break;case"shortTime":r=Gt(n,ie.Short);break;case"mediumTime":r=Gt(n,ie.Medium);break;case"longTime":r=Gt(n,ie.Long);break;case"fullTime":r=Gt(n,ie.Full);break;case"short":const s=Xn(n,"shortTime"),u=Xn(n,"shortDate");r=_r(vr(n,ie.Short),[s,u]);break;case"medium":const d=Xn(n,"mediumTime"),m=Xn(n,"mediumDate");r=_r(vr(n,ie.Medium),[d,m]);break;case"long":const w=Xn(n,"longTime"),E=Xn(n,"longDate");r=_r(vr(n,ie.Long),[w,E]);break;case"full":const S=Xn(n,"fullTime"),O=Xn(n,"fullDate");r=_r(vr(n,ie.Full),[S,O])}return r&&(Tn[t][e]=r),r}function _r(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function mt(n,e,t="-",r,s){let u="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,u=t));let d=String(n);for(;d.length<e;)d="0"+d;return r&&(d=d.slice(d.length-e)),u+d}function zt(n,e,t=0,r=!1,s=!1){return function(u,d){let m=function si(n,e){switch(n){case dt.FullYear:return e.getFullYear();case dt.Month:return e.getMonth();case dt.Date:return e.getDate();case dt.Hours:return e.getHours();case dt.Minutes:return e.getMinutes();case dt.Seconds:return e.getSeconds();case dt.FractionalSeconds:return e.getMilliseconds();case dt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===dt.Hours)0===m&&-12===t&&(m=12);else if(n===dt.FractionalSeconds)return function qi(n,e){return mt(n,3).substring(0,e)}(m,e);const w=Ot(d,te.MinusSign);return mt(m,e,w,r,s)}}function $t(n,e,t=Z.Format,r=!1){return function(s,u){return function q(n,e,t,r,s,u){switch(t){case ot.Months:return function Vt(n,e,t){const r=(0,f.cg1)(n),u=We([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return We(u,t)}(e,s,r)[n.getMonth()];case ot.Days:return function Bt(n,e,t){const r=(0,f.cg1)(n),u=We([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return We(u,t)}(e,s,r)[n.getDay()];case ot.DayPeriods:const d=n.getHours(),m=n.getMinutes();if(u){const E=function Rr(n){const e=(0,f.cg1)(n);return Ii(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?kr(r):[kr(r[0]),kr(r[1])])}(e),S=function ii(n,e,t){const r=(0,f.cg1)(n);Ii(r);const u=We([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return We(u,t)||[]}(e,s,r),O=E.findIndex(H=>{if(Array.isArray(H)){const[Q,ae]=H,Oe=d>=Q.hours&&m>=Q.minutes,Le=d<ae.hours||d===ae.hours&&m<ae.minutes;if(Q.hours<ae.hours){if(Oe&&Le)return!0}else if(Oe||Le)return!0}else if(H.hours===d&&H.minutes===m)return!0;return!1});if(-1!==O)return S[O]}return function lt(n,e,t){const r=(0,f.cg1)(n),u=We([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return We(u,t)}(e,s,r)[d<12?0:1];case ot.Eras:return function ze(n,e){return We((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,u,n,e,t,r)}}function B(n){return function(e,t,r){const s=-1*r,u=Ot(t,te.MinusSign),d=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case an.Short:return(s>=0?"+":"")+mt(d,2,u)+mt(Math.abs(s%60),2,u);case an.ShortGMT:return"GMT"+(s>=0?"+":"")+mt(d,1,u);case an.Long:return"GMT"+(s>=0?"+":"")+mt(d,2,u)+":"+mt(Math.abs(s%60),2,u);case an.Extended:return 0===r?"Z":(s>=0?"+":"")+mt(d,2,u)+":"+mt(Math.abs(s%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ie(n){return Jn(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Ue(n,e=!1){return function(t,r){let s;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,d=t.getDate();s=1+Math.floor((d+u)/7)}else{const u=Ie(t),d=function z(n){const e=Jn(n,0,1).getDay();return Jn(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),m=u.getTime()-d.getTime();s=1+Math.round(m/6048e5)}return mt(s,n,Ot(r,te.MinusSign))}}function nt(n,e=!1){return function(t,r){return mt(Ie(t).getFullYear(),n,Ot(r,te.MinusSign),e)}}const on={};function $n(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ei(n){return n instanceof Date&&!isNaN(n.valueOf())}class aa{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wi=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new aa(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Co(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Co(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Co(n,e){n.context.$implicit=e.item}let An=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){er("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){er("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class xc{constructor(){this.$implicit=null,this.ngIf=null}}function er(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}const Zp=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let zh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",s,u){if(null==t||""===t||t!=t)return null;try{return tn(t,r,u||this.locale,s??this.defaultTimezone??void 0)}catch(d){throw function Gn(n,e){return new f.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(Zp,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),la=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function or(n){return"server"===n}let hu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Yh((0,f.LFG)(ue),window)}),n})();class Yh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function br(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Wr(this.window.history)||Wr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Wr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Yo extends class fd extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new Yo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tu(){return Qo=Qo||document.querySelector("base"),Qo?Qo.getAttribute("href"):null}();return null==t?null:function Lr(n){zn=zn||document.createElement("a"),zn.setAttribute("href",n);const e=zn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function uu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let zn,Qo=null;const cn=new f.OlP("TRANSITION_ID"),Wc=[{provide:f.ip1,useFactory:function pd(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=N(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[cn,ue,f.zs3],multi:!0}];let Zc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Au=new f.OlP("EventManagerPlugins");let gd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Au),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Kc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=N().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Is=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Es=(()=>{class n extends Is{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(md),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(md))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function md(n){N().remove(n)}const Ds={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yd=/%COMP%/g;function xu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?xu(n,s,t):(s=s.replace(yd,n),t.push(s))}return t}function vd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ts=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new As(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new _d(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case f.ifc.ShadowDom:return new wd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=xu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gd),f.LFG(Es),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class As{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ds[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(va(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(va(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Ds[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Ds[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vd(r)):this.eventManager.addEventListener(e,t,vd(r))}}function va(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _d extends As{constructor(e,t,r,s){super(e),this.component=r;const u=xu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Cn(n){return"_ngcontent-%COMP%".replace(yd,n)}(s+"-"+r.id),this.hostAttr=function Mu(n){return"_nghost-%COMP%".replace(yd,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class wd extends As{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=xu(s.id,s.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tr=(()=>{class n extends Kc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const _a=["alt","control","meta","shift"],wa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Si={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ca=(()=>{class n extends Kc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),_a.forEach(E=>{const S=r.indexOf(E);S>-1&&(r.splice(S,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let s=wa[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),_a.forEach(d=>{d!==s&&(0,Si[d])(t)&&(u+=d+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ru=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Pu(){Yo.makeCurrent()},multi:!0},{provide:ue,useFactory:function Ia(){return(0,f.RDi)(document),document},deps:[]}]),To=new f.OlP(""),bd=[{provide:f.rWj,useClass:class Jh{addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Ao=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function es(){return new f.qLn},deps:[]},{provide:Au,useClass:tr,multi:!0,deps:[ue,f.R0b,f.Lbi]},{provide:Au,useClass:Ca,multi:!0,deps:[ue]},{provide:Ts,useClass:Ts,deps:[gd,Es,f.AFp]},{provide:f.FYo,useExisting:Ts},{provide:Is,useExisting:Es},{provide:Es,useClass:Es,deps:[ue]},{provide:gd,useClass:gd,deps:[Au,f.R0b]},{provide:class Cs{},useClass:Zc,deps:[]},[]];let Qc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:cn,useExisting:f.AFp},Wc]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(To,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Ao,...bd],imports:[la,f.hGG]}),n})(),to=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ss(){return new to((0,f.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=k(8996),di=k(7669);function rt(...n){const e=(0,di.yG)(n);return(0,rn.D)(n,e)}var Kr=k(7579);class pn extends Kr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Aa=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ir=k(9751);const{isArray:Mo}=Array,{getPrototypeOf:Uu,prototype:Xp,keys:tl}=Object;function Sa(n){if(1===n.length){const e=n[0];if(Mo(e))return{args:e,keys:null};if(function Rs(n){return n&&"object"==typeof n&&Uu(n)===Xp}(e)){const t=tl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xo=k(4671),it=k(4004);const{isArray:Ma}=Array;function xa(n){return(0,it.U)(e=>function Oo(n,e){return Ma(e)?n(...e):n(e)}(n,e))}function ks(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var qn=k(5403),nl=k(9672);function Fs(...n){const e=(0,di.yG)(n),t=(0,di.jO)(n),{args:r,keys:s}=Sa(n);if(0===r.length)return(0,rn.D)([],e);const u=new Ir.y(function eg(n,e,t=xo.y){return r=>{rl(e,()=>{const{length:s}=n,u=new Array(s);let d=s,m=s;for(let w=0;w<s;w++)rl(e,()=>{const E=(0,rn.D)(n[w],e);let S=!1;E.subscribe((0,qn.x)(r,O=>{u[w]=O,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>ks(s,d):xo.y));return t?u.pipe(xa(t)):u}function rl(n,e,t){n?(0,nl.f)(t,n,e):e()}var Bu=k(8189);function Po(...n){return function Oa(){return(0,Bu.J)(1)}()((0,rn.D)(n,(0,di.yG)(n)))}var No=k(8421);function fi(n){return new Ir.y(e=>{(0,No.Xf)(n()).subscribe(e)})}var il=k(9635),Ls=k(576);function Ur(n,e){const t=(0,Ls.m)(n)?n:()=>n,r=s=>s.error(t());return new Ir.y(e?s=>e.schedule(r,0,s):r)}var ro=k(515),Mi=k(727),hr=k(4482);function Ro(){return(0,hr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class io extends Ir.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,hr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,qn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mi.w0.EMPTY)}return e}refCount(){return Ro()(this)}}function Fn(n,e){return(0,hr.e)((t,r)=>{let s=null,u=0,d=!1;const m=()=>d&&!s&&r.complete();t.subscribe((0,qn.x)(r,w=>{s?.unsubscribe();let E=0;const S=u++;(0,No.Xf)(n(w,S)).subscribe(s=(0,qn.x)(r,O=>r.next(e?e(w,O,S,E++):O),()=>{s=null,m()}))},()=>{d=!0,m()}))})}function ln(n){return n<=0?()=>ro.E:(0,hr.e)((e,t)=>{let r=0;e.subscribe((0,qn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function ju(...n){const e=(0,di.yG)(n);return(0,hr.e)((t,r)=>{(e?Po(n,t,e):Po(n,t)).subscribe(r)})}function I(n,e){return(0,hr.e)((t,r)=>{let s=0;t.subscribe((0,qn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var D=k(5577);function M(n){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function F(n=Y){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Y(){return new Aa}function ne(n,e){const t=arguments.length>=2;return r=>r.pipe(n?I((s,u)=>n(s,u,r)):xo.y,ln(1),t?M(e):F(()=>new Aa))}function Ce(n,e){return(0,Ls.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var xe=k(8505);function et(n){return(0,hr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,qn.x)(t,void 0,void 0,d=>{u=(0,No.Xf)(n(d,et(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function pt(n,e,t,r,s){return(u,d)=>{let m=t,w=e,E=0;u.subscribe((0,qn.x)(d,S=>{const O=E++;w=m?n(w,S,O):(m=!0,S),r&&d.next(w)},s&&(()=>{m&&d.next(w),d.complete()})))}}function wt(n,e){return(0,hr.e)(pt(n,e,arguments.length>=2,!0))}function ut(n){return n<=0?()=>ro.E:(0,hr.e)((e,t)=>{let r=[];e.subscribe((0,qn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function gn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?I((s,u)=>n(s,u,r)):xo.y,ut(1),t?M(e):F(()=>new Aa))}function ko(n){return(0,hr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ct="primary",xi=Symbol("RouteTitle");class Fo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yr(n){return new Fo(n)}function Us(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))s[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function pi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!tf(n[s],e[s]))return!1;return!0}function tf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function tg(n){return Array.prototype.concat.apply([],n)}function ng(n){return n.length>0?n[n.length-1]:null}function Wn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Oi(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,rn.D)(Promise.resolve(n)):rt(n)}const $0={exact:function ig(n,e,t){if(!ss(n.segments,e.segments)||!os(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ig(n.children[r],e.children[r],t))return!1;return!0},subset:Pa},rf={exact:function sf(n,e){return pi(n,e)},subset:function og(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tf(n[t],e[t]))},ignored:()=>!0};function Ay(n,e,t){return $0[t.paths](n.root,e.root,t.matrixParams)&&rf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Pa(n,e,t){return Ed(n,e,e.segments,t)}function Ed(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!ss(s,t)||e.hasChildren()||!os(s,t,r))}if(n.segments.length===t.length){if(!ss(n.segments,t)||!os(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Pa(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ss(n.segments,s)&&os(n.segments,s,r)&&n.children[Ct])&&Ed(n.children[Ct],e,u,r)}}function os(n,e,t){return e.every((r,s)=>rf[t](n[s].parameters,r.parameters))}class Na{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yr(this.queryParams)),this._queryParamMap}toString(){return Ad.serialize(this)}}class Ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sd(this)}}class Dd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Yr(this.parameters)),this._parameterMap}toString(){return ug(this)}}function ss(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let af=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Td},providedIn:"root"}),n})();class Td{parse(e){const t=new Oy(e);return new Na(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ra(e.root,!0)}`,r=function G0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${sl(t)}=${sl(s)}`).join("&"):`${sl(t)}=${sl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Sy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ad=new Td;function Sd(n){return n.segments.map(e=>ug(e)).join("/")}function Ra(n,e){if(!n.hasChildren())return Sd(n);if(e){const t=n.children[Ct]?Ra(n.children[Ct],!1):"",r=[];return Wn(n.children,(s,u)=>{u!==Ct&&r.push(`${u}:${Ra(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function sg(n,e){let t=[];return Wn(n.children,(r,s)=>{s===Ct&&(t=t.concat(e(r,s)))}),Wn(n.children,(r,s)=>{s!==Ct&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Ct?[Ra(n.children[Ct],!1)]:[`${s}:${Ra(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ct]?`${Sd(n)}/${t[0]}`:`${Sd(n)}/(${t.join("//")})`}}function ag(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sl(n){return ag(n).replace(/%3B/gi,";")}function Pi(n){return ag(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bs(n){return decodeURIComponent(n)}function uf(n){return Bs(n.replace(/\+/g,"%20"))}function ug(n){return`${Pi(n.path)}${function H0(n){return Object.keys(n).map(e=>`;${Pi(e)}=${Pi(n[e])}`).join("")}(n.parameters)}`}const z0=/^[^\/()?;=#]+/;function cg(n){const e=n.match(z0);return e?e[0]:""}const js=/^[^=?&#]+/,xy=/^[^&#]+/;class Oy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ct]=new Ft(e,t)),r}parseSegment(){const e=cg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new Dd(Bs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=cg(this.remaining);s&&(r=s,this.capture(r))}e[Bs(t)]=Bs(r)}parseQueryParam(e){const t=function My(n){const e=n.match(js);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function cf(n){const e=n.match(xy);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=uf(t),u=uf(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cg(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new f.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ct);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Ct]:new Ft([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function ka(n){return n.segments.length>0?new Ft([],{[Ct]:n}):n}function Ni(n){const e={};for(const r of Object.keys(n.children)){const u=Ni(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function al(n){if(1===n.numberOfChildren&&n.children[Ct]){const e=n.children[Ct];return new Ft(n.segments.concat(e.segments),e.children)}return n}(new Ft(n.segments,e))}function Lo(n){return n instanceof Na}function W0(n,e,t,r,s){if(0===t.length)return ul(e.root,e.root,e.root,r,s);const u=function hg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cl(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Wn(u.outlets,(w,E)=>{m[E]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new cl(t,e,r)}(t);return u.toRoot()?ul(e.root,e.root,new Ft([],{}),r,s):function d(w){const E=function df(n,e,t,r){if(n.isAbsolute)return new $u(e.root,!0,0);if(-1===r)return new $u(t,t===e.root,0);return function hf(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new f.vHH(4005,!1);s=r.segments.length}return new $u(r,!1,s-u)}(t,r+(Fa(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=E.processChildren?Va(E.segmentGroup,E.index,u.commands):Hu(E.segmentGroup,E.index,u.commands);return ul(e.root,E.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function Fa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function La(n){return"object"==typeof n&&null!=n&&n.outlets}function ul(n,e,t,r,s){let d,u={};r&&Wn(r,(w,E)=>{u[E]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),d=n===e?t:dg(n,e,t);const m=ka(Ni(d));return new Na(m,u,s)}function dg(n,e,t){const r={};return Wn(n.children,(s,u)=>{r[u]=s===e?t:dg(s,e,t)}),new Ft(n.segments,r)}class cl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fa(r[0]))throw new f.vHH(4003,!1);const s=r.find(La);if(s&&s!==ng(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $u{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Hu(n,e,t){if(n||(n=new Ft([],{})),0===n.segments.length&&n.hasChildren())return Va(n,e,t);const r=function Ny(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],m=t[r];if(La(m))break;const w=`${m}`,E=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&E&&"object"==typeof E&&void 0===E.outlets){if(!Od(w,E,d))return u;r+=2}else{if(!Od(w,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ft(n.segments.slice(0,r.pathIndex),{});return u.children[Ct]=new Ft(n.segments.slice(r.pathIndex),n.children),Va(u,0,s)}return r.match&&0===s.length?new Ft(n.segments,{}):r.match&&!n.hasChildren()?Mn(n,e,t):r.match?Va(n,0,s):Mn(n,e,t)}function Va(n,e,t){if(0===t.length)return new Ft(n.segments,{});{const r=function xd(n){return La(n[0])?n[0].outlets:{[Ct]:n}}(t),s={};return Wn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=Hu(n.children[d],e,u))}),Wn(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new Ft(n.segments,s)}}function Mn(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(La(u)){const w=fg(u.outlets);return new Ft(r,w)}if(0===s&&Fa(t[0])){r.push(new Dd(n.segments[e].path,pg(t[0]))),s++;continue}const d=La(u)?u.outlets[Ct]:`${u}`,m=s<t.length-1?t[s+1]:null;d&&m&&Fa(m)?(r.push(new Dd(d,pg(m))),s+=2):(r.push(new Dd(d,{})),s++)}return new Ft(r,{})}function fg(n){const e={};return Wn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Mn(new Ft([],{}),0,t))}),e}function pg(n){const e={};return Wn(n,(t,r)=>e[r]=`${t}`),e}function Od(n,e,t){return n==t.path&&pi(e,t.parameters)}class Vo{constructor(e,t){this.id=e,this.url=t}}class ff extends Vo{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oo extends Vo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pd extends Vo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pf extends Vo{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ry extends Vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z0 extends Vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K0 extends Vo{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ll extends Vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nd extends Vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rd{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kd{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ky{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Er{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class mf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=dl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=dl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Gu(e,this._root).map(t=>t.value)}}function dl(n,e){if(n===e.value)return e;for(const t of e.children){const r=dl(n,t);if(r)return r}return null}function Gu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gu(n,t);if(r.length)return r.unshift(e),r}return[]}class Ri{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ki(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yf extends mf{constructor(e,t){super(e),this.snapshot=t,ar(this,e)}toString(){return this.snapshot.toString()}}function Vd(n,e){const t=function so(n,e){const d=new Uo([],{},{},"",{},Ct,e,null,n.root,-1,{});return new jd("",new Ri(d,[]))}(n,e),r=new pn([new Dd("",{})]),s=new pn({}),u=new pn({}),d=new pn({}),m=new pn(""),w=new $s(r,s,d,m,u,Ct,e,t.root);return w.snapshot=t.root,new yf(new Ri(w,[]),t)}class $s{constructor(e,t,r,s,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,it.U)(E=>E[xi]))??rt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>Yr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>Yr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ud(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Bd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Uo{constructor(e,t,r,s,u,d,m,w,E,S,O,H){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[xi],this.routeConfig=w,this._urlSegment=E,this._lastPathIndex=S,this._correctedLastPathIndex=H??S,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jd extends mf{constructor(e,t){super(t),this.url=e,ar(this,t)}toString(){return $d(this._root)}}function ar(n,e){e.value._routerState=n,e.children.forEach(t=>ar(n,t))}function $d(n){const e=n.children.length>0?` { ${n.children.map($d).join(", ")} } `:"";return`${n.value}${e}`}function hl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),pi(e.params,t.params)||n.params.next(t.params),function is(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),pi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hd(n,e){const t=pi(n.params,e.params)&&function ol(n,e){return ss(n,e)&&n.every((t,r)=>pi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hd(n.parent,e.parent))}function as(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function mg(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return as(n,r,s);return as(n,r)})}(n,e,t);return new Ri(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>as(n,m)),d}}const r=function yg(n){return new $s(new pn(n.url),new pn(n.params),new pn(n.queryParams),new pn(n.fragment),new pn(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>as(n,u));return new Ri(r,s)}}const vf="ngNavigationCancelingError";function zu(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Lo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=vg(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function vg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[vf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _f(n){return _g(n)&&Lo(n.url)}function _g(n){return n&&n[vf]}class wg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new y,this.attachRef=null}}let y=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new wg,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const h=!1;let g=(()=>{class n{constructor(t,r,s,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=s||Ct,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,h);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,h);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,h);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,h);this._activatedRoute=t;const s=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new _(t,m,s.injector);if(r&&function A(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(d);this.activated=s.createComponent(E,s.length,w)}else this.activated=s.createComponent(d,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(y),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class _{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$s?this.route:e===y?this.childContexts:this.parent.get(e,t)}}let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[g],encapsulation:2}),n})();function W(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gd(n){const e=n.children&&n.children.map(Gd),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ct&&(t.component=P),t}function Jr(n){return n.outlet||Ct}function fl(n,e){const t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function pl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class zd{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=ki(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),Wn(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=ki(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=ki(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=ki(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new gg(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ky(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(hl(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),hl(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=pl(s.snapshot),w=m?.get(f._Vd)??null;d.attachRef=null,d.route=s,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class bg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gl{constructor(e,t){this.component=e,this.route=t}}function Fy(n,e,t){const r=n._root;return ml(r,e?e._root:null,t,[r.value])}function Ua(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function ml(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=ki(e);return n.children.forEach(d=>{(function Q0(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function Ly(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ss(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ss(n.url,e.url)||!pi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hd(n,e)||!pi(n.queryParams,e.queryParams);default:return!Hd(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new bg(r)):(u.data=d.data,u._resolvedData=d._resolvedData),ml(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new gl(m.outlet.component,d))}else d&&qd(e,m,s),s.canActivateChecks.push(new bg(r)),ml(n,null,u.component?m?m.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),Wn(u,(d,m)=>qd(d,t.getContext(m),s)),s}function qd(n,e,t){const r=ki(n),s=n.value;Wn(r,(u,d)=>{qd(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new gl(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Wd(n){return"function"==typeof n}function Ig(n){return n instanceof Aa||"EmptyError"===n?.name}const Eg=Symbol("INITIAL_VALUE");function Zd(){return Fn(n=>Fs(n.map(e=>e.pipe(ln(1),ju(Eg)))).pipe((0,it.U)(e=>{for(const t of e)if(!0!==t){if(t===Eg)return Eg;if(!1===t||t instanceof Na)return t}return!0}),I(e=>e!==Eg),ln(1)))}function Xr(n){return(0,il.z)((0,xe.b)(e=>{if(Lo(e))throw zu(0,e)}),(0,it.U)(e=>!0===e))}const Dg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tg(n,e,t,r,s){const u=Dr(n,e,t);return u.matched?function jy(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?rt(s.map(d=>{const m=Ua(d,n);return Oi(function qI(n){return n&&Wd(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Zd(),Xr()):rt(!0)}(r=W(e,r),e,t).pipe((0,it.U)(d=>!0===d?u:{...Dg})):rt(u)}function Dr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Dg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Us)(t,n,e);if(!s)return{...Dg};const u={};Wn(s.posParams,(m,w)=>{u[w]=m.path});const d=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function Wu(n,e,t,r,s="corrected"){if(t.length>0&&function nE(n,e,t){return t.some(r=>Ag(n,e,r)&&Jr(r)!==Ct)}(n,t,r)){const d=new Ft(e,function tE(n,e,t,r){const s={};s[Ct]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Jr(u)!==Ct){const d=new Ft([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[Jr(u)]=d}return s}(n,e,r,new Ft(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function tw(n,e,t){return t.some(r=>Ag(n,e,r))}(n,t,r)){const d=new Ft(n.segments,function ew(n,e,t,r,s,u){const d={};for(const m of r)if(Ag(n,t,m)&&!s[Jr(m)]){const w=new Ft([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Jr(m)]=w}return{...s,...d}}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ft(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ag(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $y(n,e,t,r){return!!(Jr(n)===r||r!==Ct&&Ag(e,t,n))&&("**"===n.path||Dr(e,n,t).matched)}function nw(n,e,t){return 0===e.length&&!n.children[t]}const Cf=!1;class Sg{constructor(e){this.segmentGroup=e||null}}class rw{constructor(e){this.urlTree=e}}function bf(n){return Ur(new Sg(n))}function iw(n){return Ur(new rw(n))}class iE{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=Wu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ft(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ct).pipe((0,it.U)(u=>this.createUrlTree(Ni(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(et(u=>{if(u instanceof rw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Sg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ct).pipe((0,it.U)(s=>this.createUrlTree(Ni(s),e.queryParams,e.fragment))).pipe(et(s=>{throw s instanceof Sg?this.noMatchError(s):s}))}noMatchError(e){return new f.vHH(4002,Cf)}createUrlTree(e,t,r){const s=ka(e);return new Na(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,it.U)(u=>new Ft([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,rn.D)(s).pipe(Ce(u=>{const d=r.children[u],m=fl(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,it.U)(w=>({segment:w,outlet:u})))}),wt((u,d)=>(u[d.outlet]=d.segment,u),{}),gn())}expandSegment(e,t,r,s,u,d){return(0,rn.D)(r).pipe(Ce(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,d).pipe(et(E=>{if(E instanceof Sg)return rt(null);throw E}))),ne(m=>!!m),et((m,w)=>{if(Ig(m))return nw(t,s,u)?rt(new Ft([],{})):bf(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,d,m){return $y(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):bf(t):bf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?iw(u):this.lineralizeSegments(r,u).pipe((0,D.z)(d=>{const m=new Ft(d,{});return this.expandSegment(e,m,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:m,consumedSegments:w,remainingSegments:E,positionalParamSegments:S}=Dr(t,s,u);if(!m)return bf(t);const O=this.applyRedirectCommands(w,s.redirectTo,S);return s.redirectTo.startsWith("/")?iw(O):this.lineralizeSegments(s,O).pipe((0,D.z)(H=>this.expandSegment(e,t,r,H.concat(E),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=W(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,it.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ft(s,{})))):rt(new Ft(s,{}))):Tg(t,r,s,e).pipe(Fn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,s).pipe((0,D.z)(S=>{const O=S.injector??e,H=S.routes,{segmentGroup:Q,slicedSegments:ae}=Wu(t,m,w,H),Oe=new Ft(Q.segments,Q.children);if(0===ae.length&&Oe.hasChildren())return this.expandChildren(O,H,Oe).pipe((0,it.U)(Lt=>new Ft(m,Lt)));if(0===H.length&&0===ae.length)return rt(new Ft(m,{}));const Le=Jr(r)===u;return this.expandSegment(O,Oe,H,ae,Le?Ct:u,!0).pipe((0,it.U)(Tt=>new Ft(m.concat(Tt.segments),Tt.children)))})):bf(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function eE(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?rt(!0):rt(s.map(d=>{const m=Ua(d,n);return Oi(function Vy(n){return n&&Wd(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Zd(),Xr())}(e,t,r).pipe((0,D.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,xe.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Kd(n){return Ur(vg(Cf,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return rt(r);if(s.numberOfChildren>1||!s.children[Ct])return Ur(new f.vHH(4e3,Cf));s=s.children[Ct]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Na(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return Wn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,s)}),new Ft(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new f.vHH(4001,Cf);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class bA{}class Hs{constructor(e,t,r,s,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=Wu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ct).pipe((0,it.U)(t=>{if(null===t)return null;const r=new Uo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ct,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Ri(r,t),u=new jd(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Ud(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(Ce(s=>{const u=r.children[s],d=fl(t,s);return this.processSegmentGroup(e,d,u,s)}),wt((s,u)=>s&&u?(s.push(...u),s):null),function sr(n,e=!1){return(0,hr.e)((t,r)=>{let s=0;t.subscribe((0,qn.x)(r,u=>{const d=n(u,s++);(d||e)&&r.next(u),!d&&r.complete()}))})}(s=>null!==s),M(null),gn(),(0,it.U)(s=>{if(null===s)return null;const u=qy(s);return function Gy(n){n.sort((e,t)=>e.value.outlet===Ct?-1:t.value.outlet===Ct?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,rn.D)(t).pipe(Ce(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,s,u)),ne(d=>!!d),et(d=>{if(Ig(d))return nw(r,s,u)?rt([]):rt(null);throw d}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!$y(t,r,s,u))return rt(null);let d;if("**"===t.path){const m=s.length>0?ng(s).parameters:{},w=sw(r)+s.length;d=rt({snapshot:new Uo(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Mg(t),Jr(t),t.component??t._loadedComponent??null,t,Yd(r),w,xg(t),w),consumedSegments:[],remainingSegments:[]})}else d=Tg(r,t,s,e).pipe((0,it.U)(({matched:m,consumedSegments:w,remainingSegments:E,parameters:S})=>{if(!m)return null;const O=sw(r)+w.length;return{snapshot:new Uo(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Mg(t),Jr(t),t.component??t._loadedComponent??null,t,Yd(r),O,xg(t),O),consumedSegments:w,remainingSegments:E}}));return d.pipe(Fn(m=>{if(null===m)return rt(null);const{snapshot:w,consumedSegments:E,remainingSegments:S}=m;e=t._injector??e;const O=t._loadedInjector??e,H=function zy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Q,slicedSegments:ae}=Wu(r,E,S,H.filter(Le=>void 0===Le.redirectTo),this.relativeLinkResolution);if(0===ae.length&&Q.hasChildren())return this.processChildren(O,H,Q).pipe((0,it.U)(Le=>null===Le?null:[new Ri(w,Le)]));if(0===H.length&&0===ae.length)return rt([new Ri(w,[])]);const Oe=Jr(t)===u;return this.processSegment(O,H,Q,ae,Oe?Ct:u).pipe((0,it.U)(Le=>null===Le?null:[new Ri(w,Le)]))}))}}function sE(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qy(n){const e=[],t=new Set;for(const r of n){if(!sE(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=qy(r.children);e.push(new Ri(r.value,s))}return e.filter(r=>!t.has(r))}function Yd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function sw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Mg(n){return n.data||{}}function xg(n){return n.resolve||{}}function Og(n){return"string"==typeof n.title||null===n.title}function Zy(n){return Fn(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,it.U)(()=>e)):rt(e)})}let lw=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Ct);return r}getResolvedTitleForRoute(t){return t.data[xi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(dw)},providedIn:"root"}),n})(),dw=(()=>{class n extends lw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(to))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cE{}class hw extends class lE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const If=new f.OlP("",{providedIn:"root",factory:()=>({})}),Yy=new f.OlP("ROUTES");let Qy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Oi(t.loadComponent()).pipe((0,xe.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ko(()=>{this.componentLoaders.delete(t)})),s=new io(r,()=>new Kr.x).pipe(Ro());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,it.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,E,S=!1;Array.isArray(m)?E=m:(w=m.create(t).injector,E=tg(w.get(Yy,[],f.XFs.Self|f.XFs.Optional)));return{routes:E.map(Gd),injector:w}}),ko(()=>{this.childrenLoaders.delete(r)})),d=new io(u,()=>new Kr.x).pipe(Ro());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Oi(t()).pipe((0,D.z)(r=>r instanceof f.YKP||Array.isArray(r)?rt(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class fw{}class pw{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function gw(n){throw n}function mw(n,e,t){return e.parse("/")}const dE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function yw(){const n=(0,f.f3M)(af),e=(0,f.f3M)(y),t=(0,f.f3M)(Te),r=(0,f.f3M)(f.zs3),s=(0,f.f3M)(f.Sil),u=(0,f.f3M)(Yy,{optional:!0})??[],d=(0,f.f3M)(If,{optional:!0})??{},m=(0,f.f3M)(dw),w=(0,f.f3M)(lw,{optional:!0}),E=(0,f.f3M)(fw,{optional:!0}),S=(0,f.f3M)(cE,{optional:!0}),O=new Tr(null,n,e,t,r,s,tg(u));return E&&(O.urlHandlingStrategy=E),S&&(O.routeReuseStrategy=S),O.titleStrategy=w??m,function Ng(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,O),O}let Tr=(()=>{class n{constructor(t,r,s,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kr.x,this.errorHandler=gw,this.malformedUriErrorHandler=mw,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>rt(void 0),this.urlHandlingStrategy=new pw,this.routeReuseStrategy=new hw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Qy),this.configLoader.onLoadEndListener=H=>this.triggerEvent(new kd(H)),this.configLoader.onLoadStartListener=H=>this.triggerEvent(new Rd(H)),this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const O=d.get(f.R0b);this.isNgZoneEnabled=O instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function rg(){return new Na(new Ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Vd(this.currentUrlTree,this.rootComponentType),this.transitions=new pn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(I(s=>0!==s.id),(0,it.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Fn(s=>{let u=!1,d=!1;return rt(s).pipe((0,xe.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fn(m=>{const w=this.browserUrlTree.toString(),E=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Jy(m.source)&&(this.browserUrlTree=m.extractedUrl),rt(m).pipe(Fn(O=>{const H=this.transitions.getValue();return r.next(new ff(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),H!==this.transitions.getValue()?ro.E:Promise.resolve(O)}),function oE(n,e,t,r){return Fn(s=>function Ba(n,e,t,r,s){return new iE(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,it.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,xe.b)(O=>{this.currentNavigation={...this.currentNavigation,finalUrl:O.urlAfterRedirects},s.urlAfterRedirects=O.urlAfterRedirects}),function uw(n,e,t,r,s,u){return(0,D.z)(d=>function IA(n,e,t,r,s,u,d="emptyOnly",m="legacy"){return new Hs(n,e,t,r,s,d,m,u).recognize().pipe(Fn(w=>null===w?function ow(n){return new Ir.y(e=>e.error(n))}(new bA):rt(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,s,u).pipe((0,it.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,xe.b)(O=>{if(s.targetSnapshot=O.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(Q,O)}this.browserUrlTree=O.urlAfterRedirects}const H=new Ry(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(H)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Q,source:ae,restoredState:Oe,extras:Le}=m,It=new ff(H,this.serializeUrl(Q),ae,Oe);r.next(It);const Tt=Vd(Q,this.rootComponentType).snapshot;return rt(s={...m,targetSnapshot:Tt,urlAfterRedirects:Q,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),ro.E}),(0,xe.b)(m=>{const w=new Z0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,it.U)(m=>s={...m,guards:Fy(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function ZI(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?rt({...t,guardsResult:!0}):function KI(n,e,t,r){return(0,rn.D)(n).pipe((0,D.z)(s=>function XI(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?rt(u.map(m=>{const w=pl(e)??s,E=Ua(m,w);return Oi(function wf(n){return n&&Wd(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):w.runInContext(()=>E(n,e,t,r))).pipe(ne())})).pipe(Zd()):rt(!0)}(s.component,s.route,t,e,r)),ne(s=>!0!==s,!0))}(d,r,s,n).pipe((0,D.z)(m=>m&&function J0(n){return"boolean"==typeof n}(m)?function By(n,e,t,r){return(0,rn.D)(e).pipe(Ce(s=>Po(function QI(n,e){return null!==n&&e&&e(new gf(n)),rt(!0)}(s.route.parent,r),function YI(n,e){return null!==n&&e&&e(new Fd(n)),rt(!0)}(s.route,r),function X0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Y0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>fi(()=>rt(d.guards.map(w=>{const E=pl(d.node)??t,S=Ua(w,E);return Oi(function Uy(n){return n&&Wd(n.canActivateChild)}(S)?S.canActivateChild(r,n):E.runInContext(()=>S(r,n))).pipe(ne())})).pipe(Zd())));return rt(u).pipe(Zd())}(n,s.path,t),function JI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const s=r.map(u=>fi(()=>{const d=pl(e)??t,m=Ua(u,d);return Oi(function zI(n){return n&&Wd(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ne())}));return rt(s).pipe(Zd())}(n,s.route,t))),ne(s=>!0!==s,!0))}(r,u,n,e):rt(m)),(0,it.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,xe.b)(m=>{if(s.guardsResult=m.guardsResult,Lo(m.guardsResult))throw zu(0,m.guardsResult);const w=new K0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),I(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Zy(m=>{if(m.guards.canActivateChecks.length)return rt(m).pipe((0,xe.b)(w=>{const E=new ll(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(E)}),Fn(w=>{let E=!1;return rt(w).pipe(function EA(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return rt(t);let u=0;return(0,rn.D)(s).pipe(Ce(d=>function Qd(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!Og(s)&&(u[xi]=s.title),function Wy(n,e,t,r){const s=function cw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return rt({});const u={};return(0,rn.D)(s).pipe((0,D.z)(d=>function uE(n,e,t,r){const s=pl(e)??r,u=Ua(n,s);return Oi(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ne(),(0,xe.b)(m=>{u[d]=m}))),ut(1),function Vs(n){return(0,it.U)(()=>n)}(u),et(d=>Ig(d)?ro.E:Ur(d)))}(u,n,e,r).pipe((0,it.U)(d=>(n._resolvedData=d,n.data=Ud(n,t).resolve,s&&Og(s)&&(n.data[xi]=s.title),null)))}(d.route,r,n,e)),(0,xe.b)(()=>u++),ut(1),(0,D.z)(d=>u===s.length?rt(t):ro.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,xe.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,xe.b)(w=>{const E=new Nd(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(E)}))}),Zy(m=>{const w=E=>{const S=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,xe.b)(O=>{E.component=O}),(0,it.U)(()=>{})));for(const O of E.children)S.push(...w(O));return S};return Fs(w(m.targetSnapshot.root)).pipe(M(),ln(1))}),Zy(()=>this.afterPreactivation()),(0,it.U)(m=>{const w=function Qr(n,e,t){const r=as(n,e._root,t?t._root:void 0);return new yf(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:w}}),(0,xe.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,it.U)(r=>(new zd(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,xe.b)({next(){u=!0},complete(){u=!0}}),ko(()=>{u||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),et(m=>{if(d=!0,_g(m)){_f(m)||(this.navigated=!0,this.restoreHistory(s,!0));const w=new Pd(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(w),_f(m)){const E=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),S={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Jy(s.source)};this.scheduleNavigation(E,"imperative",null,S,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new pf(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(w);try{s.resolve(this.errorHandler(m))}catch(E){s.reject(E)}}return ro.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Gd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,E=s||this.routerState.root,S=w?this.currentUrlTree.fragment:d;let O=null;switch(m){case"merge":O={...this.currentUrlTree.queryParams,...u};break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),W0(E,this.currentUrlTree,t,O,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Lo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function vw(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...dE}:!1===r?{...TA}:r,Lo(t))return Ay(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Ay(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new oo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,E;d?(m=d.resolve,w=d.reject,E=d.promise):E=new Promise((H,Q)=>{m=H,w=Q});const S=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),O=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):O=0,this.setTransition({id:S,targetPageId:O,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(H=>Promise.reject(H))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new Pd(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return yw()},providedIn:"root"}),n})();function Jy(n){return"imperative"!==n}let Jd=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Kr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Tr),f.Y36($s),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class Xy{}let ev=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(I(t=>t instanceof oo),Ce(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,rn.D)(s).pipe((0,Bu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const u=s.pipe((0,D.z)(d=>null===d?rt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,rn.D)([u,d]).pipe((0,Bu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Tr),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Xy),f.LFG(Qy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yl=new f.OlP("");let ww=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ff?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof oo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Er&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Er(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function vl(n,e){return{\u0275kind:n,\u0275providers:e}}function Df(n){return[{provide:Yy,multi:!0,useValue:n}]}function pE(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Tr),s=n.get(tv);1===n.get(nv)&&r.initialNavigation(),n.get(Bo,null,f.XFs.Optional)?.setUpPreloading(),n.get(yl,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const tv=new f.OlP("",{factory:()=>new Kr.x}),nv=new f.OlP("",{providedIn:"root",factory:()=>1});const Bo=new f.OlP("");function yE(n){return vl(0,[{provide:Bo,useExisting:ev},{provide:Xy,useExisting:n}])}const Iw=new f.OlP("ROUTER_FORROOT_GUARD"),_E=[Te,{provide:af,useClass:Td},{provide:Tr,useFactory:yw},y,{provide:$s,useFactory:function Cw(n){return n.routerState.root},deps:[Tr]},Qy];function Ew(){return new f.PXZ("Router",Tr)}let Dw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_E,[],Df(t),{provide:Iw,useFactory:Tw,deps:[[Tr,new f.FiY,new f.tp0]]},{provide:If,useValue:r||{}},r?.useHash?{provide:ye,useClass:tt}:{provide:ye,useClass:Ze},{provide:yl,useFactory:()=>{const n=(0,f.f3M)(Tr),e=(0,f.f3M)(hu),t=(0,f.f3M)(If);return t.scrollOffset&&e.setOffset(t.scrollOffset),new ww(n,e,t)}},r?.preloadingStrategy?yE(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:Ew},r?.initialNavigation?Aw(r):[],[{provide:rv,useFactory:pE},{provide:f.tb,multi:!0,useExisting:rv}]]}}static forChild(t){return{ngModule:n,providers:[Df(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Iw,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[P]}),n})();function Tw(n){return"guarded"}function Aw(n){return["disabled"===n.initialNavigation?vl(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Tr);return()=>{e.setUpLocationChangeListener()}}},{provide:nv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vl(2,[{provide:nv,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(Tr),m=e.get(tv);(function s(u){e.get(Tr).events.pipe(I(m=>m instanceof oo||m instanceof Pd||m instanceof pf),(0,it.U)(m=>m instanceof oo||m instanceof Pd&&(0===m.code||1===m.code)&&null),I(m=>null!==m),ln(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?rt(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const rv=new f.OlP("");var at,ge=k(5861),ja=k(9681),Tf=k(4859),Zu=k(1877),Xt=k(2090),xA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zs={},$a=$a||{},Dt=xA||self;function Xd(){}function eh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Af(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Sw="closure_uid_"+(1e9*Math.random()>>>0),PA=0;function IE(n,e,t){return n.call.apply(n.bind,arguments)}function Mw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function gi(n,e,t){return(gi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?IE:Mw).apply(null,arguments)}function Vg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[s].apply(r,d)}}function Ku(){this.s=this.s,this.o=this.o}var Ug={};Ku.prototype.s=!1,Ku.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function OA(n){return Object.prototype.hasOwnProperty.call(n,Sw)&&n[Sw]||(n[Sw]=++PA)}(this);delete Ug[n]}},Ku.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ow=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Bg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Pw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(eh(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let d=0;d<u;d++)n[s+d]=r[d]}else n.push(r)}}function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ei.prototype.h=function(){this.defaultPrevented=!0};var EE=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",Xd,e),Dt.removeEventListener("test",Xd,e)}catch{}return n}();function jg(n){return/^[\s\xa0]*$/.test(n)}var Nw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $g(n,e){return n<e?-1:n>e?1:0}function Hg(){var n=Dt.navigator;return n&&(n=n.userAgent)?n:""}function us(n){return-1!=Hg().indexOf(n)}function Gg(n){return Gg[" "](n),n}Gg[" "]=Xd;var wl,n,NA=us("Opera"),Yu=us("Trident")||us("MSIE"),Rw=us("Edge"),kw=Rw||Yu,_l=us("Gecko")&&!(-1!=Hg().toLowerCase().indexOf("webkit")&&!us("Edge"))&&!(us("Trident")||us("MSIE"))&&!us("Edge"),Fw=-1!=Hg().toLowerCase().indexOf("webkit")&&!us("Edge");function ov(){var n=Dt.document;return n?n.documentMode:void 0}e:{var ao="",zg=(n=Hg(),_l?/rv:([^\);]+)(\)|;)/.exec(n):Rw?/Edge\/([\d\.]+)/.exec(n):Yu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Fw?/WebKit\/(\S+)/.exec(n):NA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zg&&(ao=zg?zg[1]:""),Yu){var sv=ov();if(null!=sv&&sv>parseFloat(ao)){wl=String(sv);break e}}wl=ao}var av={};var cv=Dt.document&&Yu&&(ov()||parseInt(wl,10))||void 0;function qg(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_l){e:{try{Gg(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Lw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qg.X.h.call(this)}}Kn(qg,ei);var Lw={2:"touch",3:"pen",4:"mouse"};qg.prototype.h=function(){qg.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wg="closure_listenable_"+(1e6*Math.random()|0),Zg=0;function Kg(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++Zg,this.ba=this.ea=!1}function th(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Mf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Yg(n){const e={};for(const t in n)e[t]=n[t];return e}const DE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vw(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<DE.length;u++)t=DE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qg(n){this.src=n,this.g={},this.h=0}function lv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Ow(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(th(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}Qg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=dv(n,e,r,s);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new Kg(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var Jg="closure_lm_"+(1e6*Math.random()|0),Uw={};function Bw(n,e,t,r,s){if(r&&r.once)return hv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Bw(n,e[u],t,r,s);return null}return t=zw(t),n&&n[Wg]?n.N(e,t,Af(r)?!!r.capture:!!r,s):TE(n,e,t,!1,r,s)}function TE(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=Af(s)?!!s.capture:!!s,m=Hw(n);if(m||(n[Jg]=m=new Qg(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function jw(){const e=RA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)EE||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(AE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)hv(n,e[u],t,r,s);return null}return t=zw(t),n&&n[Wg]?n.O(e,t,Af(r)?!!r.capture:!!r,s):TE(n,e,t,!0,r,s)}function $w(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)$w(n,e[u],t,r,s);else r=Af(r)?!!r.capture:!!r,t=zw(t),n&&n[Wg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dv(u=n.g[e],t,r,s))&&(th(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Hw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dv(e,t,r,s)),(t=-1<n?e[n]:null)&&xf(t))}function xf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Wg])lv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(AE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hw(e))?(lv(t,n),0==t.h&&(t.src=null,e[Jg]=null)):th(n)}}}function AE(n){return n in Uw?Uw[n]:Uw[n]="on"+n}function RA(n,e){if(n.ba)n=!0;else{e=new qg(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&xf(n),n=t.call(r,e)}return n}function Hw(n){return(n=n[Jg])instanceof Qg?n:null}var Gw="__closure_events_fn_"+(1e9*Math.random()>>>0);function zw(n){return"function"==typeof n?n:(n[Gw]||(n[Gw]=function(e){return n.handleEvent(e)}),n[Gw])}function Br(){Ku.call(this),this.i=new Qg(this),this.P=this,this.I=null}function ti(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var s=e;Vw(e=new ei(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=fv(d,r,!0,e)&&s}if(s=fv(d=e.g=n,r,!0,e)&&s,s=fv(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=fv(d=e.g=t[u],r,!1,e)&&s}function fv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&lv(n.i,d),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Kn(Br,Ku),Br.prototype[Wg]=!0,Br.prototype.removeEventListener=function(n,e,t,r){$w(this,n,e,t,r)},Br.prototype.M=function(){if(Br.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)th(t[r]);delete n.g[e],n.h--}}this.I=null},Br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qw=Dt.JSON.stringify;function kA(){var n=Ga;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var tm,Xg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new SE,n=>n.reset());class SE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ww(n){Dt.setTimeout(()=>{throw n},0)}function em(n,e){tm||function pv(){var n=Dt.Promise.resolve(void 0);tm=function(){n.then(Zw)}}(),gv||(tm(),gv=!0),Ga.add(n,e)}var gv=!1,Ga=new class Qu{constructor(){this.h=this.g=null}add(e,t){const r=Xg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Zw(){for(var n;n=kA();){try{n.h.call(n.g)}catch(t){Ww(t)}var e=Xg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}gv=!1}function nm(n,e){Br.call(this),this.h=n||1,this.g=e||Dt,this.j=gi(this.kb,this),this.l=Date.now()}function mv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function rm(n,e,t){if("function"==typeof n)t&&(n=gi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function Kw(n){n.g=rm(()=>{n.g=null,n.i&&(n.i=!1,Kw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kn(nm,Br),(at=nm.prototype).ca=!1,at.R=null,at.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ti(this,"tick"),this.ca&&(mv(this),this.start()))}},at.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){nm.X.M.call(this),mv(this),delete this.g};class ME extends Ku{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Kw(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ju(n){Ku.call(this),this.h=n,this.g={}}Kn(Ju,Ku);var Cl=[];function im(n,e,t,r){Array.isArray(t)||(t&&(Cl[0]=t.toString()),t=Cl);for(var s=0;s<t.length;s++){var u=Bw(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function bl(n){Mf(n.g,function(e,t){this.g.hasOwnProperty(t)&&xf(e)},n),n.g={}}function nh(){this.g=!0}function Il(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return qw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ju.prototype.M=function(){Ju.X.M.call(this),bl(this)},Ju.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nh.prototype.Aa=function(){this.g=!1},nh.prototype.info=function(){};var Xu={},sm=null;function am(){return sm=sm||new Br}function xE(n){ei.call(this,Xu.Oa,n)}function Of(n){const e=am();ti(e,new xE(e,n))}function _v(n,e){ei.call(this,Xu.STAT_EVENT,n),this.stat=e}function mi(n){const e=am();ti(e,new _v(e,n))}function wv(n,e){ei.call(this,Xu.Pa,n),this.size=e}function rh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}Xu.Oa="serverreachability",Kn(xE,ei),Xu.STAT_EVENT="statevent",Kn(_v,ei),Xu.Pa="timingevent",Kn(wv,ei);var um={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},Li={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cm(){}function OE(){}cm.prototype.h=null;var Cv,Pf={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function Nf(){ei.call(this,"d")}function lm(){ei.call(this,"c")}function dm(){}function Rf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ju(this),this.O=PE,this.T=new nm(n=kw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new bv}function bv(){this.i=null,this.g="",this.h=!1}Kn(Nf,ei),Kn(lm,ei),Kn(dm,cm),dm.prototype.g=function(){return new XMLHttpRequest},dm.prototype.i=function(){return{}},Cv=new dm;var PE=45e3,hm={},fm={};function Iv(n,e,t){n.K=1,n.v=kf(cs(e)),n.s=t,n.P=!0,Ev(n,null)}function Ev(n,e){n.F=Date.now(),El(n),n.A=cs(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),rC(t.i,"t",r),n.C=0,t=n.l.H,n.h=new bv,n.g=Pm(n.l,t?e:null,!n.s),0<n.N&&(n.L=new ME(gi(n.Ka,n,n.g),n.N)),im(n.S,n.g,"readystatechange",n.hb),e=n.H?Yg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Of(1),function om(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var E=m[w].split("=");if(1<E.length){var S=E[0];E=E[1];var O=S.split("_");d=2<=O.length&&"type"==O[1]?d+(S+"=")+E+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Dv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Jw(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=qs(n,t),s==fm){4==e&&(n.o=4,mi(14),r=!1),Il(n.j,n.m,null,"[Incomplete Response]");break}if(s==hm){n.o=4,mi(15),Il(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Il(n.j,n.m,s,null),Tv(n,s)}Dv(n)&&s!=fm&&s!=hm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,mi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Mm(e),e.K=!0,mi(11))):(Il(n.j,n.m,t,"[Invalid Chunked Response]"),ec(n),gm(n))}function qs(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?fm:(t=Number(e.substring(t,r)),isNaN(t)?hm:(r+=1)+t>e.length?fm:(e=e.substr(r,t),n.C=r+t,e))}function El(n){n.V=Date.now()+n.O,Xw(n,n.O)}function Xw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=rh(gi(n.fb,n),e)}function pm(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function gm(n){0==n.l.G||n.I||cC(n.l,n)}function ec(n){pm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mv(n.T),bl(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Tv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Mv(t.h,n)))if(!n.J&&Mv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;xm(t),Wa(t)}Sm(t),mi(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=rh(gi(t.bb,t),6e3));if(1>=sC(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else xl(t,11)}else if((n.J||t.g==n)&&xm(t),!jg(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let E=s[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const S=E[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const O=E[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const H=E[5];null!=H&&"number"==typeof H&&0<H&&(t.J=r=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const ae=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.h;u.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Cm(u,u.h),u.h=null))}if(r.D){const Oe=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.za=Oe,Ln(r.F,r.D,Oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=Om(r,r.H?r.ka:null,r.V),d.J){bm(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(pm(m),El(m)),r.g=d}else Pv(r);0<t.i.length&&$f(t)}else"stop"!=E[0]&&"close"!=E[0]||xl(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?xl(t,7):ic(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}Of(4)}catch{}}function mm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(eh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function RE(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(eh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function NE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(eh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(at=Rf.prototype).setTimeout=function(n){this.O=n},at.hb=function(n){n=n.target;const e=this.L;e&&3==Vi(n)?e.l():this.Ka(n)},at.Ka=function(n){try{if(n==this.g)e:{const S=Vi(this.g);var e=this.g.Ea();const O=this.g.aa();if(!(3>S)&&(3!=S||kw||this.g&&(this.h.h||this.g.fa()||Tl(this.g)))){this.I||4!=S||7==e||Of(8==e||0>=O?3:2),pm(this);var t=this.g.aa();this.Y=t;t:if(Dv(this)){var r=Tl(this.g);n="";var s=r.length,u=4==Vi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ec(this),gm(this);var d="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Yw(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jg(m)){var E=m;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,mi(12),ec(this),gm(this);break e}Il(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tv(this,t)}this.P?(Jw(this,S,d),kw&&this.i&&3==S&&(im(this.S,this.T,"tick",this.gb),this.T.start())):(Il(this.j,this.m,d,null),Tv(this,d)),4==S&&ec(this),this.i&&!this.I&&(4==S?cC(this.l,this):(this.i=!1,El(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,mi(12)):(this.o=0,mi(13)),ec(this),gm(this)}}}catch{}},at.gb=function(){if(this.g){var n=Vi(this.g),e=this.g.fa();this.C<e.length&&(pm(this),Jw(this,n,e),this.i&&4!=n&&El(this))}},at.cancel=function(){this.I=!0,ec(this)},at.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function yv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Of(3),mi(17)),ec(this),this.o=2,gm(this)):Xw(this,this.V-n)};var eC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ws(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ws){this.h=void 0!==e?e:n.h,Dl(this,n.j),this.s=n.s,this.g=n.g,Av(this,n.m),this.l=n.l,e=n.i;var t=new Lf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ym(this,t),this.o=n.o}else n&&(t=String(n).match(eC))?(this.h=!!e,Dl(this,t[1]||"",!0),this.s=ih(t[2]||""),this.g=ih(t[3]||"",!0),Av(this,t[4]),this.l=ih(t[5]||"",!0),ym(this,t[6]||"",!0),this.o=ih(t[7]||"")):(this.h=!!e,this.i=new Lf(null,this.h))}function cs(n){return new Ws(n)}function Dl(n,e,t){n.j=t?ih(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Av(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ym(n,e,t){e instanceof Lf?(n.i=e,function FE(n,e){e&&!n.j&&(Zs(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Sv(this,r),rC(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=oh(e,wm)),n.i=new Lf(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function kf(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ih(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function oh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ws.prototype.toString=function(){var n=[],e=this.j;e&&n.push(oh(e,vm,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(oh(e,vm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(oh(t,"/"==t.charAt(0)?_m:za,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",oh(t,Ff)),n.join("")};var vm=/[#\/\?@]/g,za=/[#\?:]/g,_m=/[#\?]/g,wm=/[#\?@]/g,Ff=/#/g;function Lf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Zs(n){n.g||(n.g=new Map,n.h=0,n.i&&function kE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Sv(n,e){Zs(n),e=Ks(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function nC(n,e){return Zs(n),e=Ks(n,e),n.g.has(e)}function rC(n,e,t){Sv(n,e),0<t.length&&(n.i=null,n.g.set(Ks(n,e),Bg(t)),n.h+=t.length)}function Ks(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function iC(n){this.l=n||LA,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ga&&Dt.g.Ga()&&Dt.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=Lf.prototype).add=function(n,e){Zs(this),this.i=null,n=Ks(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Zs(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},at.oa=function(){Zs(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},at.W=function(n){Zs(this);let e=[];if("string"==typeof n)nC(this,n)&&(e=e.concat(this.g.get(Ks(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return Zs(this),this.i=null,nC(this,n=Ks(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var s=u;""!==d[r]&&(s+="="+encodeURIComponent(String(d[r]))),n.push(s)}}return this.i=n.join("&")};var LA=10;function oC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sC(n){return n.h?1:n.g?n.g.size:0}function Mv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Cm(n,e){n.g?n.g.add(e):n.h=e}function bm(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function aC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Bg(n.i)}function Vf(){}function LE(){this.g=new Vf}function VE(n,e,t){const r=t||"";try{mm(n,function(s,u){let d=s;Af(s)&&(d=qw(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Im(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Uf(n){this.l=n.$b||null,this.j=n.ib||!1}function Em(n,e){Br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=sh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iC.prototype.cancel=function(){if(this.i=aC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vf.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},Vf.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},Kn(Uf,cm),Uf.prototype.g=function(){return new Em(this.l,this.j)},Uf.prototype.i=function(n){return function(){return n}}({}),Kn(Em,Br);var sh=0;function tc(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function Dm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qa(n)}function qa(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=Em.prototype).open=function(n,e){if(this.readyState!=sh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qa(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dm(this)),this.readyState=sh},at.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof Dt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tc(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},at.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Dm(this):qa(this),3==this.readyState&&tc(this)}},at.Ua=function(n){this.g&&(this.response=this.responseText=n,Dm(this))},at.Ta=function(n){this.g&&(this.response=n,Dm(this))},at.ga=function(){this.g&&Dm(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Em.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var BE=Dt.JSON.parse;function ur(n){Br.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tm,this.K=this.L=!1}Kn(ur,Br);var Tm="",jE=/^https?$/i,Ys=["POST","PUT"];function jr(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,nc(n),yi(n)}function nc(n){n.D||(n.D=!0,ti(n,"complete"),ti(n,"error"))}function jf(n){if(n.h&&typeof $a<"u"&&(!n.C[1]||4!=Vi(n)||2!=n.aa()))if(n.v&&4==Vi(n))rm(n.Ha,0,n);else if(ti(n,"readystatechange"),4==Vi(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(eC)[1]||null;if(!s&&Dt.self&&Dt.self.location){var u=Dt.self.location.protocol;s=u.substr(0,u.length-1)}r=!jE.test(s?s.toLowerCase():"")}t=r}if(t)ti(n,"complete"),ti(n,"success");else{n.m=6;try{var d=2<Vi(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",nc(n)}}finally{yi(n)}}}function yi(n,e){if(n.g){Am(n);const t=n.g,r=n.C[0]?Xd:null;n.g=null,n.C=null,e||ti(n,"ready");try{t.onreadystatechange=r}catch{}}}function Am(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function Vi(n){return n.g?n.g.readyState:0}function Tl(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Tm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Al(n){let e="";return Mf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function rc(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Al(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function Qs(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Sl(n){this.Ca=0,this.i=[],this.j=new nh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Qs("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Qs("baseRetryDelayMs",5e3,n),this.ab=Qs("retryDelaySeedMs",1e4,n),this.Za=Qs("forwardChannelMaxRetries",2,n),this.ta=Qs("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new iC(n&&n.concurrentRequestLimit),this.Fa=new LE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ic(n){if(Ml(n),3==n.G){var e=n.U++,t=cs(n.F);Ln(t,"SID",n.I),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),ah(n,t),(e=new Rf(n,n.j,e,void 0)).K=2,e.v=kf(cs(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Pm(e.l,null),e.g.da(e.v)),e.F=Date.now(),El(e)}kv(n)}function Wa(n){n.g&&(Mm(n),n.g.cancel(),n.g=null)}function Ml(n){Wa(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),xm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function $f(n){oC(n.h)||n.m||(n.m=!0,em(n.Ja,n),n.C=0)}function xv(n,e){var t;t=e?e.m:n.U++;const r=cs(n.F);Ln(r,"SID",n.I),Ln(r,"RID",t),Ln(r,"AID",n.T),ah(n,r),n.o&&n.s&&rc(r,n.o,n.s),t=new Rf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Ov(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Cm(n.h,t),Iv(t,r,e)}function ah(n,e){n.ia&&Mf(n.ia,function(t,r){Ln(e,r,t)}),n.l&&mm({},function(t,r){Ln(e,r,t)})}function Ov(n,e,t){t=Math.min(n.i.length,t);var r=n.l?gi(n.l.Qa,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let E=s[w].h;const S=s[w].g;if(E-=u,0>E)u=Math.max(0,s[w].h-100),m=!1;else try{VE(S,d,"req"+E+"_")}catch{r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Pv(n){n.g||n.u||(n.Z=1,em(n.Ia,n),n.A=0)}function Sm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=rh(gi(n.Ia,n),Rv(n,n.A)),n.A++,0))}function Mm(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function Nv(n){n.g=new Rf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=cs(n.sa);Ln(e,"RID","rpc"),Ln(e,"SID",n.I),Ln(e,"CI",n.L?"0":"1"),Ln(e,"AID",n.T),Ln(e,"TYPE","xmlhttp"),ah(n,e),n.o&&n.s&&rc(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=kf(cs(e)),t.s=null,t.P=!0,Ev(t,n)}function xm(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function cC(n,e){var t=null;if(n.g==e){xm(n),Mm(n),n.g=null;var r=2}else{if(!Mv(n.h,e))return;t=e.D,bm(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ti(r=am(),new wv(r,t,e,s)),$f(n)}else Pv(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function uC(n,e){return!(sC(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=rh(gi(n.Ja,n,e),Rv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Sm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:xl(n,5);break;case 4:xl(n,10);break;case 3:xl(n,6);break;default:xl(n,2)}}function Rv(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function xl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=gi(n.jb,n);t||(t=new Ws("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||Dl(t,"https"),kf(t)),function UE(n,e){const t=new nh;if(Dt.Image){const r=new Image;r.onload=Vg(Im,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Vg(Im,t,r,"TestLoadImage: error",!1,e),r.onabort=Vg(Im,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vg(Im,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mi(2);n.G=0,n.l&&n.l.va(e),kv(n),Ml(n)}function kv(n){if(n.G=0,n.la=[],n.l){const e=aC(n.h);(0!=e.length||0!=n.i.length)&&(Pw(n.la,e),Pw(n.la,n.i),n.h.i.length=0,Bg(n.i),n.i.length=0),n.l.ua()}}function Om(n,e,t){var r=t instanceof Ws?cs(t):new Ws(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Av(r,r.m);else{var s=Dt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ws(null,void 0);r&&Dl(u,r),e&&(u.g=e),s&&Av(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Ln(r,t,e),Ln(r,"VER",n.ma),ah(n,r),r}function Pm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Da&&!n.ra?new Uf({ib:!0}):n.ra)).L=n.H,e}function lC(){}function Ol(){if(Yu&&!(10<=Number(cv)))throw Error("Environmental error: no available transport.")}function ni(n,e){Br.call(this),this.g=new Sl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!jg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new oc(this)}function Nm(n){Nf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dC(){lm.call(this),this.status=1}function oc(n){this.g=n}(at=ur.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cv.g(),this.C=function Qw(n){return n.h||(n.h=n.i())}(this.u?this.u:Cv),this.g.onreadystatechange=gi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void jr(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Dt.FormData&&n instanceof Dt.FormData,!(0<=Ow(Ys,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Am(this),0<this.B&&((this.K=function Bf(n){return Yu&&function Ha(){return function iv(n){var e=av;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Nw(String(wl)).split("."),t=Nw("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=$g(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||$g(0==s[2].length,0==u[2].length)||$g(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gi(this.qa,this)):this.A=rm(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){jr(this,u)}},at.qa=function(){typeof $a<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ti(this,"complete"),ti(this,"abort"),yi(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yi(this,!0)),ur.X.M.call(this)},at.Ha=function(){this.s||(this.F||this.v||this.l?jf(this):this.eb())},at.eb=function(){jf(this)},at.aa=function(){try{return 2<Vi(this)?this.g.status:-1}catch{return-1}},at.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),BE(e)}},at.Ea=function(){return this.m},at.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=Sl.prototype).ma=8,at.G=1,at.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Rf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Yg(u),Vw(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ov(this,s,e),Ln(t=cs(this.F),"RID",n),Ln(t,"CVER",22),this.D&&Ln(t,"X-HTTP-Session-Id",this.D),ah(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Al(u)))+"&"+e:this.o&&rc(t,this.o,u)),Cm(this.h,s),this.Xa&&Ln(t,"TYPE","init"),this.O?(Ln(t,"$req",e),Ln(t,"SID","null"),s.Z=!0,Iv(s,t,null)):Iv(s,t,e),this.G=2}}else 3==this.G&&(n?xv(this,n):0==this.i.length||oC(this.h)||xv(this))},at.Ia=function(){if(this.u=null,Nv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=rh(gi(this.cb,this),n)}},at.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,mi(10),Wa(this),Nv(this))},at.bb=function(){null!=this.v&&(this.v=null,Wa(this),Sm(this),mi(19))},at.jb=function(n){n?(this.j.info("Successfully pinged google.com"),mi(2)):(this.j.info("Failed to ping google.com"),mi(1))},(at=lC.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Qa=function(){},Ol.prototype.g=function(n,e){return new ni(n,e)},Kn(ni,Br),ni.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;mi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Om(n,null,n.V),$f(n)},ni.prototype.close=function(){ic(this.g)},ni.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qw(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&$f(e)},ni.prototype.M=function(){this.g.l=null,delete this.j,ic(this.g),delete this.g,ni.X.M.call(this)},Kn(Nm,Nf),Kn(dC,lm),Kn(oc,lC),oc.prototype.xa=function(){ti(this.g,"a")},oc.prototype.wa=function(n){ti(this.g,new Nm(n))},oc.prototype.va=function(n){ti(this.g,new dC(n))},oc.prototype.ua=function(){ti(this.g,"b")},Ol.prototype.createWebChannel=Ol.prototype.g,ni.prototype.send=ni.prototype.u,ni.prototype.open=ni.prototype.m,ni.prototype.close=ni.prototype.close,um.NO_ERROR=0,um.TIMEOUT=8,um.HTTP_ERROR=6,Li.COMPLETE="complete",OE.EventType=Pf,Pf.OPEN="a",Pf.CLOSE="b",Pf.ERROR="c",Pf.MESSAGE="d",Br.prototype.listen=Br.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.Na,ur.prototype.getLastErrorCode=ur.prototype.Ea,ur.prototype.getStatus=ur.prototype.aa,ur.prototype.getResponseJson=ur.prototype.Ra,ur.prototype.getResponseText=ur.prototype.fa,ur.prototype.send=ur.prototype.da;var Fv=zs.createWebChannelTransport=function(){return new Ol},hC=zs.getStatEventTarget=function(){return am()},Rm=zs.ErrorCode=um,Lv=zs.EventType=Li,fC=zs.Event=Xu,Vv=zs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Uv=zs.FetchXmlHttpFactory=Uf,Hf=zs.WebChannel=OE,$E=zs.XhrIo=ur;const Bv="@firebase/firestore";class fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");let Pl="9.10.0";const Za=new Zu.Yd("@firebase/firestore");function jv(){return Za.logLevel}function Ne(n,...e){if(Za.logLevel<=Zu.in.DEBUG){const t=e.map(km);Za.debug(`Firestore (${Pl}): ${n}`,...t)}}function Vn(n,...e){if(Za.logLevel<=Zu.in.ERROR){const t=e.map(km);Za.error(`Firestore (${Pl}): ${n}`,...t)}}function Ka(n,...e){if(Za.logLevel<=Zu.in.WARN){const t=e.map(km);Za.warn(`Firestore (${Pl}): ${n}`,...t)}}function km(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: `+n;throw Vn(e),new Error(e)}function bt(n,e){n||Je()}function qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class GE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class qE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gC{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let d=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new pr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const E=d;e.enqueueRetryable((0,ge.Z)(function*(){yield E.promise,yield u(r.currentUser)}))},w=E=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(E=>w(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?w(E):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new pr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new GE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new fr(e)}}class WE{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(bt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class gr{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new WE(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZE{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.A=t.token,new $v(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class yC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=mC(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Et(n,e){return n<e?-1:n>e?1:0}function Nl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Rl(n){return n+"\0"}class xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new xn(0,0))}static max(){return new vt(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===uh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends uh{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const vC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends uh{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return vC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Me(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Me(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(d=!d,s++):"."!==m||d?(r+=m,s++):(u(),s++)}if(u(),d)throw new Me(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Wt.fromString(e))}static fromName(e){return new Ge(Wt.fromString(e).popFirst(5))}static empty(){return new Ge(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Wt(e.slice()))}}class ch{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function jo(n){return n.fields.find(e=>2===e.kind)}function kl(n){return n.fields.filter(e=>2!==e.kind)}ch.UNKNOWN_ID=-1;class uo{constructor(e,t){this.fieldPath=e,this.kind=t}}class vi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vi(0,co.min())}}function Hv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=vt.fromTimestamp(1e9===r?new xn(t+1,0):new xn(t,r));return new co(s,Ge.empty(),e)}function Gv(n){return new co(n.readTime,n.key,-1)}class co{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new co(vt.min(),Ge.empty(),-1)}static max(){return new co(vt.max(),Ge.empty(),-1)}}function zv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Et(n.largestBatchId,e.largestBatchId))}const _C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Js(n){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,ge.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==_C)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),Fl.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let s=0,u=0,d=!1;e.forEach(m=>{++s,m.next(()=>{++u,d&&u===s&&t()},w=>r(w))}),d=!0,u===s&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(s=>s?oe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,s)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const E=w;t(e[E]).next(S=>{d[E]=S,++m,m===u&&r(d)},S=>s(S))}})}static doWhile(e,t){return new oe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Gf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new pr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new lh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=zf(r.target.error);this.P.reject(new lh(e,s))}}static open(e,t,r,s){try{return new Gf(t,e.transaction(s,r))}catch(u){throw new lh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YE(t)}}class ds{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ds.D((0,Xt.z$)())&&Vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),sc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Xt.hl)())return!1;if(ds.N())return!0;const e=(0,Xt.z$)(),t=ds.D(e),r=0<t&&t<10,s=ds.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new lh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;s("VersionError"===m.name?new Me(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new lh(e,m))},u.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ge.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Gf.open(u.db,e,d?"readonly":"readwrite",r),E=s(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),oe.reject(S))).toPromise();return E.catch(()=>{}),yield w.v,E}catch(w){const E=w,S="FirebaseError"!==E.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",E.message,"Retrying:",S),u.close(),!S)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class CC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return sc(this.U.delete())}}class lh extends Me{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hs(n){return"IndexedDbTransactionError"===n.name}class YE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sc(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),sc(this.store.add(e))}get(e){return sc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),sc(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),sc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(d,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new oe((u,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new oe((r,s)=>{t.onerror=u=>{const d=zf(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new oe((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void s();const w=new CC(m),E=t(m.primaryKey,m.value,w);if(E instanceof oe){const S=E.catch(O=>(w.done(),oe.reject(O)));r.push(S)}w.isDone?s():null===w.G?m.continue():m.continue(w.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sc(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=zf(r.target.error);t(s)}})}let qv=!1;function zf(n){const e=ds.D((0,Xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qv||(qv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Wv{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){hs(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Js(r)}yield t.nt(6e4)}))}}class Zv{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return oe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ne("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,s).next(m=>{s-=m,r.add(d)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(s,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const d=Gv(u);zv(d,r)>0&&(r=d)}),new co(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class _i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Kv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ac(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}_i.at=-1;class Un{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new Un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qf(this.root,e,this.comparator,!0)}}class qf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Ar.RED,this.left=s??Ar.EMPTY,this.right=u??Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Ar(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ar.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1,Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Ar(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bC(this.data.getIterator())}getIteratorFrom(e){return new bC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class bC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dh(n){return n.hasNext()?n.getNext():void 0}class lo{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new lo([])}unionWith(e){let t=new dn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new lo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const JE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(n){if(bt(!!n),"string"==typeof n){let e=0;const t=JE.exec(n);if(bt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ll(n){return"string"==typeof n?mr.fromBase64String(n):mr.fromUint8Array(n)}function Qv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IC(n){const e=n.mapValue.fields.__previous_value__;return Qv(e)?IC(e):e}function Wf(n){const e=uc(n.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}class XE{constructor(e,t,r,s,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class cc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}function Zf(n){return null==n}function Kf(n){return 0===n&&1/n==-1/0}function EC(n){return"number"==typeof n&&Number.isInteger(n)&&!Kf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yf={nullValue:"NULL_VALUE"};function lc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qv(n)?4:Um(n)?9007199254740991:10:Je()}function fs(n,e){if(n===e)return!0;const t=lc(n);if(t!==lc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wf(n).isEqual(Wf(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=uc(r.timestampValue),d=uc(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ll(n.bytesValue).isEqual(Ll(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Yn(r.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Yn(r.integerValue)===Yn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Yn(r.doubleValue),d=Yn(s.doubleValue);return u===d?Kf(u)===Kf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Nl(n.arrayValue.values||[],e.arrayValue.values||[],fs);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(Kv(u)!==Kv(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!fs(u[m],d[m])))return!1;return!0}(n,e);default:return Je()}var s}function hh(n,e){return void 0!==(n.values||[]).find(t=>fs(t,e))}function Qa(n,e){if(n===e)return 0;const t=lc(n),r=lc(e);if(t!==r)return Et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=Yn(s.integerValue||s.doubleValue),m=Yn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Jv(n.timestampValue,e.timestampValue);case 4:return Jv(Wf(n),Wf(e));case 5:return Et(n.stringValue,e.stringValue);case 6:return function(s,u){const d=Ll(s),m=Ll(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const E=Et(d[w],m[w]);if(0!==E)return E}return Et(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Et(Yn(s.latitude),Yn(u.latitude));return 0!==d?d:Et(Yn(s.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const E=Qa(d[w],m[w]);if(E)return E}return Et(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Ya.mapValue&&u===Ya.mapValue)return 0;if(s===Ya.mapValue)return 1;if(u===Ya.mapValue)return-1;const d=s.fields||{},m=Object.keys(d),w=u.fields||{},E=Object.keys(w);m.sort(),E.sort();for(let S=0;S<m.length&&S<E.length;++S){const O=Et(m[S],E[S]);if(0!==O)return O;const H=Qa(d[m[S]],w[E[S]]);if(0!==H)return H}return Et(m.length,E.length)}(n.mapValue,e.mapValue);default:throw Je()}}function Jv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Et(n,e);const t=uc(n),r=uc(e),s=Et(t.seconds,r.seconds);return 0!==s?s:Et(t.nanos,r.nanos)}function Vl(n){return Fm(n)}function Fm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=uc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ll(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=Fm(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of s)d?d=!1:u+=",",u+=`${m}:${Fm(r.fields[m])}`;return u+"}"}(n.mapValue):Je();var e}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lm(n){return!!n&&"integerValue"in n}function ps(n){return!!n&&"arrayValue"in n}function DC(n){return!!n&&"nullValue"in n}function TC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ja(n){return!!n&&"mapValue"in n}function Vm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ac(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Um(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UA(n){return"nullValue"in n?Yf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dc(cc.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Je()}function AC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dc(cc.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ya:Je()}function Xv(n,e){const t=Qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eD(n,e){const t=Qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ye{constructor(e){this.value=e}static empty(){return new Ye({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ja(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vm(t)}setAll(e){let t=rr.emptyPath(),r={},s=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}d?r[m.lastSegment()]=Vm(d):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Ja(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ac(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Ye(Vm(this.value))}}function SC(n){const e=[];return ac(n.fields,(t,r)=>{const s=new rr([t]);if(Ja(r)){const u=SC(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new lo(e)}class yn{constructor(e,t,r,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new yn(e,0,vt.min(),vt.min(),Ye.empty(),0)}static newFoundDocument(e,t,r){return new yn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new yn(e,2,t,vt.min(),Ye.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,vt.min(),Ye.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ye.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ye.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tD{constructor(e,t=null,r=[],s=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function Ul(n,e=null,t=[],r=[],s=null,u=null,d=null){return new tD(n,e,t,r,s,u,d)}function Bl(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Vl(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vl(r)).join(",")),e.ht=t}return e.ht}function hc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!oD(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!fs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!i_(n.startAt,e.startAt)&&i_(n.endAt,e.endAt)}function bn(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function e_(n,e){return n.filters.filter(t=>t instanceof $r&&t.field.isEqual(e))}function t_(n,e,t){let r=Yf,s=!0;for(const u of e_(n,e)){let d=Yf,m=!0;switch(u.op){case"<":case"<=":d=UA(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Yf}Xv({value:r,inclusive:s},{value:d,inclusive:m})<0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Xv({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function n_(n,e,t){let r=Ya,s=!0;for(const u of e_(n,e)){let d=Ya,m=!0;switch(u.op){case">=":case">":d=AC(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Ya}eD({value:r,inclusive:s},{value:d,inclusive:m})>0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];eD({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class $r extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new MC(e,t,r):"array-contains"===t?new nD(e,r):"in"===t?new rD(e,r):"not-in"===t?new iD(e,r):"array-contains-any"===t?new Qf(e,r):new $r(e,t,r)}static lt(e,t,r){return"in"===t?new xC(e,r):new OC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Qa(t,this.value)):null!==t&&lc(this.value)===lc(t)&&this.ft(Qa(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class MC extends $r{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class xC extends $r{constructor(e,t){super(e,"in",t),this.keys=r_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OC extends $r{constructor(e,t){super(e,"not-in",t),this.keys=r_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function r_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class nD extends $r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ps(t)&&hh(t.arrayValue,this.value)}}class rD extends $r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hh(this.value.arrayValue,t)}}class iD extends $r{constructor(e,t){super(e,"not-in",t)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hh(this.value.arrayValue,t)}}class Qf extends $r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ps(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hh(this.value.arrayValue,r))}}class fc{constructor(e,t){this.position=e,this.inclusive=t}}class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function oD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Jf(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):Qa(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function i_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fs(n.position[t],e.position[t]))return!1;return!0}class Xs{constructor(e,t=null,r=[],s=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function o_(n,e,t,r,s,u,d,m){return new Xs(n,e,t,r,s,u,d,m)}function ph(n){return new Xs(n)}function gh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function jl(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function s_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function a_(n){return null!==n.collectionGroup}function mh(n){const e=qe(n);if(null===e._t){e._t=[];const t=s_(e),r=jl(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new fh(t)),e._t.push(new fh(rr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new fh(rr.keyField(),u))}}}return e._t}function wi(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=Ul(e.path,e.collectionGroup,mh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of mh(e))t.push(new fh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new fc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new fc(e.startAt.position,e.startAt.inclusive):null;e.wt=Ul(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function Xf(n,e,t){return new Xs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yh(n,e){return hc(wi(n),wi(e))&&n.limitType===e.limitType}function PC(n){return`${Bl(wi(n))}|lt:${n.limitType}`}function jm(n){return`Query(target=${function Bm(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Vl(r.value)}`;var r}).join(", ")}]`),Zf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Vl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Vl(t)).join(",")),`Target(${e})`}(wi(n))}; limitType=${n.limitType})`}function u_(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const m=Jf(s,u,d);return s.inclusive?m<=0:m<0}(t.startAt,mh(t),r)||t.endAt&&!function(s,u,d){const m=Jf(s,u,d);return s.inclusive?m>=0:m>0}(t.endAt,mh(t),r)));var t,r}function NC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sD(n){return(e,t)=>{let r=!1;for(const s of mh(n)){const u=BA(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function BA(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,d){const m=u.data.field(s),w=d.data.field(s);return null!==m&&null!==w?Qa(m,w):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function aD(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kf(e)?"-0":e}}function uD(n){return{integerValue:""+n}}function c_(n,e){return EC(e)?uD(e):aD(n,e)}class $l{constructor(){this._=void 0}}function cD(n,e,t){return n instanceof ea?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Hl?RC(n,e):n instanceof Gl?kC(n,e):function(r,s){const u=l_(r,s),d=d_(u)+d_(r.yt);return Lm(u)&&Lm(r.yt)?uD(d):aD(r.It,d)}(n,e)}function lD(n,e,t){return n instanceof Hl?RC(n,e):n instanceof Gl?kC(n,e):t}function l_(n,e){return n instanceof vh?Lm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ea extends $l{}class Hl extends $l{constructor(e){super(),this.elements=e}}function RC(n,e){const t=FC(e);for(const r of n.elements)t.some(s=>fs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Gl extends $l{constructor(e){super(),this.elements=e}}function kC(n,e){let t=FC(e);for(const r of n.elements)t=t.filter(s=>!fs(s,r));return{arrayValue:{values:t}}}class vh extends $l{constructor(e,t){super(),this.It=e,this.yt=t}}function d_(n){return Yn(n.integerValue||n.doubleValue)}function FC(n){return ps(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ep{constructor(e,t){this.field=e,this.transform=t}}class dD{constructor(e,t){this.version=e,this.transformResults=t}}class In{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $m(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class np{}function LC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new pc(n.key,In.none()):new zl(n.key,n.data,In.none());{const t=n.data,r=Ye.empty();let s=new dn(rr.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new ta(n.key,r,new lo(s.toArray()),In.none())}}function VC(n,e,t){n instanceof zl?function(r,s,u){const d=r.value.clone(),m=jC(r.fieldTransforms,s,u.transformResults);d.setAll(m),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ta?function(r,s,u){if(!$m(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=jC(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(BC(r)),m.setAll(d),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rp(n,e,t,r){return n instanceof zl?function(s,u,d,m){if(!$m(s.precondition,u))return d;const w=s.value.clone(),E=$C(s.fieldTransforms,m,u);return w.setAll(E),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof ta?function(s,u,d,m){if(!$m(s.precondition,u))return d;const w=$C(s.fieldTransforms,m,u),E=u.data;return E.setAll(BC(s)),E.setAll(w),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,$m(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function h_(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=l_(r.transform,s||null);null!=u&&(null===t&&(t=Ye.empty()),t.set(r.field,u))}return t||null}function UC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nl(t,r,(s,u)=>function tp(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Hl&&r instanceof Hl||t instanceof Gl&&r instanceof Gl?Nl(t.elements,r.elements,fs):t instanceof vh&&r instanceof vh?fs(t.yt,r.yt):t instanceof ea&&r instanceof ea);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class zl extends np{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ta extends np{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function BC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jC(n,e,t){const r=new Map;bt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,m=e.data.field(u.field);r.set(u.field,lD(d,m,t[s]))}return r}function $C(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,cD(u,d,e))}return r}class pc extends np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f_ extends np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HC{constructor(e){this.count=e}}var cr,Zt;function GC(n){switch(n){default:return Je();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function zC(n){if(void 0===n)return Vn("GRPC error has no .code"),le.UNKNOWN;switch(n){case cr.OK:return le.OK;case cr.CANCELLED:return le.CANCELLED;case cr.UNKNOWN:return le.UNKNOWN;case cr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case cr.INTERNAL:return le.INTERNAL;case cr.UNAVAILABLE:return le.UNAVAILABLE;case cr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case cr.NOT_FOUND:return le.NOT_FOUND;case cr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case cr.ABORTED:return le.ABORTED;case cr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case cr.DATA_LOSS:return le.DATA_LOSS;default:return Je()}}(Zt=cr||(cr={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class gc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ac(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Yv(this.inner)}size(){return this.innerSize}}const hD=new Un(Ge.comparator);function Ui(){return hD}const qC=new Un(Ge.comparator);function _h(...n){let e=qC;for(const t of n)e=e.insert(t.key,t);return e}function p_(n){let e=qC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function na(){return wh()}function WC(){return wh()}function wh(){return new gc(n=>n.toString(),(n,e)=>n.isEqual(e))}const fD=new Un(Ge.comparator),pD=new dn(Ge.comparator);function Nt(...n){let e=pD;for(const t of n)e=e.add(t);return e}const g_=new dn(Et);function Ch(){return g_}class bh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t)),new bh(vt.min(),r,Ch(),Ui(),Nt())}}class ql{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ql(mr.EMPTY_BYTE_STRING,t,Nt(),Nt(),Nt())}}class Hm{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class ZC{constructor(e,t){this.targetId=e,this.At=t}}class Gm{constructor(e,t,r=mr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class KC{constructor(){this.Rt=0,this.bt=m_(),this.Pt=mr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Nt(),t=Nt(),r=Nt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Je()}}),new ql(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=m_()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class YC{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ui(),this.qt=Wl(),this.Kt=new dn(Et)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(bn(u))if(0===r){const d=new Ge(u.path);this.jt(t,d,yn.newNoDocument(d,vt.min()))}else bt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&bn(m.target)){const w=new Ge(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,yn.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Nt();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const E=this.Xt(w);return!E||2===E.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const s=new bh(e,t,this.Kt,this.Ut,r);return this.Ut=Ui(),this.qt=Wl(),this.Kt=new dn(Et),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new KC,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new dn(Et),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new KC),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Wl(){return new Un(Ge.comparator)}function m_(){return new Un(Ge.comparator)}const gD={asc:"ASCENDING",desc:"DESCENDING"},jA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class QC{constructor(e,t){this.databaseId=e,this.gt=t}}function Zl(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JC(n,e){return n.gt?e.toBase64():e.toUint8Array()}function y_(n,e){return Zl(n,e.toTimestamp())}function Sr(n){return bt(!!n),vt.fromTimestamp(function(e){const t=uc(e);return new xn(t.seconds,t.nanos)}(n))}function zm(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qm(n){const e=Wt.fromString(n);return bt(ib(e)),e}function Ih(n,e){return zm(n.databaseId,e.path)}function gs(n,e){const t=qm(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(XC(t))}function Wm(n,e){return zm(n.databaseId,e)}function v_(n){const e=qm(n);return 4===e.length?Wt.emptyPath():XC(e)}function ip(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XC(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function eb(n,e,t){return{name:Ih(n,e),fields:t.value.mapValue.fields}}function tb(n,e,t){const r=gs(n,e.name),s=Sr(e.updateTime),u=new Ye({mapValue:{fields:e.fields}}),d=yn.newFoundDocument(r,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Eh(n,e){let t;if(e instanceof zl)t={update:eb(n,e.key,e.value)};else if(e instanceof pc)t={delete:Ih(n,e.key)};else if(e instanceof ta)t={update:eb(n,e.key,e.data),updateMask:ED(e.fieldMask)};else{if(!(e instanceof f_))return Je();t={verify:Ih(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof ea)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Hl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Gl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof vh)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:y_(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Je()),t;var s}function __(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?In.updateTime(Sr(s.updateTime)):void 0!==s.exists?In.exists(s.exists):In.none():In.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let m=null;"setToServerValue"in d?(bt("REQUEST_TIME"===d.setToServerValue),m=new ea):"appendMissingElements"in d?m=new Hl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Gl(d.removeAllFromArray.values||[]):"increment"in d?m=new vh(u,d.increment):Je();const w=rr.fromServerFormat(d.fieldPath);return new ep(w,m)}(n,s)):[];var s;if(e.update){const s=gs(n,e.update.name),u=new Ye({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new lo((e.updateMask.fieldPaths||[]).map(E=>rr.fromServerFormat(E)));return new ta(s,u,d,t,r)}return new zl(s,u,t,r)}if(e.delete){const s=gs(n,e.delete);return new pc(s,t)}if(e.verify){const s=gs(n,e.verify);return new f_(s,t)}return Je()}function yD(n,e){return{documents:[Wm(n,e.path)]}}function vD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Wm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Wm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0===w.length)return;const E=w.map(S=>function(O){if("=="===O.op){if(TC(O.value))return{unaryFilter:{field:Dh(O.field),op:"IS_NAN"}};if(DC(O.value))return{unaryFilter:{field:Dh(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(TC(O.value))return{unaryFilter:{field:Dh(O.field),op:"IS_NOT_NAN"}};if(DC(O.value))return{unaryFilter:{field:Dh(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dh(O.field),op:CD(O.op),value:O.value}}}(S));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(E=>{return{field:Dh((S=E).field),direction:wD(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(E=e.limit,n.gt||Zf(E)?E:{value:E});var E,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function rb(n){let e=v_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){bt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=w_(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new fh(Th((O=S).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(S){let O;return O="object"==typeof S?S.value:S,Zf(O)?null:O}(t.limit));let w=null;var S;t.startAt&&(w=new fc((S=t.startAt).values||[],!!S.before));let E=null;return t.endAt&&(E=function(S){return new fc(S.values||[],!S.before)}(t.endAt)),o_(e,s,d,u,m,"F",w,E)}function w_(n){return n?void 0!==n.unaryFilter?[ID(n)]:void 0!==n.fieldFilter?[bD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>w_(e)).reduce((e,t)=>e.concat(t)):Je():[]}function wD(n){return gD[n]}function CD(n){return jA[n]}function Dh(n){return{fieldPath:n.canonicalString()}}function Th(n){return rr.fromServerFormat(n.fieldPath)}function bD(n){return $r.create(Th(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function ID(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Th(n.unaryFilter.field);return $r.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Th(n.unaryFilter.field);return $r.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Th(n.unaryFilter.field);return $r.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Th(n.unaryFilter.field);return $r.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function ED(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ib(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C_(e)),e=op(n.get(t),e);return C_(e)}function op(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function C_(n){return n+"\x01\x01"}function ms(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Je(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:Je()}u=d+2}return new Wt(r)}const b_=["userId","batchId"];function sp(n,e){return[n,Ci(e)]}function I_(n,e,t){return[n,Ci(e),t]}const ob={},DD=["prefixPath","collectionGroup","readTime","documentId"],HA=["prefixPath","collectionGroup","documentId"],sb=["collectionGroup","readTime","prefixPath","documentId"],ab=["canonicalId","targetId"],TD=["targetId","path"],AD=["path","targetId"],SD=["collectionId","parent"],ap=["indexId","uid"],MD=["uid","sequenceNumber"],E_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ra=["indexId","uid","orderedDocumentKey"],xD=["userId","collectionPath","documentId"],D_=["userId","collectionPath","largestBatchId"],up=["userId","collectionGroup","largestBatchId"],ub=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OD=[...ub,"documentOverlays"],cb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cp=cb,Zm=[...cp,"indexConfiguration","indexState","indexEntries"];class T_ extends wC{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Mr(n,e){const t=qe(n);return ds.O(t.ie,e)}class Km{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&VC(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WC();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(s.key)?null:m;const w=LC(d,m);null!==w&&r.set(s.key,w),d.isValidDocument()||d.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&Nl(this.mutations,e.mutations,(t,r)=>UC(t,r))&&Nl(this.baseMutations,e.baseMutations,(t,r)=>UC(t,r))}}class Ym{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){bt(e.mutations.length===r.length);let s=fD;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new Ym(e,t,r,s)}}class lp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Xa{constructor(e,t,r,s,u=vt.min(),d=vt.min(),m=mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lb{constructor(e){this.re=e}}function ND(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ah(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ih(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Zl(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:eu(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:eu(e.version)}}var s,u;return r}function Ah(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function eu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mc(n){const e=new xn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function tu(n,e){const t=(e.baseMutations||[]).map(u=>__(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>__(n.re,u)),s=xn.fromMillis(e.localWriteTimeMs);return new Km(e.batchId,s,t,r)}function Kl(n){const e=mc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var s;return void 0!==n.query.documents?(bt(1===(s=n.query).documents.length),r=wi(ph(v_(s.documents[0])))):r=wi(rb(n.query)),new Xa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,mr.fromBase64String(n.resumeToken))}function db(n,e){const t=eu(e.snapshotVersion),r=eu(e.lastLimboFreeSnapshotVersion);let s;s=bn(e.target)?yD(n.re,e.target):vD(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function A_(n){const e=rb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Xf(e,e.limit,"L"):e}function S_(n,e){return new lp(e.largestBatchId,__(n.re,e.overlayMutation))}function hb(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}function M_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:eu(r.readTime),documentKey:Ci(r.documentKey.path),largestBatchId:r.largestBatchId}}class x_{getBundleMetadata(e,t){return O_(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:mc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return O_(e).put({bundleId:(r=t).id,createTime:eu(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fb(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:A_(s.bundledQuery),readTime:mc(s.readTime)};var s})}saveNamedQuery(e,t){return fb(e).put({name:(r=t).name,readTime:eu(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function O_(n){return Mr(n,"bundles")}function fb(n){return Mr(n,"namedQueries")}class dp{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new dp(e,t.uid||"")}getOverlay(e,t){return Sh(e).get(hb(this.userId,t)).next(r=>r?S_(this.It,r):null)}getOverlays(e,t){const r=na();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const m=new lp(t,d);s.push(this.ue(e,m))}),oe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(Ci(d.getCollectionPath())));const u=[];return s.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Sh(e).Y("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=na(),u=Ci(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Sh(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const E=S_(this.It,w);s.set(E.getKey(),E)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=na();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sh(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,E,S)=>{const O=S_(this.It,E);u.size()<s||O.largestBatchId===d?(u.set(O.getKey(),O),d=O.largestBatchId):S.done()}).next(()=>u)}ue(e,t){return Sh(e).put(function(r,s,u){const[d,m,w]=hb(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Eh(r.re,u.mutation)}}(this.It,this.userId,t))}}function Sh(n){return Mr(n,"documentOverlays")}class Yl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Kf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ll(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Um(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Je()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function pb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function P_(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=pb(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Yl.Te=new Yl;class RD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=P_(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=P_(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class gb{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class kD{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class yr{constructor(){this.Be=new RD,this.Le=new gb(this.Be),this.Ue=new kD(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class $o{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $o(this.indexId,this.documentKey,this.arrayValue,r)}}function Ql(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mb(n.arrayValue,e.arrayValue),0!==t?t:(t=mb(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function mb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class GA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=jo(e);if(void 0!==t&&!this.ze(t))return!1;const r=kl(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const d=r[s];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class zA{constructor(){this.Ye=new Qm}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(co.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(co.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class Qm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new dn(Wt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new dn(Wt.comparator)).toArray()}}const hp=new Uint8Array(0);class fp{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Qm,this.Ze=new gc(r=>Bl(r),(r,s)=>hc(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ci(s)};return yb(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Rl(t),""],!1,!0);return yb(e).W(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ms(d.parent))}return r})}addFieldIndex(e,t){const r=Jm(e),s={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete s.indexId;const u=r.add(s);if(t.indexState){const d=Mh(e);return u.next(m=>{d.put(M_(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Jm(e),s=Mh(e),u=Jl(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Jl(e);let s=!0;const u=new Map;return oe.forEach(this.tn(t),d=>this.en(e,d).next(m=>{s&&(s=!!m),u.set(d,m)})).next(()=>{if(s){let d=Nt();const m=[];return oe.forEach(u,(w,E)=>{var S;Ne("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${Bl(t)}`);const O=function(Lt,xt){const Pt=jo(xt);if(void 0===Pt)return null;for(const jt of e_(Lt,Pt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(E,w),H=function(Lt,xt){const Pt=new Map;for(const jt of kl(xt))for(const Hr of e_(Lt,jt.fieldPath))switch(Hr.op){case"==":case"in":Pt.set(jt.fieldPath.canonicalString(),Hr.value);break;case"not-in":case"!=":return Pt.set(jt.fieldPath.canonicalString(),Hr.value),Array.from(Pt.values())}return null}(E,w),Q=function(Lt,xt){const Pt=[];let jt=!0;for(const Hr of kl(xt)){const B0=0===Hr.kind?t_(Lt,Hr.fieldPath,Lt.startAt):n_(Lt,Hr.fieldPath,Lt.startAt);Pt.push(B0.value),jt&&(jt=B0.inclusive)}return new fc(Pt,jt)}(E,w),ae=function(Lt,xt){const Pt=[];let jt=!0;for(const Hr of kl(xt)){const B0=0===Hr.kind?n_(Lt,Hr.fieldPath,Lt.endAt):t_(Lt,Hr.fieldPath,Lt.endAt);Pt.push(B0.value),jt&&(jt=B0.inclusive)}return new fc(Pt,jt)}(E,w),Oe=this.nn(w,E,Q),Le=this.nn(w,E,ae),It=this.sn(w,E,H),Tt=this.rn(w.indexId,O,Oe,Q.inclusive,Le,ae.inclusive,It);return oe.forEach(Tt,Lt=>r.J(Lt,t.limit).next(xt=>{xt.forEach(Pt=>{const jt=Ge.fromSegments(Pt.documentKey);d.has(jt)||(d=d.add(jt),m.push(jt))})}))}).next(()=>m)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),E=w/(null!=t?t.length:1),S=[];for(let O=0;O<w;++O){const H=t?this.on(t[O/E]):hp,Q=this.un(e,H,r[O%E],s),ae=this.cn(e,H,u[O%E],d),Oe=m.map(Le=>this.un(e,H,Le,!0));S.push(...this.createRange(Q,ae,Oe))}return S}un(e,t,r,s){const u=new $o(e,Ge.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new $o(e,Ge.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new GA(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new dn(rr.comparator),w=!1;for(const E of d.filters){const S=E;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:m=m.add(S.field))}for(const E of d.orderBy)E.field.isKeyField()||(m=m.add(E.field));return m.size+(w?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new yr;for(const s of kl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.qe(s.kind);Yl.Te.ce(u,d)}return r.$e()}on(e){const t=new yr;return Yl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new yr;return Yl.Te.ce(dc(this.databaseId,t),r.qe(function(s){const u=kl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new yr);let u=0;for(const d of kl(e)){const m=r[u++];for(const w of s)if(this.ln(t,d.fieldPath)&&ps(m))s=this.fn(s,d,m);else{const E=w.qe(d.kind);Yl.Te.ce(m,E)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of s){const w=new yr;w.seed(m.$e()),Yl.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof $r&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Jm(e),s=Mh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return oe.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{d.push(function(E,S){const O=S?new vi(S.sequenceNumber,new co(mc(S.readTime),new Ge(ms(S.documentKey)),S.largestBatchId)):vi.empty(),H=E.fields.map(([Q,ae])=>new uo(rr.fromServerFormat(Q),ae));return new ch(E.indexId,E.collectionGroup,H,O)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Et(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Jm(e),u=Mh(e);return this._n(e).next(d=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,w=>u.put(M_(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?oe.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),oe.forEach(m,w=>this.wn(e,s,w).next(E=>{const S=this.mn(u,w);return E.isEqual(S)?oe.resolve():this.gn(e,u,w,E,S)}))))})}yn(e,t,r,s){return Jl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return Jl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=Jl(e);let u=new dn(Ql);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new $o(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new dn(Ql);const s=this.an(t,e);if(null==s)return r;const u=jo(t);if(null!=u){const d=e.data.field(u.fieldPath);if(ps(d))for(const m of d.arrayValue.values||[])r=r.add(new $o(t.indexId,e.key,this.on(m),s))}else r=r.add(new $o(t.indexId,e.key,hp,s));return r}gn(e,t,r,s,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,E,S,O){const H=m.getIterator(),Q=w.getIterator();let ae=dh(H),Oe=dh(Q);for(;ae||Oe;){let Le=!1,It=!1;if(ae&&Oe){const Tt=E(ae,Oe);Tt<0?It=!0:Tt>0&&(Le=!0)}else null!=ae?It=!0:Le=!0;Le?(S(Oe),Oe=dh(Q)):It?(O(ae),ae=dh(H)):(ae=dh(H),Oe=dh(Q))}}(s,u,Ql,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),oe.waitFor(d)}_n(e){let t=1;return Mh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Ql(d,m)).filter((d,m,w)=>!m||0!==Ql(d,w[m-1]));const s=[];s.push(e);for(const d of r){const m=Ql(d,e),w=Ql(d,t);if(0===m)s[0]=e.Ke();else if(m>0&&w<0)s.push(d),s.push(d.Ke());else if(w>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2)u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,hp,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,hp,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vb)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||Je())).next(vb)}}function yb(n){return Mr(n,"collectionParents")}function Jl(n){return Mr(n,"indexEntries")}function Jm(n){return Mr(n,"indexConfiguration")}function Mh(n){return Mr(n,"indexState")}function vb(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;zv(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new co(e.readTime,e.documentKey,t)}const _b={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bi(e,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xm(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(S,O,H)=>(m++,H.delete()));u.push(w.next(()=>{bt(1===m)}));const E=[];for(const S of t.mutations){const O=I_(e,S.key.path,t.batchId);u.push(s.delete(O)),E.push(S.key)}return oe.waitFor(u).next(()=>E)}function pp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(41943040,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);class gp{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new gp(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).Z({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=yp(e),d=ia(e);return d.add({}).next(m=>{bt("number"==typeof m);const w=new Km(m,t,r,s),E=function(H,Q,ae){const Oe=ae.baseMutations.map(It=>Eh(H.re,It)),Le=ae.mutations.map(It=>Eh(H.re,It));return{userId:Q,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Oe,mutations:Le}}(this.It,this.userId,w),S=[];let O=new dn((H,Q)=>Et(H.canonicalString(),Q.canonicalString()));for(const H of s){const Q=I_(this.userId,H.key.path,m);O=O.add(H.key.path.popLast()),S.push(d.put(E)),S.push(u.put(Q,ob))}return O.forEach(H=>{S.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),oe.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return ia(e).get(t).next(r=>r?(bt(r.userId===this.userId),tu(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ia(e).Z({index:"userMutationsIndex",range:s},(d,m,w)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=tu(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ia(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).W("userMutationsIndex",t).next(r=>r.map(s=>tu(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sp(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return yp(e).Z({range:s},(d,m,w)=>{const[E,S,O]=d,H=ms(S);if(E===this.userId&&t.path.isEqual(H))return ia(e).get(O).next(Q=>{if(!Q)throw Je();bt(Q.userId===this.userId),u.push(tu(this.It,Q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Et);const s=[];return t.forEach(u=>{const d=sp(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=yp(e).Z({range:m},(E,S,O)=>{const[H,Q,ae]=E,Oe=ms(Q);H===this.userId&&u.path.isEqual(Oe)?r=r.add(ae):O.done()});s.push(w)}),oe.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=sp(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new dn(Et);return yp(e).Z({range:d},(w,E,S)=>{const[O,H,Q]=w,ae=ms(H);O===this.userId&&r.isPrefixOf(ae)?ae.length===s&&(m=m.add(Q)):S.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(ia(e).get(u).next(d=>{if(null===d)throw Je();bt(d.userId===this.userId),r.push(tu(this.It,d))}))}),oe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Xm(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return yp(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=ms(u[1]);s.push(w)}else m.done()}).next(()=>{bt(0===s.length)})})}containsKey(e,t){return mp(e,this.userId,t)}Rn(e){return N_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mp(n,e,t){const r=sp(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return yp(n).Z({range:u,X:!0},(m,w,E)=>{const[S,O,H]=m;S===e&&O===s&&(d=!0),E.done()}).next(()=>d)}function ia(n){return Mr(n,"mutations")}function yp(n){return Mr(n,"documentMutations")}function N_(n){return Mr(n,"mutationQueues")}class Xl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Xl(0)}static vn(){return new Xl(-1)}}class wb{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Xl(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>vt.fromTimestamp(new xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ys(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return ys(e).Z((d,m)=>{const w=Kl(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>oe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return ys(e).Z((r,s)=>{const u=Kl(s);t(u)})}Vn(e){return Cb(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}Sn(e,t){return Cb(e).put("targetGlobalKey",t)}Dn(e,t){return ys(e).put(db(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Bl(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ys(e).Z({range:s,index:"queryTargetsIndex"},(d,m,w)=>{const E=Kl(m);hc(t,E.target)&&(u=E,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=nu(e);return t.forEach(d=>{const m=Ci(d.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,d))}),oe.waitFor(s)}removeMatchingKeys(e,t,r){const s=nu(e);return oe.forEach(t,u=>{const d=Ci(u.path);return oe.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=nu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=nu(e);let u=Nt();return s.Z({range:r,X:!0},(d,m,w)=>{const E=ms(d[1]),S=new Ge(E);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ci(t.path),s=IDBKeyRange.bound([r],[Rl(r)],!1,!0);let u=0;return nu(e).Z({index:"documentTargetsIndex",X:!0,range:s},([d,m],w,E)=>{0!==d&&(u++,E.done())}).next(()=>u>0)}se(e,t){return ys(e).get(t).next(r=>r?Kl(r):null)}}function ys(n){return Mr(n,"targets")}function Cb(n){return Mr(n,"targetGlobal")}function nu(n){return Mr(n,"targetDocuments")}function ey([n,e],[t,r]){const s=Et(n,t);return 0===s?Et(e,r):s}class qA{constructor(e){this.xn=e,this.buffer=new dn(ey),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ey(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){hs(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Js(r)}yield t.Fn(3e5)}))}}class WA{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(_i.at);const r=new qA(t);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(_b)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_b):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,d,m,w,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),s=this.params.maximumSequenceNumbersToCollect):s=O,d=Date.now(),this.nthSequenceNumber(e,s))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(E=Date.now(),jv()<=Zu.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${s} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${O} documents in `+(E-w)+`ms\nTotal Duration: ${E-S}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:O})))}}class LD{constructor(e,t){this.db=e,this.garbageCollector=new WA(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return ty(e,r)}removeReference(e,t,r){return ty(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ty(e,t)}Gn(e,t){return function(r,s){let u=!1;return N_(r).tt(d=>mp(r,d,s).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(E=>{if(!E)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,vt.min()),nu(e).delete([0,Ci(d.path)])))});s.push(w)}}).next(()=>oe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ty(e,t)}Kn(e,t){const r=nu(e);let s,u=_i.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:E})=>{0===d?(u!==_i.at&&t(new Ge(ms(s)),u),u=E,s=w):u=_i.at}).next(()=>{u!==_i.at&&t(new Ge(ms(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ty(n,e){return nu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:r}));var r}class bb{constructor(){this.changes=new gc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ib{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yc(e).put(r)}removeEntry(e,t,r){return yc(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ah(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=yn.newInvalidDocument(t);return yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vp(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:yn.newInvalidDocument(t)};return yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vp(t))},(s,u)=>{r={document:this.jn(t,u),size:pp(u)}}).next(()=>r)}getEntries(e,t){let r=Ui();return this.zn(e,t,(s,u)=>{const d=this.jn(s,u);r=r.insert(s,d)}).next(()=>r)}Hn(e,t){let r=Ui(),s=new Un(Ge.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),s=s.insert(u,pp(d))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let s=new dn(F_);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(vp(s.first()),vp(s.last())),d=s.getIterator();let m=d.getNext();return yc(e).Z({index:"documentKeyIndex",range:u},(w,E,S)=>{const O=Ge.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;m&&F_(m,O)<0;)r(m,null),m=d.getNext();m&&m.isEqual(O)&&(r(m,E),m=d.hasNext()?d.getNext():null),m?S.j(vp(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Ah(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yc(e).W(IDBKeyRange.bound(s,u,!0)).next(d=>{let m=Ui();for(const w of d){const E=this.jn(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(E.key,E)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Ui();const d=Eb(t,r),m=Eb(t,co.max());return yc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,E,S)=>{const O=this.jn(Ge.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);u=u.insert(O.key,O),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new VD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return k_(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Qn(e,t){return k_(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function PD(n,e){let t;if(e.document)t=tb(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=mc(e.noDocument.readTime);t=yn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=Ge.fromSegments(e.unknownDocument.path),s=mc(e.unknownDocument.version);t=yn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new xn(r[0],r[1]);return vt.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return yn.newInvalidDocument(e)}}function R_(n){return new Ib(n)}class VD extends bb{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new gc(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new dn((u,d)=>Et(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=ND(this.Yn.It,d);s=s.add(u.path.popLast()),r+=pp(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=ND(this.Yn.It,d.convertToNoDocument(vt.min()));t.push(this.Yn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function k_(n){return Mr(n,"remoteDocumentGlobal")}function yc(n){return Mr(n,"remoteDocumentsV14")}function vp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Eb(n,e){const t=e.documentKey.path.toArray();return[n,Ah(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function F_(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Et(t[u],r[u]),s)return s;return s=Et(t.length,r.length),s||(s=Et(t[t.length-2],r[r.length-2]),s||Et(t[t.length-1],r[r.length-1]))}class UD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class L_{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&rp(r.mutation,s,lo.empty(),xn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const s=na();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=_h();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=na();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,s){let u=Ui();const d=wh(),m=wh();return t.forEach((w,E)=>{const S=r.get(E.key);s.has(E.key)&&(void 0===S||S.mutation instanceof ta)?u=u.insert(E.key,E):void 0!==S&&(d.set(E.key,S.mutation.getFieldMask()),rp(S.mutation,E,S.mutation.getFieldMask(),xn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((E,S)=>d.set(E,S)),t.forEach((E,S)=>{var O;return m.set(E,new UD(S,null!==(O=d.get(E))&&void 0!==O?O:null))}),m))}recalculateAndSaveOverlays(e,t){const r=wh();let s=new Un((d,m)=>d-m),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const E=t.get(w);if(null===E)return;let S=r.get(w)||lo.empty();S=m.applyToLocalView(E,S),r.set(w,S);const O=(s.get(m.batchId)||Nt()).add(w);s=s.insert(m.batchId,O)})}).next(()=>{const d=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),E=w.key,S=w.value,O=WC();S.forEach(H=>{if(!u.has(H)){const Q=LC(t.get(H),r.get(H));null!==Q&&O.set(H,Q),u=u.add(H)}}),d.push(this.documentOverlayCache.saveOverlays(e,E,O))}return oe.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):a_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):oe.resolve(na());let m=-1,w=u;return d.next(E=>oe.forEach(E,(S,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),u.get(S)?oe.resolve():this.getBaseDocument(e,S,O).next(H=>{w=w.insert(S,H)}))).next(()=>this.populateOverlays(e,E,u)).next(()=>this.computeViews(e,w,E,Nt())).next(S=>({batchId:m,changes:p_(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=_h();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=_h();return this.indexManager.getCollectionParents(e,s).next(d=>oe.forEach(d,m=>{const w=(E=t,S=m.child(s),new Xs(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(E=>{E.forEach((S,O)=>{u=u.insert(S,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const E=w.getKey();null===s.get(E)&&(s=s.insert(E,yn.newInvalidDocument(E)))});let d=_h();return s.forEach((m,w)=>{const E=u.get(m);void 0!==E&&rp(E.mutation,w,lo.empty(),xn.now()),u_(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(yn.newInvalidDocument(t))}}class Db{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:A_(r.bundledQuery),readTime:Sr(r.readTime)}),oe.resolve();var r}}class Tb{constructor(){this.overlays=new Un(Ge.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=na();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const s=na(),u=t.length+1,d=new Ge(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,E=w.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Un((E,S)=>E-S);const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let S=u.get(E.largestBatchId);null===S&&(S=na(),u=u.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const m=na(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((E,S)=>m.set(E,S)),!(m.size()>=s)););return oe.resolve(m)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new lp(t,r));let u=this.es.get(t);void 0===u&&(u=Nt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class ny{constructor(){this.ns=new dn(xr.ss),this.rs=new dn(xr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new xr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new xr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new Wt([])),r=new xr(t,e),s=new xr(t,e+1),u=[];return this.rs.forEachInRange([r,s],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new Wt([])),r=new xr(t,e),s=new xr(t,e+1);let u=Nt();return this.rs.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new xr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class xr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Et(e._s,t._s)}static os(e,t){return Et(e._s,t._s)||Ge.comparator(e.key,t.key)}}class BD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new dn(xr.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const d=new Km(u,t,r,s);this.mutationQueue.push(d);for(const m of s)this.gs=this.gs.add(new xr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xr(t,0),s=new xr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],d=>{const m=this.ys(d._s);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Et);return t.forEach(s=>{const u=new xr(s,0),d=new xr(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new xr(new Ge(u),0);let m=new dn(Et);return this.gs.forEachWhile(w=>{const E=w.key.path;return!!r.isPrefixOf(E)&&(E.length===s&&(m=m.add(w._s)),!0)},d),oe.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){bt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,s=>{const u=new xr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new xr(t,0),s=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZA{constructor(e){this.Es=e,this.docs=new Un(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():yn.newInvalidDocument(s))}),oe.resolve(r)}getAllFromCollection(e,t,r){let s=Ui();const u=new Ge(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||zv(Gv(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){Je()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ab(this)}getSize(e){return oe.resolve(this.size)}}class Ab extends bb{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class KA{constructor(e){this.persistence=e,this.Rs=new gc(t=>Bl(t),hc),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ny,this.targetCount=0,this.vs=Xl.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Xl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),oe.waitFor(u).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class jD{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new _i(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new KA(this),this.indexManager=new zA,this.remoteDocumentCache=new ZA(r=>this.referenceDelegate.xs(r)),this.It=new lb(t),this.Ns=new Db(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new BD(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const s=new YA(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Ms(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Os(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class YA extends wC{constructor(e){super(),this.currentSequenceNumber=e}}class V_{constructor(e){this.persistence=e,this.Fs=new ny,this.$s=null}static Bs(e){return new V_(e)}get Ls(){if(this.$s)return this.$s;throw Je()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const s=Ge.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class QA{constructor(e){this.It=e}$(e,t,r,s){const u=new Gf("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b_,{unique:!0}),m.createObjectStore("documentMutations"),$D(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=oe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),$D(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",E)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(E=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b_,{unique:!0});const S=w.store("mutations"),O=E.map(H=>S.put(H));return oe.waitFor(O)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.qs(u))),r<6&&s>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(d=d.next(()=>this.Gs(u))),r<8&&s>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.js(u))),r<11&&s>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:xD});w.createIndex("collectionPathOverlayIndex",D_,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",up,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:DD});w.createIndex("documentKeyIndex",HA),w.createIndex("collectionGroupIndex",sb)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&s>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:ap}).createIndex("sequenceNumberIndex",MD,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:E_}).createIndex("documentKeyIndex",ra,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=pp(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>oe.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>oe.forEach(m,w=>{bt(w.userId===u.userId);const E=tu(this.It,w);return Xm(e,u.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((d,m)=>{const w=new Wt(d),E=[0,Ci(w)];u.push(t.get(E).next(S=>S?oe.resolve():t.put({targetId:0,path:Ci(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:SD});const r=t.store("collectionParents"),s=new Qm,u=d=>{if(s.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Ci(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Wt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],E)=>{const S=ms(m);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=Kl(s),d=db(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(E=d,E.document?new Ge(Wt.fromString(E.document.name).popFirst(5)):E.noDocument?Ge.fromSegments(E.noDocument.path):E.unknownDocument?Ge.fromSegments(E.unknownDocument.path):Je()).path.toArray();var E;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(m.put(S))}).next(()=>oe.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=R_(this.It),u=new jD(V_.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var E;let S=null!==(E=m.get(w.userId))&&void 0!==E?E:Nt();tu(this.It,w).keys().forEach(O=>S=S.add(O)),m.set(w.userId,S)}),oe.forEach(m,(w,E)=>{const S=new fr(E),O=dp.oe(this.It,S),H=u.getIndexManager(S),Q=gp.oe(S,this.It,H,u.referenceDelegate);return new L_(s,Q,O,H).recalculateAndSaveOverlaysForDocumentKeys(new T_(t,_i.at),w).next()})})}}function $D(n){n.createObjectStore("targetDocuments",{keyPath:TD}).createIndex("documentTargetsIndex",AD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ab,{unique:!0}),n.createObjectStore("targetGlobal")}const Sb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mb{constructor(e,t,r,s,u,d,m,w,E,S,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=E,this.Ys=S,this.Xs=O,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=H=>Promise.resolve(),!Mb.C())throw new Me(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LD(this,s),this.ii=t+"main",this.It=new lb(w),this.ri=new ds(this.ii,this.Xs,new QA(this.It)),this.Cs=new wb(this.referenceDelegate,this.It),this.remoteDocumentCache=R_(this.It),this.Ns=new x_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&Vn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(le.FAILED_PRECONDITION,Sb);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new _i(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>U_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(hs(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return vc(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return U_(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Mr(r,"clientMetadata");return s.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return oe.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):vc(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(le.FAILED_PRECONDITION,Sb);return!1}}return!(!this.networkEnabled||!this.inForeground)||U_(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new T_(t,_i.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>U_(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return gp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fp(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return dp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?Zm:14===d?cp:13===d?cb:12===d?OD:11===d?ub:void Je();var d;let m;return this.ri.runTransaction(e,s,u,w=>(m=new T_(w,this.Ss?this.Ss.next():_i.at),"readwrite-primary"===t?this.fi(m).next(E=>!!E||this.di(m)).next(E=>{if(!E)throw Vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(le.FAILED_PRECONDITION,_C);return r(m)}).next(E=>this.wi(m).next(()=>E)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return vc(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(le.FAILED_PRECONDITION,Sb)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vc(e).put("owner",t)}static C(){return ds.C()}_i(e){const t=vc(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Vn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vc(n){return Mr(n,"owner")}function U_(n){return Mr(n,"clientMetadata")}function ry(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xh{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Nt(),s=Nt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new xh(e,t.fromCache,r,s)}}class B_{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Mi(e,t,s,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(gh(t))return oe.resolve(null);let r=wi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Xf(t,null,"F"),r=wi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Nt(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const E=this.Fi(t,m);return this.$i(t,E,d,w.readTime)?this.ki(e,Xf(t,null,"F")):this.Bi(e,E,t,w)}))})))}Mi(e,t,r,s){return gh(t)||s.isEqual(vt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,s)?this.Oi(e,t):(jv()<=Zu.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jm(t)),this.Bi(e,d,t,Hv(s,-1)))})}Fi(e,t){let r=new dn(sD(e));return t.forEach((s,u)=>{u_(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Oi(e,t){return jv()<=Zu.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",jm(t)),this.Ni.getDocumentsMatchingQuery(e,t,co.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class xb{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new Un(Et),this.qi=new gc(u=>Bl(u),hc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new L_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function HD(n,e,t,r){return new xb(n,e,t,r)}function iy(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,ge.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Nt();for(const E of s){d.push(E.batchId);for(const S of E.mutations)w=w.add(S.key)}for(const E of u){m.push(E.batchId);for(const S of E.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(E=>({ji:E,removedBatchIds:d,addedBatchIds:m}))})})}),oy.apply(this,arguments)}function GD(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,E){const S=w.batch,O=S.keys();let H=oe.resolve();return O.forEach(Q=>{H=H.next(()=>E.getEntry(m,Q)).next(ae=>{const Oe=w.docVersions.get(Q);bt(null!==Oe),ae.version.compareTo(Oe)<0&&(S.applyToRemoteDocument(ae,w),ae.isValidDocument()&&(ae.setReadTime(w.commitVersion),E.addEntry(ae)))})}),H.next(()=>d.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Nt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function j_(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function JA(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const m=[];e.targetChanges.forEach((S,O)=>{const H=s.get(O);if(!H)return;m.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,O).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,O)));let Q=H.withSequenceNumber(u.currentSequenceNumber);var ae,Oe,Le;e.targetMismatches.has(O)?Q=Q.withResumeToken(mr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):S.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(S.resumeToken,r)),s=s.insert(O,Q),Oe=Q,Le=S,(0===(ae=H).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Q))});let w=Ui(),E=Nt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(zD(u,d,e.documentUpdates).next(S=>{w=S.Wi,E=S.zi})),!r.isEqual(vt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(O=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return oe.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,E)).next(()=>w)}).then(u=>(t.Ui=s,u))}function zD(n,e,t){let r=Nt(),s=Nt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Ui();return t.forEach((m,w)=>{const E=u.get(m);w.isFoundDocument()!==E.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(vt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!E.isValidDocument()||w.version.compareTo(E.version)>0||0===w.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",w.version)}),{Wi:d,zi:s}})}function qD(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oh(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,oe.resolve(s)):t.Cs.allocateTargetId(r).next(d=>(s=new Xa(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ru(n,e,t){return $_.apply(this,arguments)}function $_(){return $_=(0,ge.Z)(function*(n,e,t){const r=qe(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!hs(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),$_.apply(this,arguments)}function H_(n,e,t){const r=qe(n);let s=vt.min(),u=Nt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,E){const S=qe(m),O=S.qi.get(E);return void 0!==O?oe.resolve(S.Ui.get(O)):S.Cs.getTargetData(w,E)}(r,d,wi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?s:vt.min(),t?u:Nt())).next(m=>(Ob(r,NC(e),m),{documents:m,Hi:u})))}function WD(n,e){const t=qe(n),r=qe(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function ZD(n,e){const t=qe(n),r=t.Ki.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Hv(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Ob(t,e,s),s))}function Ob(n,e,t){let r=vt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function G_(){return G_=(0,ge.Z)(function*(n,e,t,r){const s=qe(n);let u=Nt(),d=Ui();for(const E of t){const S=e.Ji(E.metadata.name);E.document&&(u=u.add(S));const O=e.Yi(E);O.setReadTime(e.Xi(E.metadata.readTime)),d=d.insert(S,O)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),w=yield Oh(s,(E=r,wi(ph(Wt.fromString(`__bundle__/docs/${E}`)))));var E;return s.persistence.runTransaction("Apply bundle documents","readwrite",E=>zD(E,m,d).next(S=>(m.apply(E),S)).next(S=>s.Cs.removeMatchingKeysForTargetId(E,w.targetId).next(()=>s.Cs.addMatchingKeys(E,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(E,S.Wi,S.zi)).next(()=>S.Wi)))}),G_.apply(this,arguments)}function XA(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,ge.Z)(function*(n,e,t=Nt()){const r=yield Oh(n,wi(A_(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=Sr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(mr.EMPTY_BYTE_STRING,d);return s.Ui=s.Ui.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),z_.apply(this,arguments)}function q_(n,e){return`firestore_clients_${n}_${e}`}function W_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pb(n,e){return`firestore_targets_${n}_${e}`}class ji{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new Me(s.error.code,s.error.message))),d?new ji(e,t,s.state,u):(Vn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _p{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Me(r.error.code,r.error.message))),u?new _p(e,r.state,s):(Vn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Ch();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=EC(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new Ph(e,u):(Vn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Z_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Z_(t.clientId,t.onlineState):(Vn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $i{constructor(){this.activeTargetIds=Ch()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K_{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Un(Et),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=q_(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new $i),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(q_(e.persistenceKey,s));if(u){const d=Ph.Zi(s,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Pb(this.persistenceKey,e));if(r){const s=_p.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pb(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let d=_i.at;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),d=m}catch(m){Vn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);s!==_i.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Mr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new ji(this.currentUser,e,t,r),u=W_(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=W_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=Pb(this.persistenceKey,e),u=new _p(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Ph.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return ji.Zi(new fr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return _p.Zi(s,t)}yr(e){return Z_.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{s.has(w)||d.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Ch();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class sy{constructor(){this.Lr=new $i,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new $i,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class YD{qr(e){}shutdown(){}}class Nb{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Y_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Rb{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class kb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const d=this.ao(e,t);Ne("RestConnection","Sending: ",d,r);const m={};return this.ho(m,s,u),this.lo(e,d,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw Ka("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}fo(e,t,r,s,u,d){return this.co(e,t,r,s,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ao(e,t){return`${this.oo}/v1/${t}:${Y_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,s){return new Promise((u,d)=>{const m=new $E;m.listenOnce(Lv.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Rm.NO_ERROR:const E=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(E)),u(E);break;case Rm.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new Me(le.DEADLINE_EXCEEDED,"Request time out"));break;case Rm.HTTP_ERROR:const S=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const O=m.getResponseJson().error;if(O&&O.status&&O.message){const H=function(Q){const ae=Q.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ae)>=0?ae:le.UNKNOWN}(O.status);d(new Me(H,O.message))}else d(new Me(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(le.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}_o(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Fv(),d=hC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Uv({})),this.ho(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=s.join("");Ne("Connection","Creating WebChannel: "+w,m);const E=u.createWebChannel(w,m);let S=!1,O=!1;const H=new Rb({Hr:ae=>{O?Ne("Connection","Not sending because WebChannel is closed:",ae):(S||(Ne("Connection","Opening WebChannel transport."),E.open(),S=!0),Ne("Connection","WebChannel sending:",ae),E.send(ae))},Jr:()=>E.close()}),Q=(ae,Oe,Le)=>{ae.listen(Oe,It=>{try{Le(It)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return Q(E,Hf.EventType.OPEN,()=>{O||Ne("Connection","WebChannel transport opened.")}),Q(E,Hf.EventType.CLOSE,()=>{O||(O=!0,Ne("Connection","WebChannel transport closed"),H.io())}),Q(E,Hf.EventType.ERROR,ae=>{O||(O=!0,Ka("Connection","WebChannel transport errored:",ae),H.io(new Me(le.UNAVAILABLE,"The operation could not be completed")))}),Q(E,Hf.EventType.MESSAGE,ae=>{var Oe;if(!O){const Le=ae.data[0];bt(!!Le);const It=Le,Tt=It.error||(null===(Oe=It[0])||void 0===Oe?void 0:Oe.error);if(Tt){Ne("Connection","WebChannel received error:",Tt);const Lt=Tt.status;let xt=function(jt){const Hr=cr[jt];if(void 0!==Hr)return zC(Hr)}(Lt),Pt=Tt.message;void 0===xt&&(xt=le.INTERNAL,Pt="Unknown error status: "+Lt+" with message "+Tt.message),O=!0,H.io(new Me(xt,Pt)),E.close()}else Ne("Connection","WebChannel received:",Le),H.ro(Le)}}),Q(d,fC.STAT_EVENT,ae=>{ae.stat===Vv.PROXY?Ne("Connection","Detected buffering proxy"):ae.stat===Vv.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.so()},0),H}}function Fb(){return typeof window<"u"?window:null}function wp(){return typeof document<"u"?document:null}function Nh(n){return new QC(n,!0)}class Q_{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=s,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,t-r);s>0&&Ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class J_{constructor(e,t,r,s,u,d,m,w){this.Hs=e,this.Po=r,this.vo=s,this.Vo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Q_(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Vn(t.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Me(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QD extends J_{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function $A(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Je(),s=e.targetChange.targetIds||[],u=function(w,E){return w.gt?(bt(void 0===E||"string"==typeof E),mr.fromBase64String(E||"")):(bt(void 0===E||E instanceof Uint8Array),mr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const E=void 0===w.code?le.UNKNOWN:zC(w.code);return new Me(E,w.message||"")}(d);t=new Gm(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=gs(n,r.document.name),u=Sr(r.document.updateTime),d=new Ye({mapValue:{fields:r.document.fields}}),m=yn.newFoundDocument(s,u,d);t=new Hm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=gs(n,r.document),u=r.readTime?Sr(r.readTime):vt.min(),d=yn.newNoDocument(s,u);t=new Hm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=gs(n,r.document);t=new Hm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Je();{const r=e.filter,u=new HC(r.count||0);t=new ZC(r.targetId,u)}}var w;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return vt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Sr(u.readTime):vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=ip(this.It),t.addTarget=function(s,u){let d;const m=u.target;return d=bn(m)?{documents:yD(s,m)}:{query:vD(s,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=JC(s,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(d.readTime=Zl(s,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function _D(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=ip(this.It),t.removeTarget=e,this.Bo(t)}}class X_ extends J_{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function mD(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,s){let u=Sr(r.updateTime?r.updateTime:s);return u.isEqual(vt.min())&&(u=Sr(s)),new dD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.Zo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ip(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Eh(this.It,r))};this.Bo(t)}}class _c extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Me(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.Vo.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(le.UNKNOWN,s.toString())})}fo(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.fo(e,t,r,u,d,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(le.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class Lb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Vn(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class e0{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;wc(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(E){const S=qe(E);S._u.add(4),yield Cp(S),S.gu.set("Unknown"),S._u.delete(4),yield ho(S)}),function(E){return w.apply(this,arguments)})(d))}))}),this.gu=new Lb(r,s)}}function ho(n){return t0.apply(this,arguments)}function t0(){return t0=(0,ge.Z)(function*(n){if(wc(n))for(const e of n.wu)yield e(!0)}),t0.apply(this,arguments)}function Cp(n){return n0.apply(this,arguments)}function n0(){return n0=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),n0.apply(this,arguments)}function ay(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),uy(t)?Vb(t):iu(t).ko()&&r0(t,e))}function bp(n,e){const t=qe(n),r=iu(t);t.du.delete(e),r.ko()&&o0(t,e),0===t.du.size&&(r.ko()?r.Fo():wc(t)&&t.gu.set("Unknown"))}function r0(n,e){n.yu.Ot(e.targetId),iu(n).zo(e)}function o0(n,e){n.yu.Ot(e),iu(n).Ho(e)}function Vb(n){n.yu=new YC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),iu(n).start(),n.gu.uu()}function uy(n){return wc(n)&&!iu(n).No()&&n.du.size>0}function wc(n){return 0===qe(n)._u.size}function s0(n){n.yu=void 0}function eS(n){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{r0(n,e)})}),Ip.apply(this,arguments)}function Ub(n,e){return cy.apply(this,arguments)}function cy(){return cy=(0,ge.Z)(function*(n,e){s0(n),uy(n)?(n.gu.hu(e),Vb(n)):n.gu.set("Unknown")}),cy.apply(this,arguments)}function Bb(n,e,t){return ly.apply(this,arguments)}function ly(){return ly=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Gm&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(s,u){const d=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,d),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ep(n,r)}else if(e instanceof Hm?n.yu.Gt(e):e instanceof ZC?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(vt.min()))try{const r=yield j_(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const E=s.du.get(w);E&&s.du.set(w,E.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=s.du.get(m);if(!w)return;s.du.set(m,w.withResumeToken(mr.EMPTY_BYTE_STRING,w.snapshotVersion)),o0(s,m);const E=new Xa(w.target,m,1,w.sequenceNumber);r0(s,E)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield Ep(n,r)}var r}),ly.apply(this,arguments)}function Ep(n,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,ge.Z)(function*(n,e,t){if(!hs(e))throw e;n._u.add(1),yield Cp(n),n.gu.set("Offline"),t||(t=()=>j_(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield ho(n)}))}),Rh.apply(this,arguments)}function Dp(n,e){return e().catch(t=>Ep(n,t,e))}function ed(n){return a0.apply(this,arguments)}function a0(){return a0=(0,ge.Z)(function*(n){const e=qe(n),t=Cc(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;jb(e);)try{const s=yield qD(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,$b(e,s)}catch(s){yield Ep(e,s)}Hb(e)&&Gb(e)}),a0.apply(this,arguments)}function jb(n){return wc(n)&&n.fu.length<10}function $b(n,e){n.fu.push(e);const t=Cc(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Hb(n){return wc(n)&&!Cc(n).No()&&n.fu.length>0}function Gb(n){Cc(n).start()}function tS(n){return zb.apply(this,arguments)}function zb(){return zb=(0,ge.Z)(function*(n){Cc(n).eu()}),zb.apply(this,arguments)}function qb(n){return u0.apply(this,arguments)}function u0(){return u0=(0,ge.Z)(function*(n){const e=Cc(n);for(const t of n.fu)e.Xo(t.mutations)}),u0.apply(this,arguments)}function JD(n,e,t){return c0.apply(this,arguments)}function c0(){return c0=(0,ge.Z)(function*(n,e,t){const r=n.fu.shift(),s=Ym.from(r,e,t);yield Dp(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield ed(n)}),c0.apply(this,arguments)}function nS(n,e){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,ge.Z)(function*(n,e){var t;e&&Cc(n).Yo&&(yield(t=(0,ge.Z)(function*(r,s){if(GC(u=s.code)&&u!==le.ABORTED){const d=r.fu.shift();Cc(r).Oo(),yield Dp(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield ed(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),Hb(n)&&Gb(n)}),Wb.apply(this,arguments)}function XD(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ge.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=wc(t);t._u.add(3),yield Cp(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield ho(t)}),Zb.apply(this,arguments)}function Kb(n,e){return l0.apply(this,arguments)}function l0(){return l0=(0,ge.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield ho(t)):e||(t._u.add(2),yield Cp(t),t.gu.set("Unknown"))}),l0.apply(this,arguments)}function iu(n){return n.pu||(n.pu=function(e,t,r){const s=qe(e);return s.su(),new QD(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:eS.bind(null,n),Zr:Ub.bind(null,n),Wo:Bb.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Oo(),uy(n)?Vb(n):n.gu.set("Unknown")):(yield n.pu.stop(),s0(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Cc(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.su(),new X_(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:tS.bind(null,n),Zr:nS.bind(null,n),tu:qb.bind(null,n),Zo:JD.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Oo(),yield ed(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class d0{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,m=new d0(e,t,d,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function td(n,e){if(Vn("AsyncQueue",`${e}: ${n}`),hs(n))return new Me(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Ho{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=_h(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new Ho(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class h0{constructor(){this.Tu=new Un(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Je():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class bc{constructor(e,t,r,s,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new bc(e,t,Ho.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class f0{constructor(){this.Au=void 0,this.listeners=[]}}class eT{constructor(){this.queries=new gc(e=>PC(e),yh),this.onlineState="Unknown",this.Ru=new Set}}function Tp(n,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new f0),s)try{u.Au=yield t.onListen(r)}catch(d){const m=td(d,`Initialization of query '${jm(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&Qb(t)}),Ap.apply(this,arguments)}function kh(n,e){return Yb.apply(this,arguments)}function Yb(){return Yb=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),Yb.apply(this,arguments)}function rS(n,e){const t=qe(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const m of d.listeners)m.Pu(s)&&(r=!0);d.Au=s}}r&&Qb(t)}function iS(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Qb(n){n.Ru.forEach(e=>{e.next()})}class dy{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new bc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=bc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class tT{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class Jb{constructor(e){this.It=e}Ji(e){return gs(this.It,e)}Yi(e){return e.metadata.exists?tb(this.It,e.document,!1):yn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Sr(e)}}class nT{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Xb(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Wt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new Jb(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const d of s.metadata.queries){const m=(t.get(d)||Nt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function KD(n,e,t,r){return G_.apply(this,arguments)}(e.localStore,new Jb(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const s of e.queries)yield XA(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Xb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class p0{constructor(e){this.key=e}}class g0{constructor(e){this.key=e}}class m0{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Nt(),this.mutatedKeys=Nt(),this.Ku=sD(e),this.Gu=new Ho(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new h0,s=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,E="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,O)=>{const H=s.get(S),Q=u_(this.query,O)?O:null,ae=!!H&&this.mutatedKeys.has(H.key),Oe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Le=!1;H&&Q?H.data.isEqual(Q.data)?ae!==Oe&&(r.track({type:3,doc:Q}),Le=!0):this.zu(H,Q)||(r.track({type:2,doc:Q}),Le=!0,(w&&this.Ku(Q,w)>0||E&&this.Ku(Q,E)<0)&&(m=!0)):!H&&Q?(r.track({type:0,doc:Q}),Le=!0):H&&!Q&&(r.track({type:1,doc:H}),Le=!0,(w||E)&&(m=!0)),Le&&(Q?(d=d.add(Q),u=Oe?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Gu:d,Wu:r,$i:m,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((E,S)=>function(O,H){const Q=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return Q(O)-Q(H)}(E.type,S.type)||this.Ku(E.doc,S.doc)),this.Hu(r);const d=t?this.Ju():[],m=0===this.qu.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new bc(this.query,e.Gu,s,u,e.mutatedKeys,0===m,w,!1),Yu:d}:{Yu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new h0,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Nt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new g0(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new p0(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Nt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return bc.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class rT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iT{constructor(e){this.key=e,this.ec=!1}}class eI{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nc={},this.sc=new gc(m=>PC(m),yh),this.ic=new Map,this.rc=new Set,this.oc=new Un(Ge.comparator),this.uc=new Map,this.cc=new ny,this.ac={},this.hc=new Map,this.lc=Xl.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function y0(n,e){return tI.apply(this,arguments)}function tI(){return tI=(0,ge.Z)(function*(n,e){const t=xp(n);let r,s;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.tc();else{const d=yield Oh(t.localStore,wi(e));t.isPrimaryClient&&ay(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield hy(t,e,r,"current"===m)}return s}),tI.apply(this,arguments)}function hy(n,e,t,r){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ge.Z)(function*(n,e,t,r){n.dc=(S,O,H)=>{return(Q=(0,ge.Z)(function*(ae,Oe,Le,It){let Tt=Oe.view.ju(Le);Tt.$i&&(Tt=yield H_(ae.localStore,Oe.query,!1).then(({documents:Pt})=>Oe.view.ju(Pt,Tt)));const Lt=It&&It.targetChanges.get(Oe.targetId),xt=Oe.view.applyChanges(Tt,ae.isPrimaryClient,Lt);return i(ae,Oe.targetId,xt.Yu),xt.snapshot}),function(ae,Oe,Le,It){return Q.apply(this,arguments)})(n,S,O,H);var Q};const s=yield H_(n.localStore,e,!0),u=new m0(e,s.Hi),d=u.ju(s.documents),m=ql.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);i(n,t,w.Yu);const E=new rT(e,t,u);return n.sc.set(e,E),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),w.snapshot}),Sp.apply(this,arguments)}function oT(n,e){return v0.apply(this,arguments)}function v0(){return v0=(0,ge.Z)(function*(n,e){const t=qe(n),r=t.sc.get(e),s=t.ic.get(r.targetId);if(s.length>1)return t.ic.set(r.targetId,s.filter(u=>!yh(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ru(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bp(t.remoteStore,r.targetId),Mp(t,r.targetId)}).catch(Js))):(Mp(t,r.targetId),yield ru(t.localStore,r.targetId,!0))}),v0.apply(this,arguments)}function nI(){return nI=(0,ge.Z)(function*(n,e,t){const r=Op(n);try{const s=yield function(u,d){const m=qe(u),w=xn.now(),E=d.reduce((H,Q)=>H.add(Q.key),Nt());let S,O;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let Q=Ui(),ae=Nt();return m.Gi.getEntries(H,E).next(Oe=>{Q=Oe,Q.forEach((Le,It)=>{It.isValidDocument()||(ae=ae.add(Le))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,Q)).next(Oe=>{S=Oe;const Le=[];for(const It of d){const Tt=h_(It,S.get(It.key).overlayedDocument);null!=Tt&&Le.push(new ta(It.key,Tt,SC(Tt.value.mapValue),In.exists(!0)))}return m.mutationQueue.addMutationBatch(H,w,Le,d)}).next(Oe=>{O=Oe;const Le=Oe.applyToLocalDocumentSet(S,ae);return m.documentOverlayCache.saveOverlays(H,Oe.batchId,Le)})}).then(()=>({batchId:O.batchId,changes:p_(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,m){let w=u.ac[u.currentUser.toKey()];w||(w=new Un(Et)),w=w.insert(d,m),u.ac[u.currentUser.toKey()]=w}(r,s.batchId,t),yield c(r,s.changes),yield ed(r.remoteStore)}catch(s){const u=td(s,"Failed to persist write");t.reject(u)}}),nI.apply(this,arguments)}function rI(n,e){return _0.apply(this,arguments)}function _0(){return _0=(0,ge.Z)(function*(n,e){const t=qe(n);try{const r=yield JA(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.uc.get(u);d&&(bt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.ec=!0:s.modifiedDocuments.size>0?bt(d.ec):s.removedDocuments.size>0&&(bt(d.ec),d.ec=!1))}),yield c(t,r,e)}catch(r){yield Js(r)}}),_0.apply(this,arguments)}function iI(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.sc.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let w=!1;m.queries.forEach((E,S)=>{for(const O of S.listeners)O.bu(d)&&(w=!0)}),w&&Qb(m)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sS(n,e,t){return oI.apply(this,arguments)}function oI(){return oI=(0,ge.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.uc.get(e),u=s&&s.key;if(u){let d=new Un(Ge.comparator);d=d.insert(u,yn.newNoDocument(u,vt.min()));const m=Nt().add(u),w=new bh(vt.min(),new Map,new dn(Et),d,m);yield rI(r,w),r.oc=r.oc.remove(u),r.uc.delete(e),a(r)}else yield ru(r.localStore,e,!1).then(()=>Mp(r,e,t)).catch(Js)}),oI.apply(this,arguments)}function aS(n,e){return sI.apply(this,arguments)}function sI(){return sI=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield GD(t.localStore,e);cI(t,r,null),uI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield c(t,s)}catch(s){yield Js(s)}}),sI.apply(this,arguments)}function uS(n,e,t){return w0.apply(this,arguments)}function w0(){return w0=(0,ge.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let E;return m.mutationQueue.lookupMutationBatch(w,d).next(S=>(bt(null!==S),E=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,E,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,E)).next(()=>m.localDocuments.getDocuments(w,E))})}(r.localStore,e);cI(r,e,t),uI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield c(r,s)}catch(s){yield Js(s)}}),w0.apply(this,arguments)}function aI(){return aI=(0,ge.Z)(function*(n,e){const t=qe(n);wc(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.hc.get(r)||[];s.push(e),t.hc.set(r,s)}catch(r){const s=td(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),aI.apply(this,arguments)}function uI(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function cI(n,e,t){const r=qe(n);let s=r.ac[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function Mp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||sT(n,r)})}function sT(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(bp(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),a(n))}function i(n,e,t){for(const r of t)r instanceof p0?(n.cc.addReference(r.key,e),o(n,r)):r instanceof g0?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||sT(n,r.key)):Je()}function o(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.rc.add(r),a(n))}function a(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(Wt.fromString(e)),r=n.lc.next();n.uc.set(r,new iT(t)),n.oc=n.oc.insert(t,r),ay(n.remoteStore,new Xa(wi(ph(t.path)),r,2,_i.at))}}function c(n,e,t){return l.apply(this,arguments)}function l(){return l=(0,ge.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],d=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,w)=>{d.push(r.dc(w,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,E.fromCache?"not-current":"current"),s.push(E);const S=xh.Ci(w.targetId,E);u.push(S)}}))}),yield Promise.all(d),r.nc.Wo(s),yield(m=(0,ge.Z)(function*(w,E){const S=qe(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>oe.forEach(E,H=>oe.forEach(H.Si,Q=>S.persistence.referenceDelegate.addReference(O,H.targetId,Q)).next(()=>oe.forEach(H.Di,Q=>S.persistence.referenceDelegate.removeReference(O,H.targetId,Q)))))}catch(O){if(!hs(O))throw O;Ne("LocalStore","Failed to update sequence numbers: "+O)}for(const O of E){const H=O.targetId;if(!O.fromCache){const Q=S.Ui.get(H),Oe=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);S.Ui=S.Ui.insert(H,Oe)}}}),function(w,E){return m.apply(this,arguments)})(r.localStore,u))}),l.apply(this,arguments)}function p(n,e){return v.apply(this,arguments)}function v(){return v=(0,ge.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield iy(t.localStore,e);t.currentUser=e,(s=t).hc.forEach(d=>{d.forEach(m=>{m.reject(new Me(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield c(t,r.ji)}var s}),v.apply(this,arguments)}function C(n,e){const t=qe(n),r=t.uc.get(e);if(r&&r.ec)return Nt().add(r.key);{let s=Nt();const u=t.ic.get(e);if(!u)return s;for(const d of u){const m=t.sc.get(d);s=s.unionWith(m.view.Qu)}return s}}function b(n,e){return T.apply(this,arguments)}function T(){return T=(0,ge.Z)(function*(n,e){const t=qe(n),r=yield H_(t.localStore,e.query,!0),s=e.view.Zu(r);return t.isPrimaryClient&&i(t,e.targetId,s.Yu),s}),T.apply(this,arguments)}function x(n,e){return R.apply(this,arguments)}function R(){return R=(0,ge.Z)(function*(n,e){const t=qe(n);return ZD(t.localStore,e).then(r=>c(t,r))}),R.apply(this,arguments)}function G(n,e,t,r){return X.apply(this,arguments)}function X(){return X=(0,ge.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(d,m){const w=qe(d),E=qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>E.Tn(S,m).next(O=>O?w.localDocuments.getDocuments(S,O):oe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield ed(s.remoteStore):"acknowledged"===t||"rejected"===t?(cI(s,e,r||null),uI(s,e),m=e,qe(qe(s.localStore).mutationQueue).An(m)):Je(),yield c(s,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),X.apply(this,arguments)}function ke(){return ke=(0,ge.Z)(function*(n,e){const t=qe(n);if(xp(t),Op(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield He(t,r.toArray());t.fc=!0,yield Kb(t.remoteStore,!0);for(const u of s)ay(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let s=Promise.resolve();t.ic.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(Mp(t,d),ru(t.localStore,d,!0))),bp(t.remoteStore,d)}),yield s,yield He(t,r),function(u){const d=qe(u);d.uc.forEach((m,w)=>{bp(d.remoteStore,w)}),d.cc.fs(),d.uc=new Map,d.oc=new Un(Ge.comparator)}(t),t.fc=!1,yield Kb(t.remoteStore,!1)}}),ke.apply(this,arguments)}function He(n,e,t){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,ge.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const d of e){let m;const w=r.ic.get(d);if(w&&0!==w.length){m=yield Oh(r.localStore,wi(w[0]));for(const E of w){const S=r.sc.get(E),O=yield b(r,S);O.snapshot&&u.push(O.snapshot)}}else{const E=yield WD(r.localStore,d);m=yield Oh(r.localStore,E),yield hy(r,ht(E),d,!1)}s.push(m)}return r.nc.Wo(u),s}),Xe.apply(this,arguments)}function ht(n){return o_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ae(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function _t(n,e,t,r){return Yt.apply(this,arguments)}function Yt(){return Yt=(0,ge.Z)(function*(n,e,t,r){const s=qe(n);if(s.fc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=s.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield ZD(s.localStore,NC(u[0])),m=bh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield c(s,d,m);break}case"rejected":yield ru(s.localStore,e,!0),Mp(s,e,r);break;default:Je()}}),Yt.apply(this,arguments)}function On(n,e,t){return ou.apply(this,arguments)}function ou(){return ou=(0,ge.Z)(function*(n,e,t){const r=xp(n);if(r.fc){for(const s of e){if(r.ic.has(s)){Ne("SyncEngine","Adding an already active target "+s);continue}const u=yield WD(r.localStore,s),d=yield Oh(r.localStore,u);yield hy(r,ht(u),d.targetId,!1),ay(r.remoteStore,d)}for(const s of t)r.ic.has(s)&&(yield ru(r.localStore,s,!1).then(()=>{bp(r.remoteStore,s),Mp(r,s)}).catch(Js))}}),ou.apply(this,arguments)}function xp(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sS.bind(null,e),e.nc.Wo=rS.bind(null,e.eventManager),e.nc._c=iS.bind(null,e.eventManager),e}function Op(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uS.bind(null,e),e}class fy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=Nh(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return HD(this.persistence,new B_,e.initialUser,this.It)}gc(e){return new jD(V_.Bs,this.It)}mc(e){return new sy}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class py extends fy{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield Op(r.Ec.syncEngine),yield ed(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return HD(this.persistence,new B_,e.initialUser,this.It)}Ic(e,t){return new FD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new Zv(t,this.persistence);return new Wv(e.asyncQueue,r)}gc(e){const t=ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bi.withCacheSize(this.cacheSizeBytes):Bi.DEFAULT;return new Mb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Fb(),wp(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new sy}}class b0 extends py{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const s=r.Ec.syncEngine;r.sharedClientState instanceof K_&&(r.sharedClientState.syncEngine={Fr:G.bind(null,s),$r:_t.bind(null,s),Br:On.bind(null,s),vi:Ae.bind(null,s),Or:x.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ge.Z)(function*(d){yield function we(n,e){return ke.apply(this,arguments)}(r.Ec.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}mc(e){const t=Fb();if(!K_.C(t))throw new Me(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new K_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Pp{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>iI(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=p.bind(null,r.syncEngine),yield Kb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eT}createDatastore(e){const t=Nh(e.databaseInfo.databaseId),r=new kb(e.databaseInfo);return new _c(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>iI(this.syncEngine,m,0),d=Nb.C()?new Nb:new YD,new e0(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,m,w,E){const S=new eI(r,s,u,d,m,w);return E&&(S.fc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=qe(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Cp(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gy(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Fh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Yx{constructor(e,t){this.bc=e,this.It=t,this.metadata=new pr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),s=Number(r);isNaN(s)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(s);return new tT(JSON.parse(u),t.length+s)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ge.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Qx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ge.Z)(function*(u,d){const m=qe(u),w=ip(m.It)+"/documents",E={documents:d.map(Q=>Ih(m.It,Q))},S=yield m.fo("BatchGetDocuments",w,E,d.length),O=new Map;S.forEach(Q=>{const ae=function nb(n,e){return"found"in e?function(t,r){bt(!!r.found);const s=gs(t,r.found.name),u=Sr(r.found.updateTime),d=new Ye({mapValue:{fields:r.found.fields}});return yn.newFoundDocument(s,u,d)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const s=gs(t,r.missing),u=Sr(r.readTime);return yn.newNoDocument(s,u)}(n,e):Je()}(m.It,Q);O.set(ae.key.toString(),ae)});const H=[];return d.forEach(Q=>{const ae=O.get(Q.toString());bt(!!ae),H.push(ae)}),H}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new f_(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(s,u){const d=qe(s),m=ip(d.It)+"/documents",w={writes:u.map(E=>Eh(d.It,E))};yield d.co("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?In.exists(!1):In.updateTime(t):In.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Me(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return In.updateTime(t)}return In.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jx{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new Q_(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ge.Z)(function*(){const t=new Qx(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Oc(u)}))}).catch(s=>{e.Oc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Zf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!GC(t)}return!1}}class Xx{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=fr.UNAUTHENTICATED,this.clientId=yC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ge.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=td(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function lS(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ge.Z)(function*(u){r.isEqual(u)||(yield iy(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),aT.apply(this,arguments)}function dS(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield cT(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>XD(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>XD(e.remoteStore,u)),n.onlineComponents=e}),uT.apply(this,arguments)}function cT(n){return lT.apply(this,arguments)}function lT(){return lT=(0,ge.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield lS(n,new fy)),n.offlineComponents}),lT.apply(this,arguments)}function lI(n){return dT.apply(this,arguments)}function dT(){return dT=(0,ge.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield dS(n,new Pp)),n.onlineComponents}),dT.apply(this,arguments)}function hS(n){return cT(n).then(e=>e.persistence)}function dI(n){return cT(n).then(e=>e.localStore)}function fS(n){return lI(n).then(e=>e.remoteStore)}function hT(n){return lI(n).then(e=>e.syncEngine)}function my(n){return fT.apply(this,arguments)}function fT(){return fT=(0,ge.Z)(function*(n){const e=yield lI(n),t=e.eventManager;return t.onListen=y0.bind(null,e.syncEngine),t.onUnlisten=oT.bind(null,e.syncEngine),t}),fT.apply(this,arguments)}function pS(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,d,m,w){const E=new Fh({next:O=>{u.enqueueAndForget(()=>kh(s,S));const H=O.docs.has(d);!H&&O.fromCache?w.reject(new Me(le.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&O.fromCache&&m&&"server"===m.source?w.reject(new Me(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),S=new dy(ph(d.path),E,{includeMetadataChanges:!0,Nu:!0});return Tp(s,S)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}function gS(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,d,m,w){const E=new Fh({next:O=>{u.enqueueAndForget(()=>kh(s,S)),O.fromCache&&"server"===m.source?w.reject(new Me(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),S=new dy(d,E,{includeMetadataChanges:!0,Nu:!0});return Tp(s,S)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}const mS=new Map;function pT(n,e,t){if(!t)throw new Me(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yS(n,e,t,r){if(!0===e&&!0===r)throw new Me(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vS(n){if(!Ge.isDocumentKey(n))throw new Me(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _S(n){if(Ge.isDocumentKey(n))throw new Me(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hI(n);throw new Me(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wS(n,e){if(e<=0)throw new Me(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class I0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zE;switch(t.type){case"gapi":return new gr(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mS.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),mS.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Ic extends Hi{constructor(e,t,r){super(e,t,ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ge(e))}withConverter(e){return new Ic(this.firestore,e,this._path)}}function gT(n,e,...t){if(n=(0,Xt.m9)(n),pT("collection","path",e),n instanceof I0){const r=Wt.fromString(e,...t);return _S(r),new Ic(n,null,r)}{if(!(n instanceof Bn||n instanceof Ic))throw new Me(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return _S(r),new Ic(n.firestore,null,r)}}function Np(n,e,...t){if(n=(0,Xt.m9)(n),1===arguments.length&&(e=yC.R()),pT("doc","path",e),n instanceof I0){const r=Wt.fromString(e,...t);return vS(r),new Bn(n,null,new Ge(r))}{if(!(n instanceof Bn||n instanceof Ic))throw new Me(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return vS(r),new Bn(n.firestore,n instanceof Ic?n.converter:null,new Ge(r))}}function bS(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),(n instanceof Bn||n instanceof Ic)&&(e instanceof Bn||e instanceof Ic)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IS(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&yh(n._query,e._query)&&n.converter===e.converter}class lO{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Q_(this,"async_queue_retry"),this.jc=()=>{const t=wp();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=wp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=wp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new pr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!hs(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Vn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const s=d0.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(s),s}Wc(){this.qc&&Je()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function mT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class dO{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qn extends I0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new lO,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||DS(this),this._firestoreClient.terminate()}}function ES(n,e){const t="object"==typeof n?n:(0,ja.getApp)(),r="string"==typeof n?n:e||"(default)";return(0,ja._getProvider)(t,"firestore").getImmediate({identifier:r})}function Or(n){return n._firestoreClient||DS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new XE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Xx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function TS(n,e,t){const r=new pr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield lS(n,t),yield dS(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(d=u).name?d.code===le.FAILED_PRECONDITION||d.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Ka("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function AS(n){if(n._initialized||n._terminated)throw new Me(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ec(mr.fromBase64String(e))}catch(t){throw new Me(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ec(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rp{constructor(e){this._methodName=e}}class fI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}const CO=/^__.*__$/;class bO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class SS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class pI{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new pI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return yI(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(MS(this.na)&&CO.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class IO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Nh(e)}fa(e,t,r,s=!1){return new pI({na:e,methodName:t,la:r,path:rr.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function kp(n){const e=n._freezeSettings(),t=Nh(n._databaseId);return new IO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gI(n,e,t,r,s,u={}){const d=n.fa(u.merge||u.mergeFields?2:0,e,t,s);wT("Data must be an object, but it was:",d,r);const m=PS(r,d);let w,E;if(u.merge)w=new lo(d.fieldMask),E=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const O of u.mergeFields){const H=CT(e,O,t);if(!d.contains(H))throw new Me(le.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);RS(S,H)||S.push(H)}w=new lo(S),E=d.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,E=d.fieldTransforms;return new bO(new Ye(m),w,E)}class E0 extends Rp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof E0}}function xS(n,e,t){return new pI({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class yT extends Rp{_toFieldTransform(e){return new ep(e.path,new ea)}isEqual(e){return e instanceof yT}}class EO extends Rp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=xS(this,e,!0),r=this.da.map(u=>Fp(u,t)),s=new Hl(r);return new ep(e.path,s)}isEqual(e){return this===e}}class DO extends Rp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=xS(this,e,!0),r=this.da.map(u=>Fp(u,t)),s=new Gl(r);return new ep(e.path,s)}isEqual(e){return this===e}}class TO extends Rp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new vh(e.It,c_(e.It,this._a));return new ep(e.path,t)}isEqual(e){return this===e}}function vT(n,e,t,r){const s=n.fa(1,e,t);wT("Data must be an object, but it was:",s,r);const u=[],d=Ye.empty();ac(r,(w,E)=>{const S=mI(e,w,t);E=(0,Xt.m9)(E);const O=s.ua(S);if(E instanceof E0)u.push(S);else{const H=Fp(E,O);null!=H&&(u.push(S),d.set(S,H))}});const m=new lo(u);return new SS(d,m,s.fieldTransforms)}function _T(n,e,t,r,s,u){const d=n.fa(1,e,t),m=[CT(e,r,t)],w=[s];if(u.length%2!=0)throw new Me(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(CT(e,u[H])),w.push(u[H+1]);const E=[],S=Ye.empty();for(let H=m.length-1;H>=0;--H)if(!RS(E,m[H])){const Q=m[H];let ae=w[H];ae=(0,Xt.m9)(ae);const Oe=d.ua(Q);if(ae instanceof E0)E.push(Q);else{const Le=Fp(ae,Oe);null!=Le&&(E.push(Q),S.set(Q,Le))}}const O=new lo(E);return new SS(S,O,d.fieldTransforms)}function OS(n,e,t,r=!1){return Fp(t,n.fa(r?4:3,e))}function Fp(n,e){if(NS(n=(0,Xt.m9)(n)))return wT("Unsupported field value:",e,n),PS(n,e);if(n instanceof Rp)return function(t,r){if(!MS(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let m=Fp(d,r.ca(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return c_(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=xn.fromDate(t);return{timestampValue:Zl(r.It,s)}}if(t instanceof xn){const s=new xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zl(r.It,s)}}if(t instanceof fI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ec)return{bytesValue:JC(r.It,t._byteString)};if(t instanceof Bn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${hI(t)}`)}(n,e)}function PS(n,e){const t={};return Yv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ac(n,(r,s)=>{const u=Fp(s,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function NS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof xn||n instanceof fI||n instanceof Ec||n instanceof Bn||n instanceof Rp)}function wT(n,e,t){if(!NS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hI(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function CT(n,e,t){if((e=(0,Xt.m9)(e))instanceof nd)return e._internalPath;if("string"==typeof e)return mI(n,e);throw yI("Field path arguments must be of type string or ",n,!1,void 0,t)}const AO=new RegExp("[~\\*/\\[\\]]");function mI(n,e,t){if(e.search(AO)>=0)throw yI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nd(...e.split("."))._internalPath}catch{throw yI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yI(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${s}`),w+=")"),new Me(le.INVALID_ARGUMENT,m+n+w)}function RS(n,e){return n.some(t=>t.isEqual(e))}class D0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SO extends D0{data(){return super.data()}}function vI(n,e){return"string"==typeof e?mI(n,e):e instanceof nd?e._internalPath:e._delegate._internalPath}class Lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rd extends D0{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new T0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class T0 extends rd{data(e={}){return super.data(e)}}class Lh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Lp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new T0(this._firestore,this._userDataWriter,r.key,r,new Lp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new T0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Lp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const m=new T0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Lp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,E=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),E=u.indexOf(d.doc.key)),{type:MO(d.type),doc:m,oldIndex:w,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function kS(n,e){return n instanceof rd&&e instanceof rd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lh&&e instanceof Lh&&n._firestore===e._firestore&&IS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function FS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A0{}function Vh(n,...e){for(const t of e)n=t._apply(n);return n}class xO extends A0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=kp(e.firestore),r=function(s,u,d,m,w,E,S){let O;if(w.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Me(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){$S(S,E);const Q=[];for(const ae of S)Q.push(jS(m,s,ae));O={arrayValue:{values:Q}}}else O=jS(m,s,S)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||$S(S,E),O=OS(d,"where",S,"in"===E||"not-in"===E);const H=$r.create(w,E,O);return function(Q,ae){if(ae.dt()){const Le=s_(Q);if(null!==Le&&!Le.isEqual(ae.field))throw new Me(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ae.field.toString()}'`);const It=jl(Q);null!==It&&HS(0,ae.field,It)}const Oe=function(Le,It){for(const Tt of Le.filters)if(It.indexOf(Tt.op)>=0)return Tt.op;return null}(Q,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Oe)throw new Me(le.INVALID_ARGUMENT,Oe===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Oe.toString()}' filters.`)}(s,H),H}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Hi(e.firestore,e.converter,function(s,u){const d=s.filters.concat([u]);return new Xs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),d,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class PO extends A0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Me(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new fh(s,u);return function(m,w){if(null===jl(m)){const E=s_(m);null!==E&&HS(0,E,w.field)}}(r,d),d}(e._query,this.wa,this.ya);return new Hi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Xs(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class LS extends A0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Hi(e.firestore,e.converter,Xf(e._query,this.pa,this.Ia))}}class VS extends A0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=BS(e,this.type,this.Ta,this.Ea);return new Hi(e.firestore,e.converter,(s=t,new Xs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class US extends A0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=BS(e,this.type,this.Ta,this.Ea);return new Hi(e.firestore,e.converter,(s=t,new Xs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function BS(n,e,t,r){if(t[0]=(0,Xt.m9)(t[0]),t[0]instanceof D0)return function(s,u,d,m,w){if(!m)throw new Me(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const E=[];for(const S of mh(s))if(S.field.isKeyField())E.push(dc(u,m.key));else{const O=m.data.field(S.field);if(Qv(O))throw new Me(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const H=S.field.canonicalString();throw new Me(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}E.push(O)}return new fc(E,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=kp(n.firestore);return function(u,d,m,w,E,S){const O=u.explicitOrderBy;if(E.length>O.length)throw new Me(le.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Q=0;Q<E.length;Q++){const ae=E[Q];if(O[Q].field.isKeyField()){if("string"!=typeof ae)throw new Me(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ae}`);if(!a_(u)&&-1!==ae.indexOf("/"))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ae}' contains a slash.`);const Oe=u.path.child(Wt.fromString(ae));if(!Ge.isDocumentKey(Oe))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Le=new Ge(Oe);H.push(dc(d,Le))}else{const Oe=OS(m,w,ae);H.push(Oe)}}return new fc(H,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function jS(n,e,t){if("string"==typeof(t=(0,Xt.m9)(t))){if(""===t)throw new Me(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a_(e)&&-1!==t.indexOf("/"))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!Ge.isDocumentKey(r))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new Ge(r))}if(t instanceof Bn)return dc(n,t._key);throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hI(t)}.`)}function $S(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function HS(n,e,t){if(!t.isEqual(e))throw new Me(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const BO={maxAttempts:5};class bT{convertValue(e,t="none"){switch(lc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return ac(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new fI(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=IC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wf(e));default:return null}}convertTimestamp(e){const t=uc(e);return new xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);bt(ib(r));const s=new cc(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||Vn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function _I(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jO extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class GS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kp(e)}set(e,t,r){this._verifyNotCommitted();const s=Uh(e,this._firestore),u=_I(s.converter,t,r),d=gI(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,In.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Uh(e,this._firestore);let d;return d="string"==typeof(t=(0,Xt.m9)(t))||t instanceof nd?_T(this._dataReader,"WriteBatch.update",u._key,t,r,s):vT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,In.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uh(e,this._firestore);return this._mutations=this._mutations.concat(new pc(t._key,In.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uh(n,e){if((n=(0,Xt.m9)(n)).firestore!==e)throw new Me(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function zS(n){n=Qt(n,Bn);const e=Qt(n.firestore,Qn);return pS(Or(e),n._key).then(t=>DT(e,n,t))}class Vp extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function qS(n){n=Qt(n,Hi);const e=Qt(n.firestore,Qn),t=Or(e),r=new Vp(e);return FS(n._query),gS(t,n._query).then(s=>new Lh(e,r,n,s))}function IT(n,e,t){n=Qt(n,Bn);const r=Qt(n.firestore,Qn),s=_I(n.converter,e,t);return yy(r,[gI(kp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,In.none())])}function ET(n,e,t,...r){n=Qt(n,Bn);const s=Qt(n.firestore,Qn),u=kp(s);let d;return d="string"==typeof(e=(0,Xt.m9)(e))||e instanceof nd?_T(u,"updateDoc",n._key,e,t,r):vT(u,"updateDoc",n._key,e),yy(s,[d.toMutation(n._key,In.exists(!0))])}function WS(n,...e){var t,r,s;n=(0,Xt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||mT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(mT(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[d+2]=null===(s=O.complete)||void 0===s?void 0:s.bind(O)}let w,E,S;if(n instanceof Bn)E=Qt(n.firestore,Qn),S=ph(n._key.path),w={next:O=>{e[d]&&e[d](DT(E,n,O))},error:e[d+1],complete:e[d+2]};else{const O=Qt(n,Hi);E=Qt(O.firestore,Qn),S=O._query;const H=new Vp(E);w={next:Q=>{e[d]&&e[d](new Lh(E,H,O,Q))},error:e[d+1],complete:e[d+2]},FS(n._query)}return function(O,H,Q,ae){const Oe=new Fh(ae),Le=new dy(H,Oe,Q);return O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Tp(yield my(O),Le)})),()=>{Oe.Rc(),O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return kh(yield my(O),Le)}))}}(Or(E),S,m,w)}function yy(n,e){return function(t,r){const s=new pr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function oS(n,e,t){return nI.apply(this,arguments)}(yield hT(t),r,s)})),s.promise}(Or(n),e)}function DT(n,e,t){const r=t.docs.get(e._key),s=new Vp(n);return new rd(n,s,e._key,r,new Lp(t.hasPendingWrites,t.fromCache),e.converter)}class KO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kp(e)}get(e){const t=Uh(e,this._firestore),r=new jO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Je();const u=s[0];if(u.isFoundDocument())return new D0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new D0(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const s=Uh(e,this._firestore),u=_I(s.converter,t,r),d=gI(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=Uh(e,this._firestore);let d;return d="string"==typeof(t=(0,Xt.m9)(t))||t instanceof nd?_T(this._dataReader,"Transaction.update",u._key,t,r,s):vT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Uh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uh(e,this._firestore),r=new Vp(this._firestore);return super.get(e).then(s=>new rd(this._firestore,r,t._key,s._document,new Lp(!1,!1),t.converter))}}function ZS(...n){return new EO("arrayUnion",n)}!function(n,e=!0){Pl=ja.SDK_VERSION,(0,ja._registerComponent)(new Tf.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),d=new Qn(new gC(t.getProvider("auth-internal")),new ZE(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Me(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,ja.registerVersion)(Bv,"3.5.0",n),(0,ja.registerVersion)(Bv,"3.5.0","esm2017")}();var wI=k(5867);const CI_firebaseConfig={apiKey:"AIzaSyCzOvmy4B3RLxMbFbX2B3BUkCWRGwCKUvM",authDomain:"car-app-35313.firebaseapp.com",projectId:"car-app-35313",storageBucket:"car-app-35313.appspot.com",messagingSenderId:"94703992749",appId:"1:94703992749:web:6e53d2fad27d3f2763eb24",measurementId:"G-QYNH698LJT"};let S0=(()=>{class n{constructor(){this.app=(0,wI.ZF)(CI_firebaseConfig),this.db=ES(this.app)}addData(t){var r=this;return(0,ge.Z)(function*(){yield IT(Np(r.db,"cars",t.name+" "+t.year+"p"),{car:t})})()}addDetails(t){var r=this;return(0,ge.Z)(function*(){const s=Np(r.db,"cars",r.car.name+" "+r.car.year+"p");yield ET(s,{detail:ZS(t)})})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tP{constructor(){}}let TT=(()=>{class n{constructor(t){this.serviceToFirestore=t,this.app=(0,wI.ZF)(CI_firebaseConfig),this.db=ES(this.app),this.carDetails=[],this.cars=[],this.getCars()}getData(t){var r=this;return(0,ge.Z)(function*(){const s=Np(r.db,"cars",t.name+" "+t.year+"p"),u=yield zS(s);r.carDetails.push(u.data())})()}getCars(){var t=this;return(0,ge.Z)(function*(){(yield qS(gT(t.db,"cars"))).forEach(s=>{if(s){const u=new tP;u.name=s.data().car.name,u.year=s.data().car.year,u.color=s.data().car.color,u.info=s.data().car.info,u.photo=s.data().car.photo,t.cars.push(u)}})})()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(S0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nP(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",5)(1,"p",6),f._uU(2),f.qZA(),f.TgZ(3,"p"),f._uU(4),f.qZA(),f.TgZ(5,"button",7),f.NdJ("click",function(){const u=f.CHM(t).$implicit,d=f.oxw();return f.KtG(d.showWindow(u))}),f._uU(6,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u0438 \u0434\u0430\u043d\u0456"),f.qZA(),f.TgZ(7,"button",7),f.NdJ("click",function(){const u=f.CHM(t).$implicit,d=f.oxw();return f.KtG(d.showWatchCar(u))}),f._uU(8,"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u043d\u0443\u0442\u0438 \u0434\u0430\u043d\u0456"),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(2),f.AsE('\u0410\u0432\u0442\u043e: "',t.name,'" ',t.year," \u0440\u043e\u043a\u0443 \u0432\u0438\u043f\u0443\u0441\u043a\u0443"),f.xp6(2),f.Oqu(t.info)}}function rP(n,e){1&n&&f._UZ(0,"add-details-window")}function iP(n,e){1&n&&f._UZ(0,"app-watch-car")}let bI=(()=>{class n{constructor(t,r){this.serviceToFirestoreService=t,this.serviceFromFirestoreService=r,this.cars=this.serviceFromFirestoreService.cars}ngOnInit(){}showWindow(t){this.activWindow=!0,this.serviceToFirestoreService.car=t}showWatchCar(t){this.activWatchCar=!0,this.serviceToFirestoreService.car=t}searchCar(t){var r=this;return(0,ge.Z)(function*(){const s=t.target.value;"string"==typeof s&&(r.cars=r.serviceFromFirestoreService.cars.filter(u=>u.name.toLowerCase().includes(s.toLowerCase())))})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(S0),f.Y36(TT))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-search"]],decls:7,vars:3,consts:[[1,"search-container"],["for","search",1,"label"],["type","text","name","search",1,"input","header-input",3,"keyup"],["class","car-show",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"car-show"],[1,"title"],[1,"add-info","btn",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"label",1),f._uU(2,"\u0417\u043d\u0430\u0439\u0442\u0438 \u0430\u0432\u0442\u043e:"),f.qZA(),f.TgZ(3,"input",2),f.NdJ("keyup",function(u){return r.searchCar(u)}),f.qZA(),f.YNc(4,nP,9,3,"div",3),f.YNc(5,rP,1,0,"add-details-window",4),f.YNc(6,iP,1,0,"app-watch-car",4),f.qZA()),2&t&&(f.xp6(4),f.Q6J("ngForOf",r.cars),f.xp6(1),f.Q6J("ngIf",r.activWindow),f.xp6(1),f.Q6J("ngIf",r.activWatchCar))},styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})(),YS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Up=(()=>{class n extends YS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Dc=new f.OlP("NgValueAccessor"),aP={provide:Dc,useExisting:(0,f.Gpc)(()=>M0),multi:!0},cP=new f.OlP("CompositionEventMode");let M0=(()=>{class n extends YS{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function uP(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(cP,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([aP]),f.qOj]}),n})();function Bh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function JS(n){return null!=n&&"number"==typeof n.length}const Gi=new f.OlP("NgValidators"),jh=new f.OlP("NgAsyncValidators"),dP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bp{static min(e){return function XS(n){return e=>{if(Bh(e.value)||Bh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function eM(n){return e=>{if(Bh(e.value)||Bh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function tM(n){return Bh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function nM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function rM(n){return Bh(n.value)||dP.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function iM(n){return e=>Bh(e.value)||!JS(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function oM(n){return e=>JS(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sM(n){if(!n)return II;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Bh(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return hM(e)}static composeAsync(e){return fM(e)}}function II(n){return null}function aM(n){return null!=n}function uM(n){return(0,f.QGY)(n)?(0,rn.D)(n):n}function cM(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function lM(n,e){return e.map(t=>t(n))}function dM(n){return n.map(e=>function hP(n){return!n.validate}(e)?e:t=>e.validate(t))}function hM(n){if(!n)return null;const e=n.filter(aM);return 0==e.length?null:function(t){return cM(lM(t,e))}}function AT(n){return null!=n?hM(dM(n)):null}function fM(n){if(!n)return null;const e=n.filter(aM);return 0==e.length?null:function(t){return function oP(...n){const e=(0,di.jO)(n),{args:t,keys:r}=Sa(n),s=new Ir.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,E=d;for(let S=0;S<d;S++){let O=!1;(0,No.Xf)(t[S]).subscribe((0,qn.x)(u,H=>{O||(O=!0,E--),m[S]=H},()=>w--,void 0,()=>{(!w||!O)&&(E||u.next(r?ks(r,m):m),u.complete())}))}});return e?s.pipe(xa(e)):s}(lM(t,e).map(uM)).pipe((0,it.U)(cM))}}function ST(n){return null!=n?fM(dM(n)):null}function pM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gM(n){return n._rawValidators}function mM(n){return n._rawAsyncValidators}function MT(n){return n?Array.isArray(n)?n:[n]:[]}function EI(n,e){return Array.isArray(n)?n.includes(e):n===e}function yM(n,e){const t=MT(e);return MT(n).forEach(s=>{EI(t,s)||t.push(s)}),t}function vM(n,e){return MT(e).filter(t=>!EI(n,t))}class _M{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ST(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fo extends _M{get formDirective(){return null}get path(){return null}}class $h extends _M{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let xT=(()=>{class n extends wM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($h,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),OT=(()=>{class n extends wM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(fo,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const x0="VALID",TI="INVALID",vy="PENDING",O0="DISABLED";function kT(n){return(AI(n)?n.validators:n)||null}function bM(n){return Array.isArray(n)?AT(n):n||null}function FT(n,e){return(AI(e)?e.asyncValidators:n)||null}function IM(n){return Array.isArray(n)?ST(n):n||null}function AI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function EM(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function DM(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new f.vHH(1002,"")})}class SI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=bM(this._rawValidators),this._composedAsyncValidatorFn=IM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===x0}get invalid(){return this.status===TI}get pending(){return this.status==vy}get disabled(){return this.status===O0}get enabled(){return this.status!==O0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=bM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=IM(e)}addValidators(e){this.setValidators(yM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vM(e,this._rawAsyncValidators))}hasValidator(e){return EI(this._rawValidators,e)}hasAsyncValidator(e){return EI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=O0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=x0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===x0||this.status===vy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?O0:x0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vy,this._hasOwnPendingAsyncValidator=!0;const t=uM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?O0:this.errors?TI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vy)?vy:this._anyControlsHaveStatus(TI)?TI:x0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class _y extends SI{constructor(e,t,r){super(kT(t),FT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){DM(this,0,e),Object.keys(e).forEach(r=>{EM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class TM extends _y{}function P0(n,e){LT(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function wP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&AM(n,e)})}(n,e),function bP(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function CP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&AM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function _P(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),PI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function OI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LT(n,e){const t=gM(n);null!==e.validator?n.setValidators(pM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=mM(n);null!==e.asyncValidator?n.setAsyncValidators(pM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();OI(e._rawValidators,s),OI(e._rawAsyncValidators,s)}function PI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=gM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=mM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return OI(e._rawValidators,r),OI(e._rawAsyncValidators,r),t}function AM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function PM(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Tc=class extends SI{constructor(e=null,t,r){super(kT(t),FT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),AI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=PM(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){PM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let jT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const OP={provide:Dc,useExisting:(0,f.Gpc)(()=>$T),multi:!0};let $T=(()=>{class n extends Up{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([OP]),f.qOj]}),n})(),LM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const HT=new f.OlP("NgModelWithFormControlWarning"),FP={provide:fo,useExisting:(0,f.Gpc)(()=>R0)};let R0=(()=>{class n extends fo{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(PI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return P0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){xI(t.control||null,t,!1),function TP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function xM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(xI(r||null,t),(n=>n instanceof Tc)(s)&&(P0(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function SM(n,e){LT(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function IP(n,e){return PI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LT(this.form,this),this._oldForm&&PI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Gi,10),f.Y36(jh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([FP]),f.qOj,f.TTD]}),n})();const UP={provide:$h,useExisting:(0,f.Gpc)(()=>NI)};let NI=(()=>{class n extends $h{constructor(t,r,s,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function UT(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===M0?t=u:function DP(n){return Object.getPrototypeOf(n.constructor)===Up}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function VT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function MI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(fo,13),f.Y36(Gi,10),f.Y36(jh,10),f.Y36(Dc,10),f.Y36(HT,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([UP]),f.qOj,f.TTD]}),n})(),XM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[LM]}),n})(),e1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[XM]}),n})(),ex=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:HT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[XM]}),n})();class tx extends SI{constructor(e,t,r){super(kT(t),FT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){DM(this,0,e),e.forEach((r,s)=>{EM(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function nx(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let t1=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return nx(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new _y(s,u)}record(t,r=null){const s=this._reduceControls(t);return new TM(s,r)}control(t,r,s){let u={};return this.useNonNullable?(nx(r)?u=r:(u.validators=r,u.asyncValidators=s),new Tc(t,{...u,nonNullable:!0})):new Tc(t,r,s)}array(t,r,s){const u=t.map(d=>this._createControl(d));return new tx(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof Tc||t instanceof SI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:ex}),n})();function n1(n,e){1&n&&(f.TgZ(0,"span",21),f._uU(1,"* \u041f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0437\u0430\u043f\u043e\u0432\u043d\u0438\u0442\u0438 \u0443\u0441\u0456 \u043f\u043e\u043b\u044f"),f.qZA())}function r1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"article")(1,"div",22)(2,"p",23),f._uU(3,"\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0456\u043b\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),f.qZA(),f.TgZ(4,"button",24),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.alertWindowClose())}),f._uU(5,"Ok"),f.qZA()()()}}const i1=[{path:"search",component:bI},{path:"add-car",component:(()=>{class n{constructor(t){this.service=t,this.active=!1,this.form=new _y({name:new Tc("",Bp.required),color:new Tc("",Bp.required),year:new Tc("",Bp.required),info:new Tc("",Bp.required),photo:new Tc("")})}ngOnInit(){}submit(){this.url&&(this.form.value.photo=this.url,console.log("this.form.value.photo",this.form.value.photo));const t=this.form.value;this.service.car=t,this.service.addData(t),this.url=void 0,this.form.reset(),this.alertWindowOpen()}addPhoto(t){if(t.target.files[0]&&null!=t.target.files[0].type.match(/image\/*/)){let r=new FileReader;r.readAsDataURL(t.target.files[0]),r.onload=s=>{this.url=s.target.result}}}alertWindowOpen(){this.active=!0}alertWindowClose(){this.active=!1}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(S0))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-add-car"]],decls:31,vars:5,consts:[[1,"add-car-form",3,"formGroup","ngSubmit"],[1,"name-color-year"],[1,"div"],["for","name"],["type","text","name","name","formControlName","name",1,"input"],["for","color"],["type","text","name","color","formControlName","color",1,"input"],["for","year"],["type","number","name","color","formControlName","year",1,"input"],[1,"image-box"],[1,"add-photo-text"],["type","file","accept","image/*","formControlName","photo","multiple","",1,"input-file",3,"change"],["file",""],["type","button",1,"add-photo-btn","btn",3,"click"],["alt","\u0444\u043e\u0442\u043e \u043d\u0435 \u043f\u0440\u0438\u043a\u0440\u0456\u043f\u043b\u0435\u043d\u0435",1,"add-car-photo",3,"src"],[1,"form-group"],["for","details"],["name","details","cols","30","rows","10","formControlName","info","placeholder","\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u044e\u0434\u0438 \u0431\u0443\u0434\u044c-\u044f\u043a\u0456 \u0434\u0430\u043d\u0456 \u043f\u0440\u043e \u0430\u0432\u0442\u043e, \u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u0432\u0456\u043d\u043a\u043e\u0434 \u0430\u0432\u0442\u043e, \u043d\u043e\u043c\u0435\u0440\u043d\u0438\u0439 \u0437\u043d\u0430\u043a, \u043c\u043e\u0434\u0438\u0444\u0456\u043a\u0430\u0446\u0456\u044f \u0434\u0432\u0438\u0433\u0443\u043d\u0430",1,"textarea"],["type","submit",1,"btn","add-car-submit",3,"disabled"],["class","err",4,"ngIf"],[4,"ngIf"],[1,"err"],[1,"alert-window"],[1,"add-car-window-p"],[1,"btn",3,"click"]],template:function(t,r){if(1&t){const s=f.EpF();f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.submit()}),f.TgZ(1,"div",1)(2,"div",2)(3,"label",3),f._uU(4,"\u041d\u0430\u0437\u0432\u0430 \u0430\u0432\u0442\u043e: "),f.qZA(),f._UZ(5,"input",4),f.qZA(),f.TgZ(6,"div")(7,"label",5),f._uU(8,"\u041a\u043e\u043b\u0456\u0440: "),f.qZA(),f._UZ(9,"input",6),f.qZA(),f.TgZ(10,"div")(11,"label",7),f._uU(12,"\u0420\u0456\u043a \u0432\u0438\u043f\u0443\u0441\u043a\u0443: "),f.qZA(),f._UZ(13,"input",8),f.qZA()(),f.TgZ(14,"div",9)(15,"p",10),f._uU(16,"\u0424\u043e\u0442\u043e \u043f\u043e\u0432\u0438\u043d\u043d\u043e \u0431\u0443\u0442\u0438 \u043c\u0435\u043d\u0448\u0438\u043c 1\u041c\u0431 \u0442\u0430 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u0442\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0443 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0456\u0457:"),f.qZA(),f.TgZ(17,"input",11,12),f.NdJ("change",function(d){return r.addPhoto(d)}),f.qZA(),f.TgZ(19,"button",13),f.NdJ("click",function(){f.CHM(s);const d=f.MAs(18);return f.KtG(d.click())}),f._uU(20,"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e"),f.qZA(),f._UZ(21,"img",14),f.qZA(),f.TgZ(22,"div",15)(23,"label",16),f._uU(24,"\u041e\u043f\u0438\u0441 \u0430\u0432\u0442\u043e"),f.qZA(),f.TgZ(25,"textarea",17),f._uU(26,"asd"),f.qZA()(),f.TgZ(27,"button",18),f._uU(28,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u0438 \u0430\u0432\u0442\u043e"),f.qZA(),f.YNc(29,n1,2,0,"span",19),f.qZA(),f.YNc(30,r1,6,0,"article",20)}2&t&&(f.Q6J("formGroup",r.form),f.xp6(21),f.s9C("src",r.url,f.LSH),f.xp6(6),f.Q6J("disabled",!r.form.valid),f.xp6(2),f.Q6J("ngIf",!r.form.valid),f.xp6(1),f.Q6J("ngIf",r.active))},dependencies:[An,jT,M0,$T,xT,OT,R0,NI],styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})()},{path:"contact",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"span"),f._uU(1,"email: saz9002@gmail.com"),f.qZA())},styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})()}];let o1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Dw.forRoot(i1),Dw]}),n})(),s1=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-main"]],decls:2,vars:0,consts:[[1,"main"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"router-outlet"),f.qZA())},dependencies:[g],styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})();const a1=function(){return["/search"]},u1=function(){return["/add-car"]},c1=function(){return["/contact"]};let l1=(()=>{class n{constructor(t){this.serviceFromFirestore=t}ngOnInit(){return(0,ge.Z)(function*(){})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(TT))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-header"]],decls:12,vars:6,consts:[[1,"container"],[1,"search"],[1,"btn","header-btn",3,"routerLink"],[1,"add-car"],[1,"contact"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"header")(2,"div",1)(3,"button",2),f._uU(4,"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434 \u0434\u0430\u043d\u0438\u0445 \u0430\u0432\u0442\u043e"),f.qZA()(),f.TgZ(5,"div",3)(6,"button",2),f._uU(7,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u0438 \u0430\u0432\u0442\u043e"),f.qZA()(),f.TgZ(8,"div",4)(9,"button",2),f._uU(10,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"),f.qZA()()(),f._UZ(11,"app-main"),f.qZA()),2&t&&(f.xp6(3),f.Q6J("routerLink",f.DdM(3,a1)),f.xp6(3),f.Q6J("routerLink",f.DdM(4,u1)),f.xp6(3),f.Q6J("routerLink",f.DdM(5,c1)))},dependencies:[Jd,s1],styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})(),d1=(()=>{class n{constructor(){this.title="car-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"app-header")},dependencies:[l1],styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})();var su=k(2011),h1=k(4986),bi=k(5813);function KT(){return(0,hr.e)((n,e)=>{let t,r=!1;n.subscribe((0,qn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function p1(n,e){return n===e}k(2476);var g1=k(3942);function YT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rx(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function ix(){if(!function QE(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}class k0{constructor(e){this._delegate=e}static fromBase64String(e){return ix(),new k0(Ec.fromBase64String(e))}static fromUint8Array(e){return rx(),new k0(Ec.fromUint8Array(e))}toBase64(){return ix(),this._delegate.toBase64()}toUint8Array(){return rx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function QT(n){return function v1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _1{enableIndexedDbPersistence(e,t){return function fO(n,e){AS(n=Qt(n,Qn));const t=Or(n),r=n._freezeSettings(),s=new Pp;return TS(t,s,new py(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function pO(n){AS(n=Qt(n,Qn));const e=Or(n),t=n._freezeSettings(),r=new Pp;return TS(e,r,new b0(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gO(n){if(n._initialized&&!n._terminated)throw new Me(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!ds.C())return Promise.resolve();const s=r+"main";yield ds.delete(s)}),function(r){return t.apply(this,arguments)})(ry(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ox{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof cc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ka("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function uO(n,e,t,r={}){var s;const u=(n=Qt(n,I0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ka("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=fr.MOCK_USER;else{d=(0,Xt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Me(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new fr(w)}n._authCredentials=new qE(new GE(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function yO(n){return function eO(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield hS(n),t=yield fS(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s._u.delete(0),ho(s)}(t)}))}(Or(n=Qt(n,Qn)))}(this._delegate)}disableNetwork(){return function vO(n){return function tO(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield hS(n),t=yield fS(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(s){const u=qe(s);u._u.add(0),yield Cp(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Or(n=Qt(n,Qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mO(n){return function(e){const t=new pr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function cS(n,e){return aI.apply(this,arguments)}(yield hT(e),t)})),t.promise}(Or(n=Qt(n,Qn)))}(this._delegate)}onSnapshotsInSync(e){return function ZO(n,e){return function iO(n,e){const t=new Fh(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield my(n),s=t,qe(r).Ru.add(s),void s.next();var r,s})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield my(n),s=t,void qe(r).Ru.delete(s);var r,s}))}}(Or(n=Qt(n,Qn)),mT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wy(this,gT(this._delegate,e))}catch(t){throw po(t,"collection()","Firestore.collection()")}}doc(e){try{return new oa(this,Np(this._delegate,e))}catch(t){throw po(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new go(this,function cO(n,e){if(n=Qt(n,I0),pT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(t=e,new Xs(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw po(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function YO(n,e,t){n=Qt(n,Qn);const r=Object.assign(Object.assign({},BO),t);return function(s){if(s.maxAttempts<1)throw new Me(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function oO(n,e,t){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const s=yield(u=n,lI(u).then(d=>d.datastore));var u;new Jx(n.asyncQueue,s,t,e,r).run()})),r.promise}(Or(n),s=>e(new KO(n,s)),r)}(this._delegate,t=>e(new sx(this,t)))}batch(){return Or(this._delegate),new ax(new GS(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function _O(n,e){const t=Or(n=Qt(n,Qn)),r=new dO;return function sO(n,e,t,r){const s=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,E){if(w instanceof Uint8Array)return gy(w,E);if(w instanceof ArrayBuffer)return gy(new Uint8Array(w),E);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Yx(w,d);var w}(t,Nh(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function C0(n,e,t){const r=qe(n);var s;(s=(0,ge.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(H,Q){const ae=qe(H),Oe=Sr(Q.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Le=>ae.Ns.getBundleMetadata(Le,Q.id)).then(Le=>!!Le&&Le.createTime.compareTo(Oe)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(Xb(w));const E=new nT(w,u.localStore,d.It);let S=yield d.wc();for(;S;){const H=yield E.Ou(S);H&&m._updateProgress(H),S=yield d.wc()}const O=yield E.complete();return yield c(u,O.Bu,void 0),yield function(H,Q){const ae=qe(H);return ae.persistence.runTransaction("Save bundle","readwrite",Oe=>ae.Ns.saveBundleMetadata(Oe,Q))}(u.localStore,w),m._completeWith(O.progress),Promise.resolve(O.$u)}catch(w){return Ka("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,d,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield hT(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function wO(n,e){return function aO(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield dI(n),e)}))}(Or(n=Qt(n,Qn)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new go(this,t):null)}}class RI extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new k0(new Ec(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return oa.forKey(t,this.firestore,null)}}class sx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new RI(e)}get(e){const t=Hp(e);return this._delegate.get(t).then(r=>new F0(this._firestore,new rd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Hp(e);return r?(YT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}}class ax{constructor(e){this._delegate=e}set(e,t,r){const s=Hp(e);return r?(YT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $p{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new T0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new L0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$p.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new $p(e,new RI(e),t),s.set(t,u)),u}}$p.INSTANCES=new WeakMap;class oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new oa(t,new Bn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new oa(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wy(this.firestore,gT(this._delegate,e))}catch(t){throw po(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Xt.m9)(e))instanceof Bn&&bS(this._delegate,e)}set(e,t){t=YT("DocumentReference.set",t);try{return t?IT(this._delegate,e,t):IT(this._delegate,e)}catch(r){throw po(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ET(this._delegate,e):ET(this._delegate,e,t,...r)}catch(s){throw po(s,"updateDoc()","DocumentReference.update()")}}delete(){return function qO(n){return yy(Qt(n.firestore,Qn),[new pc(n._key,In.none())])}(this._delegate)}onSnapshot(...e){const t=ux(e),r=cx(e,s=>new F0(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return WS(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function $O(n){n=Qt(n,Bn);const e=Qt(n.firestore,Qn),t=Or(e),r=new Vp(e);return function nO(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,d){try{const m=yield function(w,E){const S=qe(w);return S.persistence.runTransaction("read document","readonly",O=>S.localDocuments.getDocument(O,E))}(s,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=td(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(s,u,d){return r.apply(this,arguments)})(yield dI(n),e,t);var r})),t.promise}(t,n._key).then(s=>new rd(e,r,n._key,s,new Lp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HO(n){n=Qt(n,Bn);const e=Qt(n.firestore,Qn);return pS(Or(e),n._key,{source:"server"}).then(t=>DT(e,n,t))}(this._delegate):zS(this._delegate),t.then(r=>new F0(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new oa(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function po(n,e,t){return n.message=n.message.replace(e,t),n}function ux(n){for(const e of n)if("object"==typeof e&&!QT(e))return e;return{}}function cx(n,e){var t,r;let s;return s=QT(n[0])?n[0]:QT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class F0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kS(this._delegate,e._delegate)}}class L0 extends F0{data(e){const t=this._delegate.data(e);return function pC(n,e){n||Je()}(void 0!==t),t}}class go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RI(e)}where(e,t,r){try{return new go(this.firestore,Vh(this._delegate,function OO(n,e,t){const r=e,s=vI("where",n);return new xO(s,r,t)}(e,t,r)))}catch(s){throw po(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new go(this.firestore,Vh(this._delegate,function NO(n,e="asc"){const t=e,r=vI("orderBy",n);return new PO(r,t)}(e,t)))}catch(r){throw po(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new go(this.firestore,Vh(this._delegate,function RO(n){return wS("limit",n),new LS("limit",n,"F")}(e)))}catch(t){throw po(t,"limit()","Query.limit()")}}limitToLast(e){try{return new go(this.firestore,Vh(this._delegate,function kO(n){return wS("limitToLast",n),new LS("limitToLast",n,"L")}(e)))}catch(t){throw po(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new go(this.firestore,Vh(this._delegate,function FO(...n){return new VS("startAt",n,!0)}(...e)))}catch(t){throw po(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new go(this.firestore,Vh(this._delegate,function LO(...n){return new VS("startAfter",n,!1)}(...e)))}catch(t){throw po(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new go(this.firestore,Vh(this._delegate,function VO(...n){return new US("endBefore",n,!1)}(...e)))}catch(t){throw po(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new go(this.firestore,Vh(this._delegate,function UO(...n){return new US("endAt",n,!0)}(...e)))}catch(t){throw po(t,"endAt()","Query.endAt()")}}isEqual(e){return IS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function GO(n){n=Qt(n,Hi);const e=Qt(n.firestore,Qn),t=Or(e),r=new Vp(e);return function rO(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,d){try{const m=yield H_(s,u,!0),w=new m0(u,m.Hi),E=w.ju(m.documents),S=w.applyChanges(E,!1);d.resolve(S.snapshot)}catch(m){const w=td(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(s,u,d){return r.apply(this,arguments)})(yield dI(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Lh(e,r,n,s))}(this._delegate):"server"===e?.source?function zO(n){n=Qt(n,Hi);const e=Qt(n.firestore,Qn),t=Or(e),r=new Vp(e);return gS(t,n._query,{source:"server"}).then(s=>new Lh(e,r,n,s))}(this._delegate):qS(this._delegate),t.then(r=>new JT(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ux(e),r=cx(e,s=>new JT(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return WS(this._delegate,t,r)}withConverter(e){return new go(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}class C1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new L0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class JT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new L0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new C1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new L0(this._firestore,r))})}isEqual(e){return kS(this._delegate,e._delegate)}}class wy extends go{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oa(this.firestore,e):null}doc(e){try{return new oa(this.firestore,void 0===e?Np(this._delegate):Np(this._delegate,e))}catch(t){throw po(t,"doc()","CollectionReference.doc()")}}add(e){return function WO(n,e){const t=Qt(n.firestore,Qn),r=Np(n),s=_I(n.converter,e);return yy(t,[gI(kp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,In.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new oa(this.firestore,t))}isEqual(e){return bS(this._delegate,e._delegate)}withConverter(e){return new wy(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function Hp(n){return Qt(n,Bn)}class XT{constructor(...e){this._delegate=new nd(...e)}static documentId(){return new XT(rr.keyField().canonicalString())}isEqual(e){return(e=(0,Xt.m9)(e))instanceof nd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function JO(){return new yT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gp(e)}static delete(){const e=function QO(){return new E0("deleteField")}();return e._methodName="FieldValue.delete",new Gp(e)}static arrayUnion(...e){const t=ZS(...e);return t._methodName="FieldValue.arrayUnion",new Gp(t)}static arrayRemove(...e){const t=function XO(...n){return new DO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gp(t)}static increment(e){const t=function eP(n){return new TO("increment",n)}(e);return t._methodName="FieldValue.increment",new Gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const b1={Firestore:ox,GeoPoint:fI,Timestamp:xn,Blob:k0,Transaction:sx,WriteBatch:ax,DocumentReference:oa,DocumentSnapshot:F0,Query:go,QueryDocumentSnapshot:L0,QuerySnapshot:JT,CollectionReference:wy,FieldPath:XT,FieldValue:Gp,setLogLevel:function w1(n){!function HE(n){Za.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function E1(n){(function I1(n,e){n.INTERNAL.registerComponent(new Tf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},b1)))})(n,(e,t)=>new ox(e,t,new _1)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(g1.Z);var D1=k(6451),kI=k(5363),T1=k(6063);class A1 extends Kr.x{constructor(e=1/0,t=1/0,r=T1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var S1=k(3099);function lx(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,S1.B)({connector:()=>new A1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function dx(n,e){return(0,Ls.m)(e)?Fn(()=>n,e):Fn(()=>n)}var eA=k(9468);const hx=new Map,N1={activated:!1,tokenObservers:[]},R1={initialized:!1,enabled:!1};function ri(n){return hx.get(n)||N1}function au(n,e){hx.set(n,e)}function LI(){return R1}class U1{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Xt.BH,yield function B1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const mo=new Xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function px(n){if(!ri(n).activated)throw mo.create("use-before-activation",{appName:n.name})}function iA(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,ge.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Q=yield d.getHeartbeatsHeader();Q&&(u["X-Firebase-Client"]=Q)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,E;try{w=yield fetch(n,m)}catch(Q){throw mo.create("fetch-network-error",{originalErrorMessage:null===(r=Q)||void 0===r?void 0:r.message})}if(200!==w.status)throw mo.create("fetch-status-error",{httpStatus:w.status});try{E=yield w.json()}catch(Q){throw mo.create("fetch-parse-error",{originalErrorMessage:null===(s=Q)||void 0===s?void 0:s.message})}const S=E.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw mo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const O=1e3*Number(S[1]),H=Date.now();return{token:E.token,expireTimeMillis:H+O,issuedAtTimeMillis:H}}),oA.apply(this,arguments)}function G1(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const V0="firebase-app-check-store";let BI=null;function mx(){return BI||(BI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(mo.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(V0,{keyPath:"compositeKey"})}}catch(r){e(mo.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),BI)}function sA(){return sA=(0,ge.Z)(function*(n,e){const r=(yield mx()).transaction(V0,"readwrite"),u=r.objectStore(V0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var E;m(mo.create("storage-set",{originalErrorMessage:null===(E=w.target.error)||void 0===E?void 0:E.message}))}})}),sA.apply(this,arguments)}const U0=new Zu.Yd("@firebase/app-check");function wx(n,e){return(0,Xt.hl)()?function Z1(n,e){return function yx(n,e){return sA.apply(this,arguments)}(function _x(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{U0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Cx(){return LI().enabled}function bx(){return lA.apply(this,arguments)}function lA(){return lA=(0,ge.Z)(function*(){const n=LI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),lA.apply(this,arguments)}const eN={error:"UNKNOWN_ERROR"};function tN(n){return Xt.US.encodeString(JSON.stringify(n),!1)}function jI(n){return dA.apply(this,arguments)}function dA(){return dA=(0,ge.Z)(function*(n,e=!1){const t=n.app;px(t);const r=ri(t);let u,s=r.token;if(!s){const w=yield r.cachedTokenPromise;w&&$I(w)&&(s=w)}if(!e&&s&&$I(s))return{token:s.token};let m,d=!1;if(Cx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iA(G1(t,yield bx()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0);const w=yield r.exchangeTokenPromise;return yield wx(t,w),au(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),s=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?U0.warn(w.message):U0.error(w),u=w}return s?(m={token:s.token},au(t,Object.assign(Object.assign({},r),{token:s})),yield wx(t,s)):m=rN(u),d&&Ex(t,m),m}),dA.apply(this,arguments)}function fA(n,e){const t=ri(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),au(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Ix(n){const{app:e}=n,t=ri(e);let r=t.tokenRefresher;r||(r=function nN(n){const{app:e}=n;return new U1((0,ge.Z)(function*(){let r;if(r=ri(e).token?yield jI(n,!0):yield jI(n),r.error)throw r.error}),()=>!0,()=>{const t=ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),au(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ex(n,e){const t=ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function $I(n){return n.expireTimeMillis-Date.now()>0}function rN(n){return{token:tN(eN),error:n}}class iN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ri(this.app);for(const t of e)fA(this.app,t.next);return Promise.resolve()}}const Px="app-check-internal";!function vN(){(0,ja._registerComponent)(new Tf.wA("app-check",n=>function oN(n,e){return new iN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Px).initialize()})),(0,ja._registerComponent)(new Tf.wA(Px,n=>function sN(n){return{getToken:e=>jI(n,e),addTokenListener:e=>function hA(n,e,t,r){const{app:s}=n,u=ri(s),d={next:t,error:r,type:e};if(au(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&$I(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),Ix(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Ix(n))}(n,"INTERNAL",e),removeTokenListener:e=>fA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ja.registerVersion)("@firebase/app-check","0.5.12")}();class yA{constructor(){return(0,bi.vb)("app-check")}}typeof window<"u"&&window;var IN=k(127);const Rx=new f.OlP("angularfire2.auth.use-emulator"),kx=new f.OlP("angularfire2.auth.settings"),Fx=new f.OlP("angularfire2.auth.tenant-id"),Lx=new f.OlP("angularfire2.auth.langugage-code"),Vx=new f.OlP("angularfire2.auth.use-device-language"),Ux=new f.OlP("angularfire.auth.persistence"),Bx=(n,e,t,r,s,u,d,m)=>(0,su.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),d)for(const[E,S]of Object.entries(d))w.settings[E]=S;return m&&w.setPersistence(m),w},[t,r,s,u,d,m]);let jx=(()=>{class n{constructor(t,r,s,u,d,m,w,E,S,O,H,Q){const ae=new Kr.x,Oe=rt(void 0).pipe((0,kI.Q)(d.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2476)))),(0,it.U)(()=>(0,su.on)(t,u,r)),(0,it.U)(Le=>Bx(Le,u,m,E,S,O,w,H)),lx({bufferSize:1,refCount:!1}));if(or(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{Oe.pipe(ne()).subscribe();const It=Oe.pipe(Fn(xt=>xt.getRedirectResult().then(Pt=>Pt,()=>null)),bi.iC,lx({bufferSize:1,refCount:!1})),Tt=Oe.pipe(Fn(xt=>new Ir.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>xt.onAuthStateChanged(jt=>Pt.next(jt),jt=>Pt.error(jt),()=>Pt.complete()))})))),Lt=Oe.pipe(Fn(xt=>new Ir.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>xt.onIdTokenChanged(jt=>Pt.next(jt),jt=>Pt.error(jt),()=>Pt.complete()))}))));this.authState=It.pipe(dx(Tt),(0,eA.R)(d.outsideAngular),(0,kI.Q)(d.insideAngular)),this.user=It.pipe(dx(Lt),(0,eA.R)(d.outsideAngular),(0,kI.Q)(d.insideAngular)),this.idToken=this.user.pipe(Fn(xt=>xt?(0,rn.D)(xt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Fn(xt=>xt?(0,rn.D)(xt.getIdTokenResult()):rt(null))),this.credential=(0,D1.T)(It,ae,this.authState.pipe(I(xt=>!xt))).pipe((0,it.U)(xt=>xt?.user?xt:null),(0,eA.R)(d.outsideAngular),(0,kI.Q)(d.insideAngular))}return(0,su.pX)(this,Oe,u,{spy:{apply:(Le,It,Tt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&Tt.then(Lt=>ae.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(su.Dh),f.LFG(su.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bi.HU),f.LFG(Rx,8),f.LFG(kx,8),f.LFG(Fx,8),f.LFG(Lx,8),f.LFG(Vx,8),f.LFG(Ux,8),f.LFG(yA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function $x(n,e){return function DN(n,e=h1.z){return new Ir.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function _A(n,e){return $x(n,e).pipe((0,it.U)(t=>({payload:t,type:"query"})))}function GI(n,e){return _A(n,e).pipe(ju(void 0),KT(),(0,it.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=s.find(S=>S.doc.ref.isEqual(d.ref)),E=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&E&&JSON.stringify(E.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Hx(n,e,t){return GI(n,t).pipe(wt((r,s)=>function AN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function SN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function f1(n,e=xo.y){return n=n??p1,(0,hr.e)((t,r)=>{let s,u=!0;t.subscribe((0,qn.x)(r,d=>{const m=e(d);(u||!n(s,m))&&(u=!1,s=m,r.next(d))}))})}(),(0,it.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function wA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Gx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=GI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,it.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(ju(void 0),KT(),I(([r,s])=>s.length>0||!r),(0,it.U)(([r,s])=>s),bi.iC)}auditTrail(e){return this.stateChanges(e).pipe(wt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gx(e);return Hx(this.query,t,this.afs.schedulers.outsideAngular).pipe(bi.iC)}valueChanges(e={}){return _A(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),bi.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(bi.iC)}add(e){return this.ref.add(e)}doc(e){return new qx(this.ref.doc(e),this.afs)}}class qx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=Kx(r,t);return new zx(s,u,this.afs)}snapshotChanges(){return function TN(n,e){return $x(n,e).pipe(ju(void 0),KT(),(0,it.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(bi.iC)}}class MN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?GI(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),I(t=>t.length>0),bi.iC):GI(this.query,this.afs.schedulers.outsideAngular).pipe(bi.iC)}auditTrail(e){return this.stateChanges(e).pipe(wt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gx(e);return Hx(this.query,t,this.afs.schedulers.outsideAngular).pipe(bi.iC)}valueChanges(e={}){return _A(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),bi.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(bi.iC)}}const Wx=new f.OlP("angularfire2.enableFirestorePersistence"),Zx=new f.OlP("angularfire2.firestore.persistenceSettings"),xN=new f.OlP("angularfire2.firestore.settings"),ON=new f.OlP("angularfire2.firestore.use-emulator");function Kx(n,e=(t=>t)){return{query:e(n),ref:n}}let PN=(()=>{class n{constructor(t,r,s,u,d,m,w,E,S,O,H,Q,ae,Oe,Le,It,Tt){this.schedulers=w;const Lt=(0,su.on)(t,m,r),xt=S;O&&Bx(Lt,m,H,ae,Oe,Le,Q,It),[this.firestore,this.persistenceEnabled$]=(0,su.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Pt=m.runOutsideAngular(()=>Lt.firestore());if(u&&Pt.settings(u),xt&&Pt.useEmulator(...xt),s&&!or(d)){const jt=()=>{try{return(0,rn.D)(Pt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Hr){return typeof console<"u"&&console.warn(Hr),rt(!1)}};return[Pt,m.runOutsideAngular(jt)]}return[Pt,rt(!1)]},[u,xt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Kx(s,r),m=this.schedulers.ngZone.run(()=>u);return new zx(m,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new MN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new qx(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(su.Dh),f.LFG(su.xv,8),f.LFG(Wx,8),f.LFG(xN,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bi.HU),f.LFG(Zx,8),f.LFG(ON,8),f.LFG(jx,8),f.LFG(Rx,8),f.LFG(kx,8),f.LFG(Fx,8),f.LFG(Lx,8),f.LFG(Vx,8),f.LFG(Ux,8),f.LFG(yA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),NN=(()=>{class n{constructor(){IN.Z.registerVersion("angularfire",bi.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Wx,useValue:!0},{provide:Zx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[PN]}),n})();function RN(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",16),f._UZ(1,"img",17),f.TgZ(2,"button",18),f.NdJ("click",function(){const u=f.CHM(t).$implicit,d=f.oxw();return f.KtG(d.removeImg(u))}),f._uU(3,"x"),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(1),f.s9C("src",t,f.LSH)}}function kN(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1,"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0456\u044f \u0437\u0430\u043d\u0430\u0434\u0434\u0442\u043e \u0432\u0435\u043b\u0438\u043a\u0430 (\u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0440\u043e\u0437\u043c\u0456\u0440 \u0444\u043e\u0442\u043e 300\u043a\u0431)"),f.qZA())}let FN=(()=>{class n{constructor(t,r,s){this.service=t,this.sc=r,this.fb=s,this.urls=[],this.tooBigSizePhoto=!1}ngOnInit(){this.form=this.fb.group({kilometrage:["",Bp.required],date:["",Bp.required],info:["",Bp.required],photo:[]})}addPhoto(t){if(t.target.files[0]&&null!=t.target.files[0].type.match(/image\/*/))if(t.target.files[0].size<3e5){let r=new FileReader;r.readAsDataURL(t.target.files[0]),r.onload=s=>{this.urls.push(s.target.result),this.tooBigSizePhoto=!1}}else this.tooBigSizePhoto=!0}submit(){this.form.value.photo&&(this.form.value.photo=this.urls),this.service.addDetails(this.form.value),this.close()}close(){this.sc.activWindow=!1}removeImg(t){this.urls=this.urls.filter(r=>r!=t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(S0),f.Y36(bI),f.Y36(t1))},n.\u0275cmp=f.Xpm({type:n,selectors:[["add-details-window"]],decls:27,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"window"],["for","kilometrage",1,"label"],["type","text","name","kilometrage","formControlName","kilometrage",1,"input"],[1,"data-add-details"],["for","date",1,"label"],["type","date","name","date","formControlName","date",1,"input"],["name","info","formControlName","info",1,"textarea-window","textarea"],[1,"btn-box"],["type","file","accept","image/*","formControlName","photo","multiple","",1,"input-file",3,"change"],["file",""],["type","button",1,"add-photo","btn",3,"click"],["class","upload-images",4,"ngFor","ngForOf"],[4,"ngIf"],["type","submit",1,"btn-save","btn",3,"disabled"],[1,"btn-close","btn",3,"click"],[1,"upload-images"],["alt","\u0444\u043e\u0442\u043e \u043d\u0435 \u043f\u0440\u0438\u043a\u0440\u0456\u043f\u043b\u0435\u043d\u0435",1,"window-photo",3,"src"],["type","button",1,"remove-img",3,"click"]],template:function(t,r){if(1&t){const s=f.EpF();f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.submit()}),f.TgZ(1,"div",1)(2,"div")(3,"label",2),f._uU(4,"\u041a\u0456\u043b\u043e\u043c\u0435\u0442\u0440\u0430\u0436:"),f.qZA(),f._UZ(5,"input",3),f.TgZ(6,"span"),f._uU(7," \u043a\u043c"),f.qZA()(),f.TgZ(8,"div",4)(9,"label",5),f._uU(10,"\u0414\u0430\u0442\u0430:"),f.qZA(),f._UZ(11,"input",6),f.qZA(),f._UZ(12,"hr"),f.TgZ(13,"p"),f._uU(14,"\u0420\u043e\u0431\u043e\u0442\u0438 \u0449\u043e \u0432\u0438\u043a\u043e\u043d\u0443\u0432\u0430\u043b\u0438\u0441\u044f:"),f.qZA(),f._UZ(15,"textarea",7),f.TgZ(16,"div",8)(17,"input",9,10),f.NdJ("change",function(d){return r.addPhoto(d)}),f.qZA(),f.TgZ(19,"button",11),f.NdJ("click",function(){f.CHM(s);const d=f.MAs(18);return f.KtG(d.click())}),f._uU(20,"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e"),f.qZA(),f.YNc(21,RN,4,1,"div",12),f.YNc(22,kN,2,0,"p",13),f.qZA(),f.TgZ(23,"button",14),f._uU(24,"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"),f.qZA(),f.TgZ(25,"button",15),f.NdJ("click",function(){return r.close()}),f._uU(26,"x"),f.qZA()()()}2&t&&(f.Q6J("formGroup",r.form),f.xp6(21),f.Q6J("ngForOf",r.urls),f.xp6(1),f.Q6J("ngIf",r.tooBigSizePhoto),f.xp6(1),f.Q6J("disabled",r.form.invalid))},dependencies:[Wi,An,jT,M0,xT,OT,R0,NI],styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})(),LN=(()=>{class n{transform(t){return t.toString().replace(/(\w+)(\w{3}$)/gi,"$1 $2")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=f.Yjl({name:"number2",type:n,pure:!0}),n})();function VN(n,e){1&n&&f._UZ(0,"img",14),2&n&&f.s9C("src",e.$implicit,f.LSH)}function UN(n,e){if(1&n&&(f.TgZ(0,"div",12),f.YNc(1,VN,1,1,"img",13),f.qZA()),2&n){const t=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",t.photo)}}function BN(n,e){if(1&n&&(f.TgZ(0,"div",8)(1,"fieldset")(2,"legend",9),f._uU(3),f.ALo(4,"number2"),f.ALo(5,"date"),f.qZA(),f.TgZ(6,"p",10),f._uU(7),f.qZA(),f.YNc(8,UN,2,1,"div",11),f.qZA()()),2&n){const t=e.$implicit;f.xp6(3),f.AsE("\u041a\u0456\u043b\u043e\u043c\u0435\u0442\u0440\u0430\u0436: ",f.lcZ(4,4,t.kilometrage)," \u043a\u043c \u2014\u2014 \u0427\u0430\u0441 \u0437\u0430\u043c\u0456\u043d\u0438: ",f.xi3(5,6,t.date,"dd.MM.yyyy")," "),f.xp6(4),f.Oqu(t.info),f.xp6(1),f.Q6J("ngIf",t.photo)}}let jN=(()=>{class n{constructor(t,r,s){this.sc=t,this.serviceFromFirestore=r,this.serviceToFirestore=s}ngOnInit(){this.car=this.serviceToFirestore.car,this.getDetails()}close(){this.sc.activWatchCar=!1}getDetails(){var t=this;return(0,ge.Z)(function*(){const r=t.serviceToFirestore.car;yield t.serviceFromFirestore.getData(r),t.details=t.serviceFromFirestore.carDetails;for(const s of t.serviceFromFirestore.carDetails)t.details=s.detail.sort((u,d)=>u.date>d.date?1:u.date<d.date?-1:0)})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(bI),f.Y36(TT),f.Y36(S0))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-watch-car"]],decls:11,vars:5,consts:[[1,"watch-car-window"],[1,"watch-car-header"],[1,"watch-car-text"],[1,"watch-car-title"],[1,"watch-car-info"],["alt","\u0444\u043e\u0442\u043e \u043d\u0435 \u043f\u0440\u0438\u043a\u0440\u0456\u043f\u043b\u0435\u043d\u0435",1,"photo-watch-car",3,"src"],["class","details",4,"ngFor","ngForOf"],[1,"watch-car-close","btn",3,"click"],[1,"details"],[1,"detail-field"],[1,"detail-field-text"],["class","box-photo-detail",4,"ngIf"],[1,"box-photo-detail"],["class","photo-detail","alt","photo detail",3,"src",4,"ngFor","ngForOf"],["alt","photo detail",1,"photo-detail",3,"src"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),f._uU(4),f.qZA(),f.TgZ(5,"p",4),f._uU(6),f.qZA()(),f._UZ(7,"img",5),f.qZA(),f.YNc(8,BN,9,9,"div",6),f.TgZ(9,"button",7),f.NdJ("click",function(){return r.close()}),f._uU(10,"x"),f.qZA()()),2&t&&(f.xp6(4),f.AsE("",r.car.name," ",r.car.year,"\u0440.\u0432."),f.xp6(2),f.Oqu(r.car.info),f.xp6(1),f.s9C("src",r.car.photo,f.LSH),f.xp6(1),f.Q6J("ngForOf",r.details))},dependencies:[Wi,An,zh,LN],styles:[".container[_ngcontent-%COMP%]{--orange-color: #fea866;--brown-color: #fec192;--gray-color: rgb(241, 241, 241);background-color:var(--orange-color);font-size:18px;height:100vh}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border-radius:10px;border:none;font-size:1rem;height:2rem;outline:none;padding-left:.8rem}.btn[_ngcontent-%COMP%]{border-radius:7px;border:none;padding:.5rem;font-size:.9rem;cursor:pointer;width:-moz-fit-content;width:fit-content;background-color:var(--gray-color)}.btn[_ngcontent-%COMP%]:disabled{background-color:#787878}.textarea[_ngcontent-%COMP%]{border-radius:7px;border:none;outline:none;padding:1vh;font-size:1.1rem}.label[_ngcontent-%COMP%]{margin:0 .5vw 0 2vw}header[_ngcontent-%COMP%]{display:flex;align-items:baseline;background-color:var(--orange-color);padding:1vh 0}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:33%}.header-input[_ngcontent-%COMP%]{margin:1vw}.header-btn[_ngcontent-%COMP%]{height:2.5rem}.header-btn[_ngcontent-%COMP%]:focus{background-color:gray}.add-car[_ngcontent-%COMP%]{display:flex;justify-content:center;border-right:1px solid white;border-left:1px solid white;width:33%}.contact[_ngcontent-%COMP%]{display:flex;justify-content:center;width:33%}.main[_ngcontent-%COMP%]{background-color:var(--brown-color);padding:1vw}.search-container[_ngcontent-%COMP%]{position:relative}.car-show[_ngcontent-%COMP%]{margin:1vw;padding:1vw;background-color:#f7d8c1;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Verdana,Geneva,Tahoma,sans-serif;padding:0;margin:0}.add-info[_ngcontent-%COMP%]{margin:0 2vw}.window[_ngcontent-%COMP%]{width:92vw;height:auto;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.data-add-details[_ngcontent-%COMP%]{margin:1% 0}.textarea-window[_ngcontent-%COMP%]{width:98%;height:50vh}.btn-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:2vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.btn-box[_ngcontent-%COMP%]{display:flex}.btn-save[_ngcontent-%COMP%]{margin:2vh 0 0 40vw;background-color:#fff;border:rgb(169,168,168) solid 1px}.input-file[_ngcontent-%COMP%]{display:none}.add-photo[_ngcontent-%COMP%]{background-color:#fff;border:rgb(169,168,168) solid 1px;height:-moz-fit-content;height:fit-content;padding:.8rem}.window-photo[_ngcontent-%COMP%]{width:8vw;height:8vw;margin-left:1vw}.watch-car-window[_ngcontent-%COMP%]{width:92vw;height:-moz-fit-content;height:fit-content;position:absolute;top:0;left:1vw;background-color:var(--gray-color);padding:2vw}.watch-car-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1vw;background-color:var(--gray-color)}.watch-car-text[_ngcontent-%COMP%]{width:60vw}.watch-car-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center;margin:0}.watch-car-info[_ngcontent-%COMP%]{font-size:1.5rem}.photo-watch-car[_ngcontent-%COMP%]{width:20vw;height:auto;box-shadow:0 0 15px #5c5c5c}.watch-car-close[_ngcontent-%COMP%]{position:absolute;top:1vw;right:1vw;font-size:1.2rem;font-weight:700;border:black solid 1px;padding:2px 5px}.details[_ngcontent-%COMP%]{padding:1vw}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:5vw;height:5vw}.photo-detail[_ngcontent-%COMP%]:active{position:fixed;top:1vw;left:1vw;width:auto;height:95vh}.add-car-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.name-color-year[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.image-box[_ngcontent-%COMP%]{margin-top:3vh;padding-top:2vh;display:flex;align-items:center;border:1px solid var(--orange-color)}.add-photo-text[_ngcontent-%COMP%]{width:30vw;margin:0 1vw}.add-photo-btn[_ngcontent-%COMP%]{margin-right:1vw;height:3rem}.add-car-submit[_ngcontent-%COMP%]{margin:2vh auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3vh 1vw .5vh 1vw}.err[_ngcontent-%COMP%]{color:red;text-align:center}.alert-window[_ngcontent-%COMP%]{width:100vw;height:100vw;background-color:#fff;opacity:.9;position:fixed;top:0;left:0;text-align:center;padding-top:40vh}.add-car-photo[_ngcontent-%COMP%]{height:5vw;width:auto;align-items:center}@media screen and (max-width: 767px){header[_ngcontent-%COMP%]{align-items:center}header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:1vh}.header-btn[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{width:35%}.add-car[_ngcontent-%COMP%]{width:32%;margin:0 2%;border:none}.contact[_ngcontent-%COMP%]{width:30%}.main[_ngcontent-%COMP%]{padding:3%}.name-color-year[_ngcontent-%COMP%]{flex-direction:column}.name-color-year[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1vh 0;align-items:center}.name-color-year[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:60%}.image-box[_ngcontent-%COMP%]{margin:0;flex-direction:column;padding:2vh}.add-photo-text[_ngcontent-%COMP%]{width:100%;margin-bottom:2vh}.add-car-photo[_ngcontent-%COMP%]{height:auto;width:50vw;margin-top:2vh}.alert-window[_ngcontent-%COMP%]{height:100vh}.window[_ngcontent-%COMP%]{width:93%;padding:3vw;flex-direction:column}.window[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2vh 0}.textarea-window[_ngcontent-%COMP%]{width:95%;height:40vh}.btn-save[_ngcontent-%COMP%]{margin-left:35vw}.window-photo[_ngcontent-%COMP%]{width:60vw;height:40vw;margin:2vw}.upload-images[_ngcontent-%COMP%]{display:flex;align-items:center}.car-show[_ngcontent-%COMP%]{margin:2vh 0;padding:2vw;border-radius:15px}.title[_ngcontent-%COMP%]{font-size:1.3rem}.watch-car-window[_ngcontent-%COMP%]{width:89vw}.watch-car-header[_ngcontent-%COMP%]{flex-direction:column}.watch-car-text[_ngcontent-%COMP%]{width:80vw}.watch-car-title[_ngcontent-%COMP%]{font-size:1.8rem}.watch-car-info[_ngcontent-%COMP%]{font-size:1.2rem}.photo-watch-car[_ngcontent-%COMP%]{width:100%;height:auto}.photo-detail[_ngcontent-%COMP%]{margin:.5vw;width:48%;height:30vw}.detail-field-text[_ngcontent-%COMP%]{margin:0}}"]}),n})(),$N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[d1]}),n.\u0275inj=f.cJS({imports:[Qc,o1,e1,ex,su.hO.initializeApp(CI_firebaseConfig),NN]}),n})();f.B6R(bI,function(){return[Wi,An,FN,jN]},[]),(0,f.G48)(),Ru().bootstrapModule($N).catch(n=>console.error(n))},5867:(st,De,k)=>{k.d(De,{C6:()=>f.getApps,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=k(9681);(0,f.registerVersion)("firebase","9.10.0","app")},127:(st,De,k)=>{k.d(De,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(st,De,k)=>{k.r(De);var f=k(5861),ee=k(3942),N=k(2090),se=k(9681),re=k(655),de=k(1877),ue=k(4859);const _e=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qe=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ze=new de.Yd("@firebase/auth");function tt(y,...h){Ze.logLevel<=de.in.ERROR&&Ze.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function Te(y,...h){throw je(y,...h)}function ve(y,...h){return je(y,...h)}function be(y,h,g){const _=Object.assign(Object.assign({},Qe()),{[h]:g});return new N.LL("auth","Firebase",_).create(h,{appName:y.name})}function Be(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Te(y,"argument-error"),be(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return ye.create(y,...h)}function V(y,h,...g){if(!y)throw je(h,...g)}function me(y){const h="INTERNAL ASSERTION FAILED: "+y;throw tt(h),new Error(h)}function Z(y,h){y||me(h)}const J=new Map;function ie(y){Z(y instanceof Function,"Expected a class definition");let h=J.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,J.set(y,h),h)}function Pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class en{constructor(h,g){this.shortDelay=h,this.longDelay=g,Z(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Vt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(y,h){Z(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Ht{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new en(3e4,6e4);function Ot(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Jt(y,h,g,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(y,h,g,_,A={}){return Pr(y,A,(0,f.Z)(function*(){let P={},W={};_&&("GET"===h?W=_:P={body:JSON.stringify(_)});const ce=(0,N.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Ht.fetch()(Ii(y,y.config.apiHost,g,ce),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Pr(y,h,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Gt),h);try{const A=new Rr(y),P=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const W=yield P.json();if("needConfirmation"in W)throw ii(y,"account-exists-with-different-credential",W);if(P.ok&&!("errorMessage"in W))return W;{const ce=P.ok?W.errorMessage:W.error.message,[Fe,Ke]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw ii(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Fe)throw ii(y,"email-already-in-use",W);if("USER_DISABLED"===Fe)throw ii(y,"user-disabled",W);const gt=_[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw be(y,gt,Ke);Te(y,gt)}}catch(A){if(A instanceof N.ZR)throw A;Te(y,"network-request-failed")}})).apply(this,arguments)}function Nr(y,h,g,_){return yo.apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(y,h,g,_,A={}){const P=yield Jt(y,h,g,_,A);return"mfaPendingCredential"in P&&Te(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Ii(y,h,g,_){const A=`${h}${g}?${_}`;return y.config.emulator?En(y.config,A):`${y.config.apiScheme}://${A}`}class Rr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ii(y,h,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const A=ve(y,h,_);return A.customData._tokenResponse=g,A}function We(){return(We=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function kr(y,h){return zi.apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Dn(y,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Gr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function an(){return(an=(0,f.Z)(function*(y,h=!1){const g=(0,N.m9)(y),_=yield g.getIdToken(h),A=ot(_);V(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,W=P?.sign_in_provider;return{claims:A,token:_,authTime:Gr(dt(A.auth_time)),issuedAtTime:Gr(dt(A.iat)),expirationTime:Gr(dt(A.exp)),signInProvider:W||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(y){return 1e3*Number(y)}function ot(y){var h;const[g,_,A]=y.split(".");if(void 0===g||void 0===_||void 0===A)return tt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,N.tV)(_);return P?JSON.parse(P):(tt("Failed to decode base64 JWT payload"),null)}catch(P){return tt("Caught error parsing JWT payload as JSON",null===(h=P)||void 0===h?void 0:h.toString()),null}}function Jn(y,h){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof N.ZR&&_r(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function _r({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class mt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,f.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(g=_)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class qi{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zt(y){return si.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(y){var h;const g=y.auth,_=yield y.getIdToken(),A=yield Jn(y,Dn(g,{idToken:_}));V(A?.users.length,g,"internal-error");const P=A.users[0];y._notifyReloadListener(P);const W=null!==(h=P.providerUserInfo)&&void 0!==h&&h.length?L(P.providerUserInfo):[],ce=B(y.providerData,W),gt=!!y.isAnonymous&&!(y.email&&P.passwordHash||ce?.length),ct={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ce,metadata:new qi(P.createdAt,P.lastLoginAt),isAnonymous:gt};Object.assign(y,ct)})).apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(y){const h=(0,N.m9)(y);yield zt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function B(y,h){return[...y.filter(_=>!h.some(A=>A.providerId===_.providerId)),...h]}function L(y){return y.map(h=>{var{providerId:g}=h,_=(0,re._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function z(){return(z=(0,f.Z)(function*(y,h){const g=yield Pr(y,{},(0,f.Z)(function*(){const _=(0,N.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:P}=y.config,W=Ii(y,A,"/v1/token",`key=${P}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(W,{method:"POST",headers:ce,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(y){const h=ot(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,f.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:W}=yield function $(y,h){return z.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(A,P,Number(W))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:A,expirationTime:P}=g,W=new Ie;return _&&(V("string"==typeof _,"internal-error",{appName:h}),W.refreshToken=_),A&&(V("string"==typeof A,"internal-error",{appName:h}),W.accessToken=A),P&&(V("number"==typeof P,"internal-error",{appName:h}),W.expirationTime=P),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ie,this.toJSON())}_performRefresh(){return me("not implemented")}}function Ue(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class nt{constructor(h){var{uid:g,auth:_,stsTokenManager:A}=h,P=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new qi(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const _=yield Jn(g,g.stsTokenManager.getToken(g.auth,h));return V(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function jn(y){return an.apply(this,arguments)}(this,h)}reload(){return function $t(y){return q.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new nt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,f.Z)(function*(){let A=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield zt(_)),yield _.auth._persistUserIfCurrent(_),A&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield Jn(h,function vs(y,h){return We.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,A,P,W,ce,Fe,Ke,gt;const ct=null!==(_=g.displayName)&&void 0!==_?_:void 0,Zn=null!==(A=g.email)&&void 0!==A?A:void 0,Fi=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,qu=null!==(W=g.photoURL)&&void 0!==W?W:void 0,Gd=null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,Jr=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,fl=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,pl=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:Cg,emailVerified:zd,isAnonymous:bg,providerData:gl,stsTokenManager:Fy}=g;V(Cg&&Fy,h,"internal-error");const Y0=Ie.fromJSON(this.name,Fy);V("string"==typeof Cg,h,"internal-error"),Ue(ct,h.name),Ue(Zn,h.name),V("boolean"==typeof zd,h,"internal-error"),V("boolean"==typeof bg,h,"internal-error"),Ue(Fi,h.name),Ue(qu,h.name),Ue(Gd,h.name),Ue(Jr,h.name),Ue(fl,h.name),Ue(pl,h.name);const Ua=new nt({uid:Cg,auth:h,email:Zn,emailVerified:zd,displayName:ct,isAnonymous:bg,photoURL:qu,phoneNumber:Fi,tenantId:Gd,stsTokenManager:Y0,createdAt:fl,lastLoginAt:pl});return gl&&Array.isArray(gl)&&(Ua.providerData=gl.map(ml=>Object.assign({},ml))),Jr&&(Ua._redirectEventId=Jr),Ua}static _fromIdTokenResponse(h,g,_=!1){return(0,f.Z)(function*(){const A=new Ie;A.updateFromServerResponse(g);const P=new nt({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:_});return yield zt(P),P})()}}const qt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,_){var A=this;return(0,f.Z)(function*(){A.storage[g]=_})()}_get(g){var _=this;return(0,f.Z)(function*(){const A=_.storage[g];return void 0===A?null:A})()}_remove(g){var _=this;return(0,f.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function $n(y,h,g){return`firebase:${y}:${h}:${g}`}class Rt{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:A,name:P}=this.auth;this.fullUserKey=$n(this.userKey,A.apiKey,P),this.fullPersistenceKey=$n("persistence",A.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?nt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,f.Z)(function*(){if(!g.length)return new Rt(ie(qt),h,_);const A=(yield Promise.all(g.map(function(){var Ke=(0,f.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let P=A[0]||ie(qt);const W=$n(_,h.config.apiKey,h.name);let ce=null;for(const Ke of g)try{const gt=yield Ke._get(W);if(gt){const ct=nt._fromJSON(h,gt);Ke!==P&&(ce=ct),P=Ke;break}}catch{}const Fe=A.filter(Ke=>Ke._shouldAllowMigration);return P._shouldAllowMigration&&Fe.length?(P=Fe[0],ce&&(yield P._set(W,ce.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,f.Z)(function*(gt){if(gt!==P)try{yield gt._remove(W)}catch{}});return function(gt){return Ke.apply(this,arguments)}}())),new Rt(P,h,_)):new Rt(P,h,_)})()}}function At(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(wr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(hn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if($e(h))return"Blackberry";if(ft(h))return"Webos";if(Pn(h))return"Safari";if((h.includes("chrome/")||Ei(h))&&!h.includes("edge/"))return"Chrome";if(Nn(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function hn(y=(0,N.z$)()){return/firefox\//i.test(y)}function Pn(y=(0,N.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ei(y=(0,N.z$)()){return/crios\//i.test(y)}function wr(y=(0,N.z$)()){return/iemobile/i.test(y)}function Nn(y=(0,N.z$)()){return/android/i.test(y)}function $e(y=(0,N.z$)()){return/blackberry/i.test(y)}function ft(y=(0,N.z$)()){return/webos/i.test(y)}function Kt(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Go(y=(0,N.z$)()){return Kt(y)||Nn(y)||ft(y)||$e(y)||/windows phone/i.test(y)||wr(y)}function vo(y,h=[]){let g;switch(y){case"Browser":g=At((0,N.z$)());break;case"Worker":g=`${At((0,N.z$)())}-${y}`;break;default:g=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${_}`}class _s{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=P=>new Promise((W,ce)=>{try{W(h(P))}catch(Fe){ce(Fe)}});_.onAbort=g,this.queue.push(_);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){var _;if(g.auth.currentUser===h)return;const A=[];try{for(const P of g.queue)yield P(h),P.onAbort&&A.push(P.onAbort)}catch(P){A.reverse();for(const W of A)try{W()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=P)||void 0===_?void 0:_.message})}})()}}class St{constructor(h,g,_){this.app=h,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zo(this),this.idTokenSubscription=new zo(this),this.beforeStateQueue=new _s(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,P;if(!_._deleted&&(_.persistenceManager=yield Rt.create(_,h),!_._deleted)){if(null!==(A=_._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(P=_.currentUser)||void 0===P?void 0:P.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var _;const A=yield g.assertedPersistence.getCurrentUser();let P=A,W=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ce=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Fe=P?._redirectEventId,Ke=yield g.tryRedirectSignIn(h);(!ce||ce===Fe)&&Ke?.user&&(P=Ke.user,W=!0)}if(!P)return g.directlySetCurrentUser(null);if(!P._redirectEventId){if(W)try{yield g.beforeStateQueue.runMiddleware(P)}catch(ce){P=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ce))}return P?g.reloadAndSetCurrentUserOrClear(P):g.directlySetCurrentUser(null)}return V(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===P._redirectEventId?g.directlySetCurrentUser(P):g.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){var _;try{yield zt(h)}catch(A){if("auth/network-request-failed"!==(null===(_=A)||void 0===_?void 0:_.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const _=h?(0,N.m9)(h):null;return _&&V(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new N.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,f.Z)(function*(){const A=yield _.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&ie(h)||g._popupRedirectResolver;V(_,g,"argument-error"),g.redirectPersistenceManager=yield Rt.create(g,[ie(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var _,A;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,A){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),W=this._isInitialized?Promise.resolve():this._initializationPromise;return V(W,this,"internal-error"),W.then(()=>P(this.currentUser)),"function"==typeof g?h.addObserver(g,_,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=vo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(_["X-Firebase-Client"]=A),_})()}}function fn(y){return(0,N.m9)(y)}class zo{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Di(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function _o(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ir{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return me("not implemented")}_getIdTokenResponse(h){return me("not implemented")}_linkToIdToken(h,g){return me("not implemented")}_getReauthenticationResolver(h){return me("not implemented")}}function kn(y,h){return uu.apply(this,arguments)}function uu(){return(uu=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:resetPassword",Ot(y,h))})).apply(this,arguments)}function nn(y,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Mc(y,h){return qo.apply(this,arguments)}function qo(){return(qo=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",Ot(y,h))})).apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signInWithPassword",Ot(y,h))})).apply(this,arguments)}function Co(y,h){return ui.apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:sendOobCode",Ot(y,h))})).apply(this,arguments)}function An(y,h){return xc.apply(this,arguments)}function xc(){return(xc=(0,f.Z)(function*(y,h){return Co(y,h)})).apply(this,arguments)}function er(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(y,h){return Co(y,h)})).apply(this,arguments)}function cu(y,h){return ua.apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(y,h){return Co(y,h)})).apply(this,arguments)}function Oc(y,h){return dr.apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(y,h){return Co(y,h)})).apply(this,arguments)}function id(){return(id=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}function Pc(){return(Pc=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}class Nc extends ir{constructor(h,g,_,A=null){super("password",_),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new Nc(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new Nc(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function aa(y,h){return Wi.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Hh(y,h){return id.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Te(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return nn(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Gh(y,h){return Pc.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:Te(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Gn(y,h){return od.apply(this,arguments)}function od(){return(od=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signInWithIdp",Ot(y,h))})).apply(this,arguments)}class Zi extends ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Zi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A}=g,P=(0,re._T)(g,["providerId","signInMethod"]);if(!_||!A)return null;const W=new Zi(_,A);return W.idToken=P.idToken||void 0,W.accessToken=P.accessToken||void 0,W.secret=P.secret,W.nonce=P.nonce,W.pendingToken=P.pendingToken||null,W}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Gn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Gn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,N.xO)(g)}return h}}function qp(y,h){return sd.apply(this,arguments)}function sd(){return(sd=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:sendVerificationCode",Ot(y,h))})).apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h))})).apply(this,arguments)}function ad(){return(ad=(0,f.Z)(function*(y,h){const g=yield Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h));if(g.temporaryProof)throw ii(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Zp={USER_NOT_FOUND:"user-not-found"};function ud(){return(ud=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Zp)})).apply(this,arguments)}class Io extends ir{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Io({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Io({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Rc(y,h){return bo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Wp(y,h){return ad.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function zh(y,h){return ud.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:A,temporaryProof:P}=h;return _||g||A||P?new Io({verificationId:g,verificationCode:_,phoneNumber:A,temporaryProof:P}):null}}class lu{constructor(h){var g,_,A,P,W,ce;const Fe=(0,N.zd)((0,N.pd)(h)),Ke=null!==(g=Fe.apiKey)&&void 0!==g?g:null,gt=null!==(_=Fe.oobCode)&&void 0!==_?_:null,ct=function cd(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Fe.mode)&&void 0!==A?A:null);V(Ke&&gt&&ct,"argument-error"),this.apiKey=Ke,this.operation=ct,this.code=gt,this.continueUrl=null!==(P=Fe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(W=Fe.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ce=Fe.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const g=function ld(y){const h=(0,N.zd)((0,N.pd)(y)).link,g=h?(0,N.zd)((0,N.pd)(h)).deep_link_id:null,_=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(_?(0,N.zd)((0,N.pd)(_)).link:null)||_||g||h||y}(h);try{return new lu(g)}catch{return null}}}let Ti=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return Nc._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const A=lu.parseLink(_);return V(A,"argument-error"),Nc._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ki{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Yi extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Wo extends Yi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return V("providerId"in g&&"signInMethod"in g,"argument-error"),Zi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Wo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Wo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:A,pendingToken:P,nonce:W,providerId:ce}=h;if(!_&&!A&&!g&&!P||!ce)return null;try{return new Wo(ce)._credential({idToken:g,accessToken:_,nonce:W,pendingToken:P})}catch{return null}}}let ca=(()=>{class y extends Yi{constructor(){super("facebook.com")}static credential(g){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),du=(()=>{class y extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:A}=g;if(!_&&!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),kc=(()=>{class y extends Yi{constructor(){super("github.com")}static credential(g){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class la extends ir{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Gn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Gn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A,pendingToken:P}=g;return _&&A&&P&&_===A?new la(_,P):null}static _create(h,g){return new la(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qr extends Ki{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return qr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return qr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=la.fromJSON(h);return V(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return la._create(_,g)}catch{return null}}}let Fr=(()=>{class y extends Yi{constructor(){super("twitter.com")}static credential(g,_){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:A}=g;if(!_||!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ws(y,h){return dd.apply(this,arguments)}function dd(){return(dd=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signUp",Ot(y,h))})).apply(this,arguments)}class or{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,A=!1){return(0,f.Z)(function*(){const P=yield nt._fromIdTokenResponse(h,_,A),W=Zh(_);return new or({user:P,providerId:W,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const A=Zh(_);return new or({user:h,providerId:A,_tokenResponse:_,operationType:g})})()}}function Zh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function vn(){return(vn=(0,f.Z)(function*(y){var h;const g=fn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new or({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield ws(g,{returnSecureToken:!0}),A=yield or._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class hu extends N.ZR{constructor(h,g,_,A){var P;super(g.code,g.message),this.operationType=_,this.user=A,Object.setPrototypeOf(this,hu.prototype),this.customData={appName:h.name,tenantId:null!==(P=h.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,A){return new hu(h,g,_,A)}}function Yh(y,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?hu._fromErrorAndOperation(y,P,h,_):P})}function Wr(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function fu(){return(fu=(0,f.Z)(function*(y,h){const g=(0,N.m9)(y);yield Ut(!0,g,h);const{providerUserInfo:_}=yield kr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=Wr(_||[]);return g.providerData=g.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Cs(y,h){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h,g=!1){const _=yield Jn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return or._forOperation(y,"link",_)})).apply(this,arguments)}function Ut(y,h,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(y,h,g){yield zt(h);const A=!1===y?"provider-already-linked":"no-such-provider";V(Wr(h.providerData).has(g)===y,h.auth,A)})).apply(this,arguments)}function Zo(y,h){return gu.apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(y,h,g=!1){var _;const{auth:A}=y,P="reauthenticate";try{const W=yield Jn(y,Yh(A,P,h,y),g);V(W.idToken,A,"internal-error");const ce=ot(W.idToken);V(ce,A,"internal-error");const{sub:Fe}=ce;return V(y.uid===Fe,A,"user-mismatch"),or._forOperation(y,P,W)}catch(W){throw"auth/user-not-found"===(null===(_=W)||void 0===_?void 0:_.code)&&Te(A,"user-mismatch"),W}})).apply(this,arguments)}function ci(y,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(y,h,g=!1){const _="signIn",A=yield Yh(y,_,h),P=yield or._fromIdTokenResponse(y,_,A);return g||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function mn(y,h){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(y,h){return ci(fn(y),h)})).apply(this,arguments)}function yu(y,h){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,f.Z)(function*(y,h){const g=(0,N.m9)(y);return yield Ut(!1,g,h.providerId),Cs(g,h)})).apply(this,arguments)}function vu(y,h){return _u.apply(this,arguments)}function _u(){return(_u=(0,f.Z)(function*(y,h){return Zo((0,N.m9)(y),h)})).apply(this,arguments)}function Fc(y,h){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(y,h){return Nr(y,"POST","/v1/accounts:signInWithCustomToken",Ot(y,h))})).apply(this,arguments)}function da(){return(da=(0,f.Z)(function*(y,h){const g=fn(y),_=yield Fc(g,{token:h,returnSecureToken:!0}),A=yield or._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ee{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?kt._fromServerResponse(h,g):Te(h,"internal-error")}}class kt extends Ee{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new kt(g)}}function wu(y,h,g){var _;V((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(V(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(V(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function _n(){return(_n=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y),A={requestType:"PASSWORD_RESET",email:h};g&&wu(_,A,g),yield er(_,A)})).apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(y,h,g){yield kn((0,N.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function ha(){return(ha=(0,f.Z)(function*(y,h){yield Mc((0,N.m9)(y),{oobCode:h})})).apply(this,arguments)}function fa(y,h){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,f.Z)(function*(y,h){const g=(0,N.m9)(y),_=yield kn(g,{oobCode:h}),A=_.requestType;switch(V(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,g,"internal-error");default:V(_.email,g,"internal-error")}let P=null;return _.mfaInfo&&(P=Ee._fromServerResponse(fn(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function hd(){return(hd=(0,f.Z)(function*(y,h){const{data:g}=yield fa((0,N.m9)(y),h);return g.email})).apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(y,h,g){const _=fn(y),A=yield ws(_,{returnSecureToken:!0,email:h,password:g}),P=yield or._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(P.user),P})).apply(this,arguments)}function Ko(){return(Ko=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};V(g.handleCodeInApp,_,"argument-error"),g&&wu(_,A,g),yield cu(_,A)})).apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y),A=Ti.credentialWithLink(h,g||Pe());return V(A._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),mn(_,A)})).apply(this,arguments)}function Yp(y,h){return jc.apply(this,arguments)}function jc(){return(jc=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:createAuthUri",Ot(y,h))})).apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(y,h){const _={identifier:h,continueUri:lt()?Pe():"http://localhost"},{signinMethods:A}=yield Yp((0,N.m9)(y),_);return A||[]})).apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(y,h){const g=(0,N.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&wu(g.auth,A,h);const{email:P}=yield An(g.auth,A);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function Eu(){return(Eu=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&wu(_.auth,P,g);const{email:W}=yield Oc(_.auth,P);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function Du(y,h){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,f.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qc(){return(qc=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,N.m9)(y),P={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},W=yield Jn(_,Du(_.auth,P));_.displayName=W.displayName||null,_.photoURL=W.photoUrl||null;const ce=_.providerData.find(({providerId:Fe})=>"password"===Fe);ce&&(ce.displayName=_.displayName,ce.photoURL=_.photoURL),yield _._updateTokensIfNecessary(W)})).apply(this,arguments)}function Qo(y,h,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,f.Z)(function*(y,h,g){const{auth:_}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(P.email=h),g&&(P.password=g);const W=yield Jn(y,nn(_,P));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Lr{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class cn extends Lr{constructor(h,g,_,A){super(h,g,_),this.username=A}}class pd extends Lr{constructor(h,g){super(h,"facebook.com",g)}}class Wc extends cn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Jh extends Lr{constructor(h,g){super(h,"google.com",g)}}class Zc extends cn{constructor(h,g,_){super(h,"twitter.com",g,_)}}function Au(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function zn(y){var h,g;if(!y)return null;const{providerId:_}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const W=null===(g=null===(h=ot(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(W)return new Lr(P,"anonymous"!==W&&"custom"!==W?W:null)}if(!_)return null;switch(_){case"facebook.com":return new pd(P,A);case"github.com":return new Wc(P,A);case"google.com":return new Jh(P,A);case"twitter.com":return new Zc(P,A,y.screenName||null);case"custom":case"anonymous":return new Lr(P,null);default:return new Lr(P,_,A)}}(g)}class Jo{constructor(h,g,_){this.type=h,this.credential=g,this.auth=_}static _fromIdtoken(h,g){return new Jo("enroll",h,g)}static _fromMfaPendingCredential(h){return new Jo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Jo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Jo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Su{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=fn(h),A=g.customData._serverResponse,P=(A.mfaInfo||[]).map(ce=>Ee._fromServerResponse(_,ce));V(A.mfaPendingCredential,_,"internal-error");const W=Jo._fromMfaPendingCredential(A.mfaPendingCredential);return new Su(W,P,function(){var ce=(0,f.Z)(function*(Fe){const Ke=yield Fe._process(_,W);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const ct=yield or._fromIdTokenResponse(_,g.operationType,gt);return yield _._updateCurrentUser(ct.user),ct;case"reauthenticate":return V(g.user,_,"internal-error"),or._forOperation(g.user,g.operationType,gt);default:Te(_,"internal-error")}});return function(Fe){return ce.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function Mu(y,h){return Jt(y,"POST","/v2/accounts/mfaEnrollment:start",Ot(y,h))}class Xh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>Ee._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new Xh(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Jo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var _=this;return(0,f.Z)(function*(){const A=h,P=yield _.getSession(),W=yield Jn(_.user,A._process(_.user.auth,P,g));return yield _.user._updateTokensIfNecessary(W),_.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){var _;const A="string"==typeof h?h:h.uid,P=yield g.user.getIdToken(),W=yield Jn(g.user,function vd(y,h){return Jt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(y,h))}(g.user.auth,{idToken:P,mfaEnrollmentId:A}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ce})=>ce!==A),yield g.user._updateTokensIfNecessary(W);try{yield g.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(_=ce)||void 0===_?void 0:_.code))throw ce}})()}}const Ts=new WeakMap,Xo="__sak";class Ou{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Xo,"1"),this.storage.removeItem(Xo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const _a=(()=>{class y extends Ou{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function va(){const y=(0,N.z$)();return Pn(y)||Kt(y)}()&&function un(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Go(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const A=this.storage.getItem(_),P=this.localCache[_];A!==P&&g(_,P,A)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((ce,Fe,Ke)=>{this.notifyListeners(ce,Ke)});const A=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(g.newValue!==ce)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!_)return}const P=()=>{const ce=this.storage.getItem(A);!_&&this.localCache[A]===ce||this.notifyListeners(A,ce)},W=this.storage.getItem(A);!function Hn(){return(0,N.w1)()&&10===document.documentMode}()||W===g.newValue||g.newValue===g.oldValue?P():setTimeout(P,10)}notifyListeners(g,_){this.localCache[g]=_;const A=this.listeners[g];if(A)for(const P of Array.from(A))P(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var A=()=>super._set,P=this;return(0,f.Z)(function*(){yield A().call(P,g,_),P.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,A=this;return(0,f.Z)(function*(){const P=yield _().call(A,g);return A.localCache[g]=JSON.stringify(P),P})()}_remove(g){var _=()=>super._remove,A=this;return(0,f.Z)(function*(){yield _().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Si=(()=>{class y extends Ou{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let Cd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(P=>P.isListeningto(g));if(_)return _;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,f.Z)(function*(){const A=g,{eventId:P,eventType:W,data:ce}=A.data,Fe=_.handlersMap[W];if(!Fe?.size)return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:W});const Ke=Array.from(Fe).map(function(){var ct=(0,f.Z)(function*(Zn){return Zn(A.origin,ce)});return function(Zn){return ct.apply(this,arguments)}}()),gt=yield function Ca(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(Ke);A.ports[0].postMessage({status:"done",eventId:P,eventType:W,response:gt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ba(y="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return y+g}class Yc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var A=this;return(0,f.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let W,ce;return new Promise((Fe,Ke)=>{const gt=ba("",20);P.port1.start();const ct=setTimeout(()=>{Ke(new Error("unsupported_event"))},_);ce={messageChannel:P,onMessage(Zn){const Fi=Zn;if(Fi.data.eventId===gt)switch(Fi.data.status){case"ack":clearTimeout(ct),W=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Fe(Fi.data.response);break;default:clearTimeout(ct),clearTimeout(W),Ke(new Error("invalid_response"))}}},A.handlers.add(ce),P.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:h,eventId:gt,data:g},[P.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function Sn(){return window}function Pu(){return typeof Sn().WorkerGlobalScope<"u"&&"function"==typeof Sn().importScripts}function Ia(){return(Ia=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const To="firebaseLocalStorageDb",Ao="firebaseLocalStorage",Qc="fbase_key";class ts{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ea(y,h){return y.transaction([Ao],h?"readwrite":"readonly").objectStore(Ao)}function Ss(){const y=indexedDB.open(To,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Ao,{keyPath:Qc})}catch(A){g(A)}}),y.addEventListener("success",(0,f.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Ao)?h(_):(_.close(),yield function Id(){const y=indexedDB.deleteDatabase(To);return new ts(y).toPromise()}(),h(yield Ss()))}))})}function to(y,h,g){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(y,h,g){const _=Ea(y,!0).put({[Qc]:h,value:g});return new ts(_).toPromise()})).apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(y,h){const g=Ea(y,!1).get(h),_=yield new ts(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function ns(y,h){const g=Ea(y,!0).delete(h);return new ts(g).toPromise()}const Ms=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Ss()),g.db})()}_withRetries(g){var _=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const P=yield _._openDb();return yield g(P)}catch(P){if(A++>3)throw P;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Pu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Cd._getInstance(function Ru(){return Pu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,f.Z)(function*(A,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(A,P){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,f.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var _,A;if(g.activeServiceWorker=yield function es(){return Ia.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Yc(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);!P||(null===(_=P[0])||void 0===_?void 0:_.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,f.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Nu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ss();return yield to(g,Xo,"1"),yield ns(g,Xo),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,f.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(P=>to(P,g,_)),A.localCache[g]=_,A.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,f.Z)(function*(){const A=yield _._withRetries(P=>function ku(y,h){return Da.apply(this,arguments)}(P,g));return _.localCache[g]=A,A})()}_remove(g){var _=this;return(0,f.Z)(function*(){return _._withPendingWrite((0,f.Z)(function*(){return yield _._withRetries(A=>ns(A,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const _=yield g._withRetries(W=>{const ce=Ea(W,!1).getAll();return new ts(ce).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:W,value:ce}of _)P.add(W),JSON.stringify(g.localCache[W])!==JSON.stringify(ce)&&(g.notifyListeners(W,ce),A.push(W));for(const W of Object.keys(g.localCache))g.localCache[W]&&!P.has(W)&&(g.notifyListeners(W,null),A.push(W));return A})()}notifyListeners(g,_){this.localCache[g]=_;const A=this.listeners[g];if(A)for(const P of Array.from(A))P(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function xs(y,h){return Jt(y,"POST","/v2/accounts/mfaSignIn:start",Ot(y,h))}function So(){return(So=(0,f.Z)(function*(y){return(yield Jt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ps(y){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=A=>{const P=ve("internal-error");P.customData=A,g(P)},_.type="text/javascript",_.charset="UTF-8",function Os(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Vu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ta=1e12;class sn{constructor(h){this.auth=h,this.counter=Ta,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new Qp(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||Ta;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ta))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var _;return null===(_=g._widgets.get(h||Ta))||void 0===_||_.execute(),""})()}}class Qp{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;V(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cy(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jp=Vu("rcb"),by=new en(3e4,6e4);class ef{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Sn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return V(function j0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Sn().grecaptcha):new Promise((_,A)=>{const P=Sn().setTimeout(()=>{A(ve(h,"network-request-failed"))},by.get());Sn()[Jp]=()=>{Sn().clearTimeout(P),delete Sn()[Jp];const ce=Sn().grecaptcha;if(!ce)return void A(ve(h,"internal-error"));const Fe=ce.render;ce.render=(Ke,gt)=>{const ct=Fe(Ke,gt);return this.counter++,ct},this.hostLanguage=g,_(ce)},Ps(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Jp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),A(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Sn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class el{load(h){return(0,f.Z)(function*(){return new sn(h)})()}clearedOneInstance(){}}const Ey="recaptcha",Dy={theme:"light",type:"image"};class nr{constructor(h,g=Object.assign({},Dy),_){this.parameters=g,this.type=Ey,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;V(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new el:new ef,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(P=>{const W=ce=>{!ce||(h.tokenChangeListeners.delete(W),P(ce))};h.tokenChangeListeners.add(W),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=Sn()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){V(lt()&&!Pu(),h.auth,"internal-error"),yield function rn(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Vr(y){return So.apply(this,arguments)}(h.auth);V(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class di{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Io._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Kr(){return(Kr=(0,f.Z)(function*(y,h,g){const _=fn(y),A=yield Mo(_,h,(0,N.m9)(g));return new di(A,P=>mn(_,P))})).apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y);yield Ut(!1,_,"phone");const A=yield Mo(_.auth,h,(0,N.m9)(g));return new di(A,P=>yu(_,P))})).apply(this,arguments)}function Ir(){return(Ir=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y),A=yield Mo(_.auth,h,(0,N.m9)(g));return new di(A,P=>vu(_,P))})).apply(this,arguments)}function Mo(y,h,g){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,f.Z)(function*(y,h,g){var _;const A=yield g.verify();try{let P;if(V("string"==typeof A,y,"argument-error"),V(g.type===Ey,y,"argument-error"),P="string"==typeof h?{phoneNumber:h}:h,"session"in P){const W=P.session;if("phoneNumber"in P)return V("enroll"===W.type,y,"internal-error"),(yield Mu(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{V("signin"===W.type,y,"internal-error");const ce=(null===(_=P.multiFactorHint)||void 0===_?void 0:_.uid)||P.multiFactorUid;return V(ce,y,"missing-multi-factor-info"),(yield xs(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield qp(y,{phoneNumber:P.phoneNumber,recaptchaToken:A});return W}}finally{g._reset()}})).apply(this,arguments)}function tl(){return(tl=(0,f.Z)(function*(y,h){yield Cs((0,N.m9)(y),h)})).apply(this,arguments)}let Sa=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=fn(g)}verifyPhoneNumber(g,_){return Mo(this.auth,g,(0,N.m9)(_))}static credential(g,_){return Io._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:A}=g;return _&&A?Io._fromTokenResponse(_,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Rs(y,h){return h?ie(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class xo extends ir{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Gn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Gn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Gn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function it(y){return ci(y.auth,new xo(y),y.bypassAuthState)}function Ma(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Zo(g,new xo(y),y.bypassAuthState)}function Oo(y){return xa.apply(this,arguments)}function xa(){return(xa=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Cs(g,new xo(y),y.bypassAuthState)})).apply(this,arguments)}class ks{constructor(h,g,_,A,P=!1){this.auth=h,this.resolver=_,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(_,A){h.pendingPromise={resolve:_,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(P){h.reject(P)}});return function(_,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:_,sessionId:A,postBody:P,tenantId:W,error:ce,type:Fe}=h;if(ce)return void g.reject(ce);const Ke={auth:g.auth,requestUri:_,sessionId:A,tenantId:W||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Ke))}catch(gt){g.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return it;case"linkViaPopup":case"linkViaRedirect":return Oo;case"reauthViaPopup":case"reauthViaRedirect":return Ma;default:Te(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qn=new en(2e3,1e4);function Fs(){return(Fs=(0,f.Z)(function*(y,h,g){const _=fn(y);Be(y,h,Ki);const A=Rs(_,g);return new Po(_,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function rl(){return(rl=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y);Be(_.auth,h,Ki);const A=Rs(_.auth,g);return new Po(_.auth,"reauthViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y);Be(_.auth,h,Ki);const A=Rs(_.auth,g);return new Po(_.auth,"linkViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}let Po=(()=>{class y extends ks{constructor(g,_,A,P,W){super(g,_,P,W),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const _=yield g.execute();return V(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,f.Z)(function*(){Z(1===g.filter.length,"Popup operations only handle one event");const _=ba();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,A;this.pollId=null!==(A=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,qn.get())};g()}}return y.currentPopupAction=null,y})();const fi=new Map;class il extends ks{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let _=fi.get(g.auth._key());if(!_){try{const P=(yield function Ls(y,h){return Ur.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(P)}catch(A){_=()=>Promise.reject(A)}fi.set(g.auth._key(),_)}return g.bypassAuthState||fi.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const A=yield _.auth._redirectUserForId(h.eventId);if(A)return _.user=A,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ur(){return(Ur=(0,f.Z)(function*(y,h){const g=Fn(h),_=io(y);if(!(yield _._isAvailable()))return!1;const A="true"===(yield _._get(g));return yield _._remove(g),A})).apply(this,arguments)}function ro(y,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(y,h){return io(y)._set(Fn(h),"true")})).apply(this,arguments)}function Ro(y,h){fi.set(y._key(),h)}function io(y){return ie(y._redirectPersistence)}function Fn(y){return $n("pendingRedirect",y.config.apiKey,y.name)}function I(){return(I=(0,f.Z)(function*(y,h,g){const _=fn(y);Be(y,h,Ki);const A=Rs(_,g);return yield ro(A,_),A._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y);Be(_.auth,h,Ki);const A=Rs(_.auth,g);yield ro(A,_.auth);const P=yield ut(_);return A._openRedirect(_.auth,h,"reauthViaRedirect",P)})).apply(this,arguments)}function Ce(){return(Ce=(0,f.Z)(function*(y,h,g){const _=(0,N.m9)(y);Be(_.auth,h,Ki);const A=Rs(_.auth,g);yield Ut(!1,_,h.providerId),yield ro(A,_.auth);const P=yield ut(_);return A._openRedirect(_.auth,h,"linkViaRedirect",P)})).apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(y,h){return yield fn(y)._initializationPromise,pt(y,h,!1)})).apply(this,arguments)}function pt(y,h){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(y,h,g=!1){const _=fn(y),A=Rs(_,h),W=yield new il(_,A,g).execute();return W&&!g&&(delete W.user._redirectEventId,yield _._persistUserIfCurrent(W.user),yield _._setRedirectUser(null,h)),W})).apply(this,arguments)}function ut(y){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(y){const h=ba(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Vs{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function xi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ct(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!Ct(h)){const A=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ko(h))}saveEventToCache(h){this.cachedEventUids.add(ko(h)),this.lastProcessedEventTime=Date.now()}}function ko(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Ct({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Fo(y){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(y,h={}){return Jt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Us=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,is=/^https?/;function tf(){return(tf=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Fo(y);for(const g of h)try{if(tg(g))return}catch{}Te(y,"unauthorized-domain")})).apply(this,arguments)}function tg(y){const h=Pe(),{protocol:g,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&W.hostname===_}if(!is.test(g))return!1;if(Us.test(y))return _===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(_)}const ng=new en(3e4,6e4);function Ty(){const y=Sn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Oi=null;function nf(y){return Oi=Oi||function Wn(y){return new Promise((h,g)=>{var _,A,P;function W(){Ty(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ty(),g(ve(y,"network-request-failed"))},timeout:ng.get()})}if(null!==(A=null===(_=Sn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(P=Sn().gapi)||void 0===P||!P.load){const ce=Vu("iframefcb");return Sn()[ce]=()=>{gapi.load?W():g(ve(y,"network-request-failed"))},Ps(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Fe=>g(Fe))}W()}}).catch(h=>{throw Oi=null,h})}(y),Oi}const rg=new en(5e3,15e3),Ay={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ig(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?En(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},A=sf.get(y.config.apiHost);A&&(_.eid=A);const P=y._getFrameworks();return P.length&&(_.fw=P.join(",")),`${g}?${(0,N.xO)(_).slice(1)}`}function Pa(){return Pa=(0,f.Z)(function*(y){const h=yield nf(y),g=Sn().gapi;return V(g,y,"internal-error"),h.open({where:document.body,url:ig(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ay,dontclear:!0},_=>new Promise(function(){var A=(0,f.Z)(function*(P,W){yield _.restyle({setHideOnLeave:!1});const ce=ve(y,"network-request-failed"),Fe=Sn().setTimeout(()=>{W(ce)},rg.get());function Ke(){Sn().clearTimeout(Fe),P(_)}_.ping(Ke).then(Ke,()=>{W(ce)})});return function(P,W){return A.apply(this,arguments)}}()))}),Pa.apply(this,arguments)}const Ed={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ol{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ad(y,h,g,_,A,P){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:se.SDK_VERSION,eventId:A};if(h instanceof Ki){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,N.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ke]of Object.entries(P||{}))W[Fe]=Ke}if(h instanceof Yi){const Fe=h.getScopes().filter(Ke=>""!==Ke);Fe.length>0&&(W.scopes=Fe.join(","))}y.tenantId&&(W.tid=y.tenantId);const ce=W;for(const Fe of Object.keys(ce))void 0===ce[Fe]&&delete ce[Fe];return`${function Sd({config:y}){return y.emulator?En(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(ce).slice(1)}`}const Ra="webStorageSupport";class Pi extends class Sy{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Pi(h)}_finalizeEnroll(h,g,_){return function xu(y,h){return Jt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(y,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Lu(y,h){return Jt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ot(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bs=(()=>{class y{constructor(){}static assertion(g){return Pi._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var uf="@firebase/auth";class H0{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{var A;h((null===(A=_)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function js(){return window}function cf(){return(cf=(0,f.Z)(function*(y,h,g){var _;const{BuildInfo:A}=js();Z(h.sessionId,"AuthEvent did not contain a session ID");const P=yield Py(h.sessionId),W={};return Kt()?W.ibi=A.packageName:Nn()?W.apn=A.packageName:Te(y,"operation-not-supported-in-this-environment"),A.displayName&&(W.appDisplayName=A.displayName),W.sessionId=P,Ad(y,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,W)})).apply(this,arguments)}function ka(){return(ka=(0,f.Z)(function*(y){const{BuildInfo:h}=js(),g={};Kt()?g.iosBundleId=h.packageName:Nn()?g.androidPackageName=h.packageName:Te(y,"operation-not-supported-in-this-environment"),yield Fo(y,g)})).apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(y,h,g){const{cordova:_}=js();let A=()=>{};try{yield new Promise((P,W)=>{let ce=null;function Fe(){var ct;P();const Zn=null===(ct=_.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof Zn&&Zn(),"function"==typeof g?.close&&g.close()}function Ke(){ce||(ce=window.setTimeout(()=>{W(ve(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Ke()}h.addPassiveListener(Fe),document.addEventListener("resume",Ke,!1),Nn()&&document.addEventListener("visibilitychange",gt,!1),A=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",gt,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function Py(y){return lg.apply(this,arguments)}function lg(){return(lg=(0,f.Z)(function*(y){const h=q0(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function q0(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}!function z0(y){(0,se._registerComponent)(new ue.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:P,authDomain:W}=_.options;return((ce,Fe)=>{V(P&&!P.includes(":"),"invalid-api-key",{appName:ce.name}),V(!W?.includes(":"),"argument-error",{appName:ce.name});const Ke={apiKey:P,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vo(y)},gt=new St(ce,Fe,Ke);return function Re(y,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(gt,g),gt})(_,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ue.wA("auth-internal",h=>{const g=fn(h.getProvider("auth").getImmediate());return new H0(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(uf,"0.20.7",function G0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(uf,"0.20.7","esm2017")}("Browser");class Fa extends Vs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function dg(y){return cl.apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(y){const h=yield lf()._get(df(y));return h&&(yield lf()._remove(df(y))),h})).apply(this,arguments)}function $u(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function lf(){return ie(_a)}function df(y){return $n("authEvent",y.config.apiKey,y.name)}function Hu(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,N.zd)(g.join("?"))}function fg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function oo(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function pf(y=(0,N.z$)()){return!("file:"!==oo()&&"ionic:"!==oo()&&"capacitor:"!==oo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nd(){try{const y=self.localStorage,h=ba();if(y)return y.setItem(h,"1"),y.removeItem(h),!function ll(y=(0,N.z$)()){return function Z0(){return(0,N.w1)()&&11===document?.documentMode}()||function K0(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return Rd()&&(0,N.hl)()}return!1}function Rd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function kd(){return(function Pd(){return"http:"===oo()||"https:"===oo()}()||(0,N.ru)()||pf())&&!function Ry(){return(0,N.b$)()||(0,N.UG)()}()&&Nd()&&!Rd()}function gf(){return pf()&&typeof document<"u"}function Fd(){return(Fd=(0,f.Z)(function*(){return!!gf()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Er={LOCAL:"local",NONE:"none",SESSION:"session"},Ld=V,mf="persistence";function Gu(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(y){yield y._initializationPromise;const h=yf(),g=$n(mf,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function yf(){var y;try{return(null===(y=function gg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Vd=V;class so{constructor(){this.browserResolver=ie(class ag{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Si,this._completeRedirectFn=pt,this._overrideRedirectResult=Ro}_openPopup(h,g,_,A){var P=this;return(0,f.Z)(function*(){var W;Z(null===(W=P.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ce=Ad(h,g,_,Pe(),A);return function ss(y,h,g,_=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),W=Math.max((window.screen.availWidth-_)/2,0).toString();let ce="";const Fe=Object.assign(Object.assign({},Ed),{width:_.toString(),height:A.toString(),top:P,left:W}),Ke=(0,N.z$)().toLowerCase();g&&(ce=Ei(Ke)?"_blank":g),hn(Ke)&&(h=h||"http://localhost",Fe.scrollbars="yes");const gt=Object.entries(Fe).reduce((Zn,[Fi,qu])=>`${Zn}${Fi}=${qu},`,"");if(function ai(y=(0,N.z$)()){var h;return Kt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ke)&&"_self"!==ce)return function sg(y,h){const g=document.createElement("a");g.href=y,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",ce),new ol(null);const ct=window.open(h||"",ce,gt);V(ct,y,"popup-blocked");try{ct.focus()}catch{}return new ol(ct)}(h,ce,ba())})()}_openRedirect(h,g,_,A){var P=this;return(0,f.Z)(function*(){return yield P._originValidation(h),function li(y){Sn().location.href=y}(Ad(h,g,_,Pe(),A)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:P}=this.eventManagers[g];return A?Promise.resolve(A):(Z(P,"If manager is not set, promise should be"),P)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const _=yield function og(y){return Pa.apply(this,arguments)}(h),A=new Vs(h);return _.register("authEvent",P=>(V(P?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=_,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Ra,{type:Ra},A=>{var P;const W=null===(P=A?.[0])||void 0===P?void 0:P[Ra];void 0!==W&&g(!!W),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function pi(y){return tf.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Go()||Pn()||Kt()}}),this.cordovaResolver=ie(class Ny{constructor(){this._redirectPersistence=Si,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pt,this._overrideRedirectResult=Ro}_initialize(h){var g=this;return(0,f.Z)(function*(){const _=h._key();let A=g.eventManagers.get(_);return A||(A=new Fa(h),g.eventManagers.set(_,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,A){var P=this;return(0,f.Z)(function*(){!function Md(y){var h,g,_,A,P,W,ce,Fe,Ke,gt;const ct=js();V("function"==typeof(null===(h=ct?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(g=ct?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(P=null===(A=null===(_=ct?.cordova)||void 0===_?void 0:_.plugins)||void 0===A?void 0:A.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(ce=null===(W=ct?.cordova)||void 0===W?void 0:W.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(gt=null===(Ke=ct?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield P._initialize(h);yield W.initialized(),W.resetRedirect(),function hr(){fi.clear()}(),yield P._originValidation(h);const ce=function La(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:$u(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,A);yield function ul(y,h){return lf()._set(df(y),h)}(h,ce);const Fe=yield function xy(y,h,g){return cf.apply(this,arguments)}(h,ce,g),Ke=yield function Ni(y){const{cordova:h}=js();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let A=null;_?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function zr(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Fe);return function al(y,h,g){return Lo.apply(this,arguments)}(h,W,Ke)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Oy(y){return ka.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:A,BuildInfo:P}=js(),W=setTimeout((0,f.Z)(function*(){yield dg(h),g.onEvent(fg())}),500),ce=function(){var gt=(0,f.Z)(function*(ct){clearTimeout(W);const Zn=yield dg(h);let Fi=null;Zn&&ct?.url&&(Fi=function hg(y,h){var g,_;const A=function xd(y){const h=Hu(y),g=h.link?decodeURIComponent(h.link):void 0,_=Hu(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Hu(A).link||A||_||g||y}(h);if(A.includes("/__/auth/callback")){const P=Hu(A),W=P.firebaseError?function hf(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ce=null===(_=null===(g=W?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Fe=ce?ve(ce):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Zn,ct.url)),g.onEvent(Fi||fg())});return function(Zn){return gt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ce);const Fe=A,Ke=`${P.packageName.toLowerCase()}://`;js().handleOpenURL=function(){var gt=(0,f.Z)(function*(ct){if(ct.toLowerCase().startsWith(Ke)&&ce({url:ct}),"function"==typeof Fe)try{Fe(ct)}catch(Zn){console.error(Zn)}});return function(ct){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Si,this._completeRedirectFn=pt,this._overrideRedirectResult=Ro}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,A){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(h,g,_,A)})()}_openRedirect(h,g,_,A){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(h,g,_,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return gf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function ky(){return Fd.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function $s(y){return y.unwrap()}function Bd(y){return jd(y)}function jd(y){const{_tokenResponse:h}=y instanceof N.ZR?y.customData:y;if(!h)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Sa.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=du;break;case"facebook.com":_=ca;break;case"github.com":_=kc;break;case"twitter.com":_=Fr;break;default:const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:W,pendingToken:ce,nonce:Fe}=h;return P||W||A||ce?ce?g.startsWith("saml.")?la._create(g,ce):Zi._fromParams({providerId:g,signInMethod:g,pendingToken:ce,idToken:A,accessToken:P}):new Wo(g).credential({idToken:A,accessToken:P,rawNonce:Fe}):null}return y instanceof N.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ar(y,h){return h.catch(g=>{throw g instanceof N.ZR&&function Uo(y,h){var g,_;const A=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new Hd(y,function Cn(y,h){var g;const _=(0,N.m9)(y),A=h;return V(h.customData.operationType,_,"argument-error"),V(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),Su._fromError(_,A)}(y,h));else if(A){const P=jd(h),W=h;P&&(W.credential=P,W.tenantId=A.tenantId||void 0,W.email=A.email||void 0,W.phoneNumber=A.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Bd(g),additionalUserInfo:Au(g),user:Qr.getOrCreate(A)}})}function $d(y,h){return hl.apply(this,arguments)}function hl(){return(hl=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>ar(y,g.confirm(_))}})).apply(this,arguments)}class Hd{constructor(h,g){this.resolver=g,this.auth=function Ud(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ar($s(this.auth),this.resolver.resolveSignIn(h))}}class Qr{constructor(h){this._delegate=h,this.multiFactor=function As(y){const h=(0,N.m9)(y);return Ts.has(h)||Ts.set(h,Xh._fromUser(h)),Ts.get(h)}(h)}static getOrCreate(h){return Qr.USER_MAP.has(h)||Qr.USER_MAP.set(h,new Qr(h)),Qr.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return ar(g.auth,yu(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,f.Z)(function*(){return $d(_.auth,function pn(y,h,g){return hi.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return ar(g.auth,function Bu(y,h,g){return Oa.apply(this,arguments)}(g._delegate,h,so))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Gu(fn(g.auth)),function Y(y,h,g){return function ne(y,h,g){return Ce.apply(this,arguments)}(y,h,g)}(g._delegate,h,so)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return ar(g.auth,vu(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return $d(this.auth,function Aa(y,h,g){return Ir.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return ar(this.auth,function eg(y,h,g){return rl.apply(this,arguments)}(this._delegate,h,so))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Gu(fn(g.auth)),function D(y,h,g){return function M(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,so)})()}sendEmailVerification(h){return function $c(y,h){return ya.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function br(y,h){return fu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function fd(y,h){return Qo((0,N.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Yo(y,h){return Qo((0,N.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Xp(y,h){return tl.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function zc(y,h){return qc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Hc(y,h,g){return Eu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qr.USER_MAP=new WeakMap;const as=V;let mg=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;as(A,"invalid-api-key",{appName:g.name}),as(A,"invalid-api-key",{appName:g.name});const P=typeof window<"u"?so:void 0;this._delegate=_.initialize({options:{persistence:vf(A,g.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(_e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Ac(y,h,g){const _=fn(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const A=!!g?.disableWarnings,P=Di(h),{host:W,port:ce}=function Rn(y){const h=Di(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(_);if(A){const P=A[1];return{host:P,port:_o(_.substr(P.length+1))}}{const[P,W]=_.split(":");return{host:P,port:_o(W)}}}(h);_.config.emulator={url:`${P}//${W}${null===ce?"":`:${ce}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:W,port:ce,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function wo(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function Zr(y,h){return ha.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return fa(this._delegate,g)}confirmPasswordReset(g,_){return function bu(y,h,g){return bs.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var A=this;return(0,f.Z)(function*(){return ar(A._delegate,function pa(y,h,g){return wn.apply(this,arguments)}(A._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Iu(y,h){return ma.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function eo(y,h){return"EMAIL_SIGNIN"===lu.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){as(kd(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function xe(y,h){return et.apply(this,arguments)}(g._delegate,so);return _?ar(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function pg(y,h){fn(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,A){const{next:P,error:W,complete:ce}=yg(g,_,A);return this._delegate.onAuthStateChanged(P,W,ce)}onIdTokenChanged(g,_,A){const{next:P,error:W,complete:ce}=yg(g,_,A);return this._delegate.onIdTokenChanged(P,W,ce)}sendSignInLinkToEmail(g,_){return function Bc(y,h,g){return Ko.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Cu(y,h,g){return _n.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,f.Z)(function*(){let A;switch(function dl(y,h){Ld(Object.values(Er).includes(h),y,"invalid-persistence-type"),(0,N.b$)()?Ld(h!==Er.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?Ld(h===Er.NONE,y,"unsupported-persistence-type"):Rd()?Ld(h===Er.NONE||h===Er.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):Ld(h===Er.NONE||Nd(),y,"unsupported-persistence-type")}(_._delegate,g),g){case Er.SESSION:A=Si;break;case Er.LOCAL:A=(yield ie(Ms)._isAvailable())?Ms:_a;break;case Er.NONE:A=qt;break;default:return Te("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ar(this._delegate,function Kh(y){return vn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ar(this._delegate,mn(this._delegate,g))}signInWithCustomToken(g){return ar(this._delegate,function Lc(y,h){return da.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return ar(this._delegate,function Ai(y,h,g){return mn((0,N.m9)(y),Ti.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return ar(this._delegate,function Kp(y,h,g){return ga.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return $d(this._delegate,function rt(y,h,g){return Kr.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,f.Z)(function*(){return as(kd(),_._delegate,"operation-not-supported-in-this-environment"),ar(_._delegate,function nl(y,h,g){return Fs.apply(this,arguments)}(_._delegate,g,so))})()}signInWithRedirect(g){var _=this;return(0,f.Z)(function*(){return as(kd(),_._delegate,"operation-not-supported-in-this-environment"),yield Gu(_._delegate),function ln(y,h,g){return function ju(y,h,g){return I.apply(this,arguments)}(y,h,g)}(_._delegate,g,so)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Uc(y,h){return hd.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Er,y})();function yg(y,h,g){let _=y;"function"!=typeof y&&({next:_,error:h,complete:g}=y);const A=_;return{next:W=>A(W&&Qr.getOrCreate(W)),error:h,complete:g}}function vf(y,h){const g=function ki(y,h){const g=yf();if(!g)return[];const _=$n(mf,y,h);switch(g.getItem(_)){case Er.NONE:return[qt];case Er.LOCAL:return[Ms,Si];case Er.SESSION:return[Si];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(Ms)&&g.push(Ms),typeof window<"u")for(const _ of[_a,Si])g.includes(_)||g.push(_);return g.includes(qt)||g.push(qt),g}class zu{constructor(){this.providerId="phone",this._delegate=new Sa($s(ee.Z.auth()))}static credential(h,g){return Sa.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}zu.PHONE_SIGN_IN_METHOD=Sa.PHONE_SIGN_IN_METHOD,zu.PROVIDER_ID=Sa.PROVIDER_ID;const vg=V;class _f{constructor(h,g,_=ee.Z.app()){var A;vg(null===(A=_.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new nr(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wg(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new mg(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ti,FacebookAuthProvider:ca,GithubAuthProvider:kc,GoogleAuthProvider:du,OAuthProvider:Wo,SAMLAuthProvider:qr,PhoneAuthProvider:zu,PhoneMultiFactorGenerator:Bs,RecaptchaVerifier:_f,TwitterAuthProvider:Fr,Auth:mg,AuthCredential:ir,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.20")}(ee.Z)},9751:(st,De,k)=>{k.d(De,{y:()=>he});var f=k(2961),ee=k(727),N=k(8822),se=k(9635),re=k(2416),de=k(576),ue=k(2806);let he=(()=>{class K{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const _e=new K;return _e.source=this,_e.operator=Se,_e}subscribe(Se,_e,Qe){const ye=function j(K){return K&&K instanceof f.Lv||function U(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,ee.Nn)(K)}(Se)?Se:new f.Hp(Se,_e,Qe);return(0,ue.x)(()=>{const{operator:fe,source:Ze}=this;ye.add(fe?fe.call(ye,Ze):Ze?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Se){try{return this._subscribe(Se)}catch(_e){Se.error(_e)}}forEach(Se,_e){return new(_e=pe(_e))((Qe,ye)=>{const fe=new f.Hp({next:Ze=>{try{Se(Ze)}catch(tt){ye(tt),fe.unsubscribe()}},error:ye,complete:Qe});this.subscribe(fe)})}_subscribe(Se){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Se)}[N.L](){return this}pipe(...Se){return(0,se.U)(Se)(this)}toPromise(Se){return new(Se=pe(Se))((_e,Qe)=>{let ye;this.subscribe(fe=>ye=fe,fe=>Qe(fe),()=>_e(ye))})}}return K.create=Ve=>new K(Ve),K})();function pe(K){var Ve;return null!==(Ve=K??re.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(st,De,k)=>{k.d(De,{x:()=>ue});var f=k(9751),ee=k(727);const se=(0,k(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),de=k(2806);let ue=(()=>{class pe extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new he(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Ve,observers:Se}=this;return K||Ve?ee.Lc:(this.currentObservers=null,Se.push(j),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Se,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Ve,isStopped:Se}=this;K?j.error(Ve):Se&&j.complete()}asObservable(){const j=new f.y;return j.source=this,j}}return pe.create=(U,j)=>new he(U,j),pe})();class he extends ue{constructor(U,j){super(),this.destination=U,this.source=j}next(U){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,U)}error(U){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,U)}complete(){var U,j;null===(j=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===j||j.call(U)}_subscribe(U){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(U))&&void 0!==K?K:ee.Lc}}},2961:(st,De,k)=>{k.d(De,{Hp:()=>Qe,Lv:()=>K});var f=k(576),ee=k(727),N=k(2416),se=k(7849);function re(){}const de=pe("C",void 0,void 0);function pe(Te,ve,be){return{kind:Te,value:ve,error:be}}var U=k(3410),j=k(2806);class K extends ee.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,ee.Nn)(ve)&&ve.add(this)):this.destination=tt}static create(ve,be,Be){return new Qe(ve,be,Be)}next(ve){this.isStopped?Ze(function he(Te){return pe("N",Te,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ze(function ue(Te){return pe("E",void 0,Te)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ze(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Se(Te,ve){return Ve.call(Te,ve)}class _e{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:be}=this;if(be.next)try{be.next(ve)}catch(Be){ye(Be)}}error(ve){const{partialObserver:be}=this;if(be.error)try{be.error(ve)}catch(Be){ye(Be)}else ye(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(be){ye(be)}}}class Qe extends K{constructor(ve,be,Be){let je;if(super(),(0,f.m)(ve)||!ve)je={next:ve??void 0,error:be??void 0,complete:Be??void 0};else{let V;this&&N.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),je={next:ve.next&&Se(ve.next,V),error:ve.error&&Se(ve.error,V),complete:ve.complete&&Se(ve.complete,V)}):je=ve}this.destination=new _e(je)}}function ye(Te){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Te):(0,se.h)(Te)}function Ze(Te,ve){const{onStoppedNotification:be}=N.v;be&&U.z.setTimeout(()=>be(Te,ve))}const tt={closed:!0,next:re,error:function fe(Te){throw Te},complete:re}},727:(st,De,k)=>{k.d(De,{Lc:()=>de,w0:()=>re,Nn:()=>ue});var f=k(576);const N=(0,k(3888).d)(pe=>function(j){pe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Ve)=>`${Ve+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=k(8737);class re{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Se of j)Se.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,f.m)(K))try{K()}catch(Se){U=Se instanceof N?Se.errors:[Se]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Se of Ve)try{he(Se)}catch(_e){U=U??[],_e instanceof N?U=[...U,..._e.errors]:U.push(_e)}}if(U)throw new N(U)}}add(U){var j;if(U&&U!==this)if(this.closed)he(U);else{if(U instanceof re){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(U)}}_hasParent(U){const{_parentage:j}=this;return j===U||Array.isArray(j)&&j.includes(U)}_addParent(U){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(U),j):j?[j,U]:U}_removeParent(U){const{_parentage:j}=this;j===U?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,U)}remove(U){const{_finalizers:j}=this;j&&(0,se.P)(j,U),U instanceof re&&U._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const de=re.EMPTY;function ue(pe){return pe instanceof re||pe&&"closed"in pe&&(0,f.m)(pe.remove)&&(0,f.m)(pe.add)&&(0,f.m)(pe.unsubscribe)}function he(pe){(0,f.m)(pe)?pe():pe.unsubscribe()}},2416:(st,De,k)=>{k.d(De,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,De,k)=>{k.d(De,{E:()=>ee});const ee=new(k(9751).y)(re=>re.complete())},8996:(st,De,k)=>{k.d(De,{D:()=>ve});var f=k(8421),ee=k(5363),N=k(9468),de=k(9751),he=k(2202),pe=k(576),U=k(9672);function K(be,Be){if(!be)throw new Error("Iterable cannot be null");return new de.y(je=>{(0,U.f)(je,Be,()=>{const V=be[Symbol.asyncIterator]();(0,U.f)(je,Be,()=>{V.next().then(me=>{me.done?je.complete():je.next(me.value)})},0,!0)})})}var Ve=k(3670),Se=k(8239),_e=k(1144),Qe=k(6495),ye=k(2206),fe=k(4532),Ze=k(3260);function ve(be,Be){return Be?function Te(be,Be){if(null!=be){if((0,Ve.c)(be))return function se(be,Be){return(0,f.Xf)(be).pipe((0,N.R)(Be),(0,ee.Q)(Be))}(be,Be);if((0,_e.z)(be))return function ue(be,Be){return new de.y(je=>{let V=0;return Be.schedule(function(){V===be.length?je.complete():(je.next(be[V++]),je.closed||this.schedule())})})}(be,Be);if((0,Se.t)(be))return function re(be,Be){return(0,f.Xf)(be).pipe((0,N.R)(Be),(0,ee.Q)(Be))}(be,Be);if((0,ye.D)(be))return K(be,Be);if((0,Qe.T)(be))return function j(be,Be){return new de.y(je=>{let V;return(0,U.f)(je,Be,()=>{V=be[he.h](),(0,U.f)(je,Be,()=>{let me,Z;try{({value:me,done:Z}=V.next())}catch(J){return void je.error(J)}Z?je.complete():je.next(me)},0,!0)}),()=>(0,pe.m)(V?.return)&&V.return()})}(be,Be);if((0,Ze.L)(be))return function tt(be,Be){return K((0,Ze.Q)(be),Be)}(be,Be)}throw(0,fe.z)(be)}(be,Be):(0,f.Xf)(be)}},8421:(st,De,k)=>{k.d(De,{Xf:()=>Ve});var f=k(655),ee=k(1144),N=k(8239),se=k(9751),re=k(3670),de=k(2206),ue=k(4532),he=k(6495),pe=k(3260),U=k(576),j=k(7849),K=k(8822);function Ve(Te){if(Te instanceof se.y)return Te;if(null!=Te){if((0,re.c)(Te))return function Se(Te){return new se.y(ve=>{const be=Te[K.L]();if((0,U.m)(be.subscribe))return be.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,ee.z)(Te))return function _e(Te){return new se.y(ve=>{for(let be=0;be<Te.length&&!ve.closed;be++)ve.next(Te[be]);ve.complete()})}(Te);if((0,N.t)(Te))return function Qe(Te){return new se.y(ve=>{Te.then(be=>{ve.closed||(ve.next(be),ve.complete())},be=>ve.error(be)).then(null,j.h)})}(Te);if((0,de.D)(Te))return fe(Te);if((0,he.T)(Te))return function ye(Te){return new se.y(ve=>{for(const be of Te)if(ve.next(be),ve.closed)return;ve.complete()})}(Te);if((0,pe.L)(Te))return function Ze(Te){return fe((0,pe.Q)(Te))}(Te)}throw(0,ue.z)(Te)}function fe(Te){return new se.y(ve=>{(function tt(Te,ve){var be,Be,je,V;return(0,f.mG)(this,void 0,void 0,function*(){try{for(be=(0,f.KL)(Te);!(Be=yield be.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(me){je={error:me}}finally{try{Be&&!Be.done&&(V=be.return)&&(yield V.call(be))}finally{if(je)throw je.error}}ve.complete()})})(Te,ve).catch(be=>ve.error(be))})}},6451:(st,De,k)=>{k.d(De,{T:()=>de});var f=k(8189),ee=k(8421),N=k(515),se=k(7669),re=k(8996);function de(...ue){const he=(0,se.yG)(ue),pe=(0,se._6)(ue,1/0),U=ue;return U.length?1===U.length?(0,ee.Xf)(U[0]):(0,f.J)(pe)((0,re.D)(U,he)):N.E}},5403:(st,De,k)=>{k.d(De,{x:()=>ee});var f=k(2961);function ee(se,re,de,ue,he){return new N(se,re,de,ue,he)}class N extends f.Lv{constructor(re,de,ue,he,pe,U){super(re),this.onFinalize=pe,this.shouldUnsubscribe=U,this._next=de?function(j){try{de(j)}catch(K){re.error(K)}}:super._next,this._error=he?function(j){try{he(j)}catch(K){re.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(st,De,k)=>{k.d(De,{U:()=>N});var f=k(4482),ee=k(5403);function N(se,re){return(0,f.e)((de,ue)=>{let he=0;de.subscribe((0,ee.x)(ue,pe=>{ue.next(se.call(re,pe,he++))}))})}},8189:(st,De,k)=>{k.d(De,{J:()=>N});var f=k(5577),ee=k(4671);function N(se=1/0){return(0,f.z)(ee.y,se)}},5577:(st,De,k)=>{k.d(De,{z:()=>he});var f=k(4004),ee=k(8421),N=k(4482),se=k(9672),re=k(5403),ue=k(576);function he(pe,U,j=1/0){return(0,ue.m)(U)?he((K,Ve)=>(0,f.U)((Se,_e)=>U(K,Se,Ve,_e))((0,ee.Xf)(pe(K,Ve))),j):("number"==typeof U&&(j=U),(0,N.e)((K,Ve)=>function de(pe,U,j,K,Ve,Se,_e,Qe){const ye=[];let fe=0,Ze=0,tt=!1;const Te=()=>{tt&&!ye.length&&!fe&&U.complete()},ve=Be=>fe<K?be(Be):ye.push(Be),be=Be=>{Se&&U.next(Be),fe++;let je=!1;(0,ee.Xf)(j(Be,Ze++)).subscribe((0,re.x)(U,V=>{Ve?.(V),Se?ve(V):U.next(V)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;ye.length&&fe<K;){const V=ye.shift();_e?(0,se.f)(U,_e,()=>be(V)):be(V)}Te()}catch(V){U.error(V)}}))};return pe.subscribe((0,re.x)(U,ve,()=>{tt=!0,Te()})),()=>{Qe?.()}}(K,Ve,pe,j)))}},5363:(st,De,k)=>{k.d(De,{Q:()=>se});var f=k(9672),ee=k(4482),N=k(5403);function se(re,de=0){return(0,ee.e)((ue,he)=>{ue.subscribe((0,N.x)(he,pe=>(0,f.f)(he,re,()=>he.next(pe),de),()=>(0,f.f)(he,re,()=>he.complete(),de),pe=>(0,f.f)(he,re,()=>he.error(pe),de)))})}},3099:(st,De,k)=>{k.d(De,{B:()=>re});var f=k(8421),ee=k(7579),N=k(2961),se=k(4482);function re(ue={}){const{connector:he=(()=>new ee.x),resetOnError:pe=!0,resetOnComplete:U=!0,resetOnRefCountZero:j=!0}=ue;return K=>{let Ve,Se,_e,Qe=0,ye=!1,fe=!1;const Ze=()=>{Se?.unsubscribe(),Se=void 0},tt=()=>{Ze(),Ve=_e=void 0,ye=fe=!1},Te=()=>{const ve=Ve;tt(),ve?.unsubscribe()};return(0,se.e)((ve,be)=>{Qe++,!fe&&!ye&&Ze();const Be=_e=_e??he();be.add(()=>{Qe--,0===Qe&&!fe&&!ye&&(Se=de(Te,j))}),Be.subscribe(be),!Ve&&Qe>0&&(Ve=new N.Hp({next:je=>Be.next(je),error:je=>{fe=!0,Ze(),Se=de(tt,pe,je),Be.error(je)},complete:()=>{ye=!0,Ze(),Se=de(tt,U),Be.complete()}}),(0,f.Xf)(ve).subscribe(Ve))})(K)}}function de(ue,he,...pe){if(!0===he)return void ue();if(!1===he)return;const U=new N.Hp({next:()=>{U.unsubscribe(),ue()}});return he(...pe).subscribe(U)}},9468:(st,De,k)=>{k.d(De,{R:()=>ee});var f=k(4482);function ee(N,se=0){return(0,f.e)((re,de)=>{de.add(N.schedule(()=>re.subscribe(de),se))})}},8505:(st,De,k)=>{k.d(De,{b:()=>re});var f=k(576),ee=k(4482),N=k(5403),se=k(4671);function re(de,ue,he){const pe=(0,f.m)(de)||ue||he?{next:de,error:ue,complete:he}:de;return pe?(0,ee.e)((U,j)=>{var K;null===(K=pe.subscribe)||void 0===K||K.call(pe);let Ve=!0;U.subscribe((0,N.x)(j,Se=>{var _e;null===(_e=pe.next)||void 0===_e||_e.call(pe,Se),j.next(Se)},()=>{var Se;Ve=!1,null===(Se=pe.complete)||void 0===Se||Se.call(pe),j.complete()},Se=>{var _e;Ve=!1,null===(_e=pe.error)||void 0===_e||_e.call(pe,Se),j.error(Se)},()=>{var Se,_e;Ve&&(null===(Se=pe.unsubscribe)||void 0===Se||Se.call(pe)),null===(_e=pe.finalize)||void 0===_e||_e.call(pe)}))}):se.y}},4408:(st,De,k)=>{k.d(De,{o:()=>re});var f=k(727);class ee extends f.w0{constructor(ue,he){super()}schedule(ue,he=0){return this}}const N={setInterval(de,ue,...he){const{delegate:pe}=N;return pe?.setInterval?pe.setInterval(de,ue,...he):setInterval(de,ue,...he)},clearInterval(de){const{delegate:ue}=N;return(ue?.clearInterval||clearInterval)(de)},delegate:void 0};var se=k(8737);class re extends ee{constructor(ue,he){super(ue,he),this.scheduler=ue,this.work=he,this.pending=!1}schedule(ue,he=0){if(this.closed)return this;this.state=ue;const pe=this.id,U=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(U,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(U,this.id,he),this}requestAsyncId(ue,he,pe=0){return N.setInterval(ue.flush.bind(ue,this),pe)}recycleAsyncId(ue,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;N.clearInterval(he)}execute(ue,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ue,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,he){let U,pe=!1;try{this.work(ue)}catch(j){pe=!0,U=j||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ue,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(pe,this),null!=ue&&(this.id=this.recycleAsyncId(he,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,De,k)=>{k.d(De,{v:()=>N});var f=k(6063);class ee{constructor(re,de=ee.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,de)}}ee.now=f.l.now;class N extends ee{constructor(re,de=ee.now){super(re,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,ue){for(;re=de.shift();)re.unsubscribe();throw ue}}}},4986:(st,De,k)=>{k.d(De,{z:()=>N});var f=k(4408);const N=new(k(7565).v)(f.o)},6063:(st,De,k)=>{k.d(De,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(st,De,k)=>{k.d(De,{z:()=>f});const f={setTimeout(ee,N,...se){const{delegate:re}=f;return re?.setTimeout?re.setTimeout(ee,N,...se):setTimeout(ee,N,...se)},clearTimeout(ee){const{delegate:N}=f;return(N?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(st,De,k)=>{k.d(De,{h:()=>ee});const ee=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,De,k)=>{k.d(De,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,De,k)=>{k.d(De,{_6:()=>de,jO:()=>se,yG:()=>re});var f=k(576);function N(ue){return ue[ue.length-1]}function se(ue){return(0,f.m)(N(ue))?ue.pop():void 0}function re(ue){return function ee(ue){return ue&&(0,f.m)(ue.schedule)}(N(ue))?ue.pop():void 0}function de(ue,he){return"number"==typeof N(ue)?ue.pop():he}},8737:(st,De,k)=>{function f(ee,N){if(ee){const se=ee.indexOf(N);0<=se&&ee.splice(se,1)}}k.d(De,{P:()=>f})},3888:(st,De,k)=>{function f(ee){const se=ee(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(De,{d:()=>f})},2806:(st,De,k)=>{k.d(De,{O:()=>se,x:()=>N});var f=k(2416);let ee=null;function N(re){if(f.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),re(),de){const{errorThrown:ue,error:he}=ee;if(ee=null,ue)throw he}}else re()}function se(re){f.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(st,De,k)=>{function f(ee,N,se,re=0,de=!1){const ue=N.schedule(function(){se(),de?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(ue),!de)return ue}k.d(De,{f:()=>f})},4671:(st,De,k)=>{function f(ee){return ee}k.d(De,{y:()=>f})},1144:(st,De,k)=>{k.d(De,{z:()=>f});const f=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(st,De,k)=>{k.d(De,{D:()=>ee});var f=k(576);function ee(N){return Symbol.asyncIterator&&(0,f.m)(N?.[Symbol.asyncIterator])}},576:(st,De,k)=>{function f(ee){return"function"==typeof ee}k.d(De,{m:()=>f})},3670:(st,De,k)=>{k.d(De,{c:()=>N});var f=k(8822),ee=k(576);function N(se){return(0,ee.m)(se[f.L])}},6495:(st,De,k)=>{k.d(De,{T:()=>N});var f=k(2202),ee=k(576);function N(se){return(0,ee.m)(se?.[f.h])}},8239:(st,De,k)=>{k.d(De,{t:()=>ee});var f=k(576);function ee(N){return(0,f.m)(N?.then)}},3260:(st,De,k)=>{k.d(De,{L:()=>se,Q:()=>N});var f=k(655),ee=k(576);function N(re){return(0,f.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:he,done:pe}=yield(0,f.qq)(ue.read());if(pe)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(he)}}finally{ue.releaseLock()}})}function se(re){return(0,ee.m)(re?.getReader)}},4482:(st,De,k)=>{k.d(De,{A:()=>ee,e:()=>N});var f=k(576);function ee(se){return(0,f.m)(se?.lift)}function N(se){return re=>{if(ee(re))return re.lift(function(de){try{return se(de,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(st,De,k)=>{k.d(De,{U:()=>N,z:()=>ee});var f=k(4671);function ee(...se){return N(se)}function N(se){return 0===se.length?f.y:1===se.length?se[0]:function(de){return se.reduce((ue,he)=>he(ue),de)}}},7849:(st,De,k)=>{k.d(De,{h:()=>N});var f=k(2416),ee=k(3410);function N(se){ee.z.setTimeout(()=>{const{onUnhandledError:re}=f.v;if(!re)throw se;re(se)})}},4532:(st,De,k)=>{function f(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(De,{z:()=>f})},655:(st,De,k)=>{function se(Z,J){var ie={};for(var te in Z)Object.prototype.hasOwnProperty.call(Z,te)&&J.indexOf(te)<0&&(ie[te]=Z[te]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(te=Object.getOwnPropertySymbols(Z);Re<te.length;Re++)J.indexOf(te[Re])<0&&Object.prototype.propertyIsEnumerable.call(Z,te[Re])&&(ie[te[Re]]=Z[te[Re]])}return ie}function he(Z,J,ie,te){return new(ie||(ie=Promise))(function(Pe,lt){function Bt(en){try{ze(te.next(en))}catch(En){lt(En)}}function Vt(en){try{ze(te.throw(en))}catch(En){lt(En)}}function ze(en){en.done?Pe(en.value):function Re(Pe){return Pe instanceof ie?Pe:new ie(function(lt){lt(Pe)})}(en.value).then(Bt,Vt)}ze((te=te.apply(Z,J||[])).next())})}function ye(Z){return this instanceof ye?(this.v=Z,this):new ye(Z)}function fe(Z,J,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,te=ie.apply(Z,J||[]),Pe=[];return Re={},lt("next"),lt("throw"),lt("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function lt(Ht){te[Ht]&&(Re[Ht]=function(Gt){return new Promise(function(vr,Ot){Pe.push([Ht,Gt,vr,Ot])>1||Bt(Ht,Gt)})})}function Bt(Ht,Gt){try{!function Vt(Ht){Ht.value instanceof ye?Promise.resolve(Ht.value.v).then(ze,en):En(Pe[0][2],Ht)}(te[Ht](Gt))}catch(vr){En(Pe[0][3],vr)}}function ze(Ht){Bt("next",Ht)}function en(Ht){Bt("throw",Ht)}function En(Ht,Gt){Ht(Gt),Pe.shift(),Pe.length&&Bt(Pe[0][0],Pe[0][1])}}function tt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,J=Z[Symbol.asyncIterator];return J?J.call(Z):(Z=function K(Z){var J="function"==typeof Symbol&&Symbol.iterator,ie=J&&Z[J],te=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&te>=Z.length&&(Z=void 0),{value:Z&&Z[te++],done:!Z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},te("next"),te("throw"),te("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function te(Pe){ie[Pe]=Z[Pe]&&function(lt){return new Promise(function(Bt,Vt){!function Re(Pe,lt,Bt,Vt){Promise.resolve(Vt).then(function(ze){Pe({value:ze,done:Bt})},lt)}(Bt,Vt,(lt=Z[Pe](lt)).done,lt.value)})}}}k.d(De,{FC:()=>fe,KL:()=>tt,_T:()=>se,mG:()=>he,qq:()=>ye})},4650:(st,De,k)=>{k.d(De,{$8M:()=>Lu,$Z:()=>Fw,AFp:()=>B_,ALo:()=>ob,AaK:()=>he,AsE:()=>Zv,B6R:()=>z,CHM:()=>wu,CRH:()=>Sh,CZH:()=>xh,CqO:()=>Vv,D6c:()=>iI,DdM:()=>w_,EJc:()=>$_,EpF:()=>Rm,F4k:()=>fC,FYo:()=>Fe,FiY:()=>xe,G48:()=>Gb,GfV:()=>Zn,Gpc:()=>j,JOm:()=>Hs,KtG:()=>Cu,LFG:()=>ln,LSH:()=>Od,Lbi:()=>GD,Lck:()=>gD,MAs:()=>kv,MMx:()=>y_,NdJ:()=>Uv,OlP:()=>sn,Oqu:()=>zf,PXZ:()=>ay,Q6J:()=>Om,QGY:()=>Lv,QP$:()=>Ei,Qsj:()=>Ke,R0b:()=>$i,RDi:()=>ig,Rgc:()=>up,SBq:()=>P,Sil:()=>KD,Suo:()=>dp,TTD:()=>Yi,TgZ:()=>Ol,X6Q:()=>Hb,XFs:()=>We,Xpm:()=>$,Xts:()=>Nd,Y36:()=>_l,YKP:()=>m_,YNc:()=>Rv,Yjl:()=>Rt,Yz7:()=>Gt,Z0I:()=>sa,ZZ4:()=>y0,_Bn:()=>YC,_UZ:()=>Nm,_Vd:()=>g,_c5:()=>rI,_uU:()=>qv,aQg:()=>Sp,c2e:()=>qD,cJS:()=>Ot,cg1:()=>Um,dDg:()=>Q_,dqk:()=>tn,eFA:()=>uy,ekj:()=>ch,eoX:()=>J_,f3M:()=>I,g9A:()=>oy,h0i:()=>Wl,hGG:()=>_0,iGM:()=>O_,ifc:()=>ot,ip1:()=>ry,jDz:()=>zm,kL8:()=>AC,lG2:()=>$n,lcZ:()=>sb,lqb:()=>Uo,lri:()=>wp,n5z:()=>no,oAB:()=>nt,oxw:()=>Za,q4F:()=>Fi,qLn:()=>wf,qOj:()=>bm,qZA:()=>ni,rWj:()=>Nh,s9C:()=>Vn,sBO:()=>u0,sIi:()=>qa,s_b:()=>Zm,soG:()=>ru,tb:()=>j_,tp0:()=>pt,uIk:()=>Am,vHH:()=>_e,vpe:()=>ra,wAp:()=>Ye,xi3:()=>ab,xp6:()=>Tw,z2F:()=>Rh,zSh:()=>Vd,zs3:()=>$a});var f=k(7579),ee=k(727),N=k(9751),se=k(6451),re=k(3099);function de(i){for(let o in i)if(i[o]===de)return o;throw Error("Could not find renamed property on target object.")}function ue(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const U=de({__forward_ref__:de});function j(i){return i.__forward_ref__=j,i.toString=function(){return he(this())},i}function K(i){return Ve(i)?i():i}function Ve(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===j}class _e extends Error{constructor(o,a){super(function Qe(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,o){throw new _e(-201,!1)}function Vt(i,o){null==i&&function ze(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Gt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function Jt(i){return Pr(i,Ii)||Pr(i,ii)}function sa(i){return null!==Jt(i)}function Pr(i,o){return i.hasOwnProperty(o)?i[o]:null}function yo(i){return i&&(i.hasOwnProperty(Rr)||i.hasOwnProperty(vs))?i[Rr]:null}const Ii=de({\u0275prov:de}),Rr=de({\u0275inj:de}),ii=de({ngInjectableDef:de}),vs=de({ngInjectorDef:de});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let kr;function Dn(i){const o=kr;return kr=i,o}function oi(i,o,a){const c=Jt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&We.Optional?null:void 0!==o?o:void ve(he(i))}function Tn(i){return{toString:i}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),ot=(()=>{return(i=ot||(ot={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ot;var i})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_r={},mt=[],qi=de({\u0275cmp:de}),zt=de({\u0275dir:de}),si=de({\u0275pipe:de}),$t=de({\u0275mod:de}),q=de({\u0275fac:de}),B=de({__NG_ELEMENT_ID__:de});let L=0;function $(i){return Tn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||mt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ot.Emulated,id:"c"+L++,styles:i.styles||mt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,v=i.features;return l.inputs=qt(i.inputs,c),l.outputs=qt(i.outputs),v&&v.forEach(C=>C(l)),l.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ie).filter(Ue):null,l.pipeDefs=p?()=>("function"==typeof p?p():p).map(Pn).filter(Ue):null,l})}function z(i,o,a){const c=i.\u0275cmp;c.directiveDefs=()=>("function"==typeof o?o():o).map(Ie),c.pipeDefs=()=>("function"==typeof a?a():a).map(Pn)}function Ie(i){return At(i)||hn(i)}function Ue(i){return null!==i}function nt(i){return Tn(()=>({type:i.type,bootstrap:i.bootstrap||mt,declarations:i.declarations||mt,imports:i.imports||mt,exports:i.exports||mt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function qt(i,o){if(null==i)return _r;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),a[l]=c,o&&(o[l]=p)}return a}const $n=$;function Rt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function At(i){return i[qi]||null}function hn(i){return i[zt]||null}function Pn(i){return i[si]||null}function Ei(i){const o=At(i)||hn(i)||Pn(i);return null!==o&&o.standalone}function wr(i,o){const a=i[$t]||null;if(!a&&!0===o)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function er(i){return Array.isArray(i)&&"object"==typeof i[1]}function Cr(i){return Array.isArray(i)&&!0===i[1]}function cu(i){return 0!=(8&i.flags)}function ua(i){return 2==(2&i.flags)}function Oc(i){return 1==(1&i.flags)}function dr(i){return null!==i.template}function Hh(i){return 0!=(256&i[2])}function Ti(i,o){return i.hasOwnProperty(q)?i[q]:null}class Ki{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Yi(){return Wo}function Wo(i){return i.type.prototype.ngOnChanges&&(i.setInput=du),ca}function ca(){const i=Wh(this),o=i?.current;if(o){const a=i.previous;if(a===_r)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function du(i,o,a,c){const l=Wh(i)||function la(i,o){return i[kc]=o}(i,{previous:_r,current:null}),p=l.current||(l.current={}),v=l.previous,C=this.declaredInputs[a],b=v[C];p[C]=new Ki(b&&b.currentValue,o,v===_r),i[c]=o}Yi.ngInherit=!0;const kc="__ngSimpleChanges__";function Wh(i){return i[kc]||null}function vn(i){for(;Array.isArray(i);)i=i[0];return i}function Wr(i,o){return vn(o[i])}function br(i,o){return vn(o[i.index])}function Cs(i,o){return i.data[o]}function Ji(i,o){return i[o]}function Ut(i,o){const a=o[i];return er(a)?a:a[0]}function Zo(i){return 64==(64&i[2])}function ci(i,o){return null==o?null:i[o]}function mu(i){i[18]=0}function mn(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const yt={lFrame:zc(null),bindingsEnabled:!0};function Xi(){return yt.bindingsEnabled}function Ee(){return yt.lFrame.lView}function kt(){return yt.lFrame.tView}function wu(i){return yt.lFrame.contextLView=i,i[8]}function Cu(i){return yt.lFrame.contextLView=null,i}function _n(){let i=bu();for(;null!==i&&64===i.type;)i=i.parent;return i}function bu(){return yt.lFrame.currentTNode}function Zr(i,o){const a=yt.lFrame;a.currentTNode=i,a.isParent=o}function ha(){return yt.lFrame.isParent}function wn(){const i=yt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Ko(){return yt.lFrame.bindingIndex++}function eo(i){const o=yt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Yp(i,o){const a=yt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Iu(o)}function Iu(i){yt.lFrame.currentDirectiveIndex=i}function $c(){return yt.lFrame.currentQueryIndex}function ya(i){yt.lFrame.currentQueryIndex=i}function Hc(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Eu(i,o,a){if(a&We.SkipSelf){let l=o,p=i;for(;!(l=l.parent,null!==l||a&We.Host||(l=Hc(p),null===l||(p=p[15],10&l.type))););if(null===l)return!1;o=l,i=p}const c=yt.lFrame=Gc();return c.currentTNode=o,c.lView=i,!0}function Du(i){const o=Gc(),a=i[1];yt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Gc(){const i=yt.lFrame,o=null===i?null:i.child;return null===o?zc(i):o}function zc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function qc(){const i=yt.lFrame;return yt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const fd=qc;function Yo(){const i=qc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function zn(){return yt.lFrame.selectedIndex}function Lr(i){yt.lFrame.selectedIndex=i}function cn(){const i=yt.lFrame;return Cs(i.tView,i.selectedIndex)}function Kc(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:x}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),C&&((i.contentHooks||(i.contentHooks=[])).push(a,C),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,C)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function Is(i,o,a){Ds(i,o,3,a)}function Es(i,o,a,c){(3&i[2])===a&&Ds(i,o,a,c)}function md(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Ds(i,o,a,c){const p=c??-1,v=o.length-1;let C=0;for(let b=void 0!==c?65535&i[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=c&&C>=c)break}else o[b]<0&&(i[18]+=65536),(C<p||-1==p)&&(yd(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function yd(i,o,a,c){const l=a[c]<0,p=a[c+1],C=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class Do{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function As(i,o,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const p=a[c++],v=a[c++],C=a[c++];i.setAttribute(o,v,C,p)}else{const p=l,v=a[++c];Ou(p)?i.setProperty(o,p,v):i.setAttribute(o,p,v),c++}}return c}function Xo(i){return 3===i||4===i||6===i}function Ou(i){return 64===i.charCodeAt(0)}function va(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const l=o[c];"number"==typeof l?a=l:0===a||_d(i,a,l,null,-1===a||2===a?o[++c]:null)}}return i}function _d(i,o,a,c,l){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const C=i[p++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=p-1;break}}}for(;p<i.length;){const C=i[p];if("number"==typeof C)break;if(C===a){if(null===c)return void(null!==l&&(i[p+1]=l));if(c===i[p+1])return void(i[p+2]=l)}p++,null!==c&&p++,null!==l&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==l&&i.splice(p++,0,l)}function wd(i){return-1!==i}function tr(i){return 32767&i}function wa(i,o){let a=function _a(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let Si=!0;function Ca(i){const o=Si;return Si=i,o}let Sn=0;const li={};function es(i,o){const a=Nu(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,Ia(c.data,i),Ia(o,null),Ia(c.blueprint,null));const l=Ru(i,o),p=i.injectorIndex;if(wd(l)){const v=tr(l),C=wa(l,o),b=C[1].data;for(let T=0;T<8;T++)o[p+T]=C[v+T]|b[v+T]}return o[p+8]=l,p}function Ia(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Nu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ru(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=o;for(;null!==l;){if(c=xs(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function To(i,o,a){!function Pu(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(B)&&(c=a[B]),null==c&&(c=a[B]=Sn++);const l=255&c;o.data[i+(l>>5)]|=1<<l}(i,o,a)}function Ao(i,o,a){if(a&We.Optional||void 0!==i)return i;ve()}function Qc(i,o,a,c){if(a&We.Optional&&void 0===c&&(c=null),0==(a&(We.Self|We.Host))){const l=i[9],p=Dn(void 0);try{return l?l.get(o,c,a&We.Optional):oi(o,c,a&We.Optional)}finally{Dn(p)}}return Ao(c,0,a)}function ts(i,o,a,c=We.Default,l){if(null!==i){if(1024&o[2]){const v=function Ms(i,o,a,c,l){let p=i,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=Ea(p,v,a,c|We.Self,li);if(C!==li)return C;let b=p.parent;if(!b){const T=v[21];if(T){const x=T.get(a,li,c);if(x!==li)return x}b=xs(v),v=v[15]}p=b}return l}(i,o,a,c,li);if(v!==li)return v}const p=Ea(i,o,a,c,li);if(p!==li)return p}return Qc(o,a,c,l)}function Ea(i,o,a,c,l){const p=function Jc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(B)?i[B]:void 0;return"number"==typeof o?o>=0?255&o:Xc:o}(a);if("function"==typeof p){if(!Eu(o,i,c))return c&We.Host?Ao(l,0,c):Qc(o,a,c,l);try{const v=p(c);if(null!=v||c&We.Optional)return v;ve()}finally{fd()}}else if("number"==typeof p){let v=null,C=Nu(i,o),b=-1,T=c&We.Host?o[16][6]:null;for((-1===C||c&We.SkipSelf)&&(b=-1===C?Ru(i,o):o[C+8],-1!==b&&Da(c,!1)?(v=o[1],C=tr(b),o=wa(b,o)):C=-1);-1!==C;){const x=o[1];if(ku(p,C,x.data)){const R=Id(C,o,a,v,c,T);if(R!==li)return R}b=o[C+8],-1!==b&&Da(c,o[1].data[C+8]===T)&&ku(p,C,o)?(v=x,C=tr(b),o=wa(b,o)):C=-1}}return l}function Id(i,o,a,c,l,p){const v=o[1],C=v.data[i+8],x=Ss(C,v,a,null==c?ua(C)&&Si:c!=v&&0!=(3&C.type),l&We.Host&&p===C);return null!==x?to(o,v,x,C):li}function Ss(i,o,a,c,l){const p=i.providerIndexes,v=o.data,C=1048575&p,b=i.directiveStart,x=p>>20,G=l?C+x:i.directiveEnd;for(let X=c?C:C+x;X<G;X++){const we=v[X];if(X<b&&a===we||X>=b&&we.type===a)return X}if(l){const X=v[b];if(X&&dr(X)&&X.type===a)return b}return null}function to(i,o,a,c){let l=i[a];const p=o.data;if(function Jo(i){return i instanceof Do}(l)){const v=l;v.resolving&&function Ze(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new _e(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}(p[a]));const C=Ca(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?Dn(v.injectImpl):null;Eu(i,c,We.Default);try{l=i[a]=v.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function gd(i,o,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:p}=o.type.prototype;if(c){const v=Wo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&Dn(b),Ca(C),v.resolving=!1,fd()}}return l}function ku(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Da(i,o){return!(i&We.Self||i&We.Host&&o)}class ns{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return ts(this._tNode,this._lView,o,c,a)}}function Xc(){return new ns(_n(),Ee())}function no(i){return Tn(()=>{const o=i.prototype.constructor,a=o[q]||Fu(o),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const p=l[q]||Fu(l);if(p&&p!==a)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Fu(i){return Ve(i)?()=>{const o=Fu(K(i));return o&&o()}:Ti(i)}function xs(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Lu(i){return function bd(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const p=a[l];if(Xo(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(p===o)return a[l+1];l+=2}}}return null}(_n(),i)}const So="__parameters__";function Ns(i,o,a){return Tn(()=>{const c=function Vu(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(o);function l(...p){if(this instanceof l)return c.apply(this,p),this;const v=new l(...p);return C.annotation=v,C;function C(b,T,x){const R=b.hasOwnProperty(So)?b[So]:Object.defineProperty(b,So,{value:[]})[So];for(;R.length<=x;)R.push(null);return(R[x]=R[x]||[]).push(v),b}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class sn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Gt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pn(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(o===i&&(o=i.slice(0,a)),pn(c,o)):o!==i&&o.push(c)}return o}function hi(i,o){i.forEach(a=>Array.isArray(a)?hi(a,o):o(a))}function Aa(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Ir(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function it(i,o,a){let c=Oo(i,o);return c>=0?i[1|c]=a:(c=~c,function tl(i,o,a,c){let l=i.length;if(l==o)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>o;)i[l]=i[l-2],l--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Ma(i,o){const a=Oo(i,o);if(a>=0)return i[1|a]}function Oo(i,o){return function ks(i,o,a){let c=0,l=i.length>>a;for(;l!==c;){const p=c+(l-c>>1),v=i[p<<a];if(o===v)return p<<a;v>o?l=p:c=p+1}return~(l<<a)}(i,o,1)}const fi={},il="__NG_DI_FLAG__",Ls="ngTempTokenPath",ro=/\n/gm,hr="__source";let Ro;function io(i){const o=Ro;return Ro=i,o}function Fn(i,o=We.Default){if(void 0===Ro)throw new _e(-203,!1);return null===Ro?oi(i,void 0,o):Ro.get(i,o&We.Optional?null:void 0,o)}function ln(i,o=We.Default){return(function zi(){return kr}()||Fn)(K(i),o)}function I(i,o=We.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),ln(i,o)}function D(i){const o=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new _e(900,!1);let l,p=We.Default;for(let v=0;v<c.length;v++){const C=c[v],b=F(C);"number"==typeof b?-1===b?l=C.token:p|=b:l=C}o.push(ln(l,p))}else o.push(ln(c))}return o}function M(i,o){return i[il]=o,i.prototype[il]=o,i}function F(i){return i[il]}const xe=M(Ns("Optional"),8),pt=M(Ns("SkipSelf"),4);let sf;function ig(i){sf=i}class Ad{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Pi(i){return i instanceof Ad?i.changingThisBreaksApplicationSecurity:i}const Oy=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Mn=(()=>((Mn=Mn||{})[Mn.NONE=0]="NONE",Mn[Mn.HTML=1]="HTML",Mn[Mn.STYLE=2]="STYLE",Mn[Mn.SCRIPT=3]="SCRIPT",Mn[Mn.URL=4]="URL",Mn[Mn.RESOURCE_URL=5]="RESOURCE_URL",Mn))();function Od(i){const o=function ll(){const i=Ee();return i&&i[12]}();return o?o.sanitize(Mn.URL,i)||"":function Bs(i,o){const a=function uf(i){return i instanceof Ad&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?Pi(i):function ka(i){return(i=String(i)).match(Oy)?i:"unsafe:"+i}(ye(i))}const Nd=new sn("ENVIRONMENT_INITIALIZER"),Rd=new sn("INJECTOR",-1),kd=new sn("INJECTOR_DEF_TYPES");class gf{get(o,a=fi){if(a===fi){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return a}}function ky(...i){return{\u0275providers:Fd(0,i)}}function Fd(i,...o){const a=[],c=new Set;let l;return hi(o,p=>{const v=p;Er(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&gg(l,a),a}function gg(i,o){for(let a=0;a<i.length;a++){const{providers:l}=i[a];hi(l,p=>{o.push(p)})}}function Er(i,o,a,c){if(!(i=K(i)))return!1;let l=null,p=yo(i);const v=!p&&At(i);if(p||v){if(v&&!v.standalone)return!1;l=i}else{const b=i.ngModule;if(p=yo(b),!p)return!1;l=b}const C=c.has(l);if(v){if(C)return!1;if(c.add(l),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of b)Er(T,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let T;c.add(l);try{hi(p.imports,x=>{Er(x,o,a,c)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&gg(T,o)}if(!C){const T=Ti(l)||(()=>new l);o.push({provide:l,useFactory:T,deps:mt},{provide:kd,useValue:l,multi:!0},{provide:Nd,useValue:()=>ln(l),multi:!0})}const b=p.providers;null==b||C||hi(b,x=>{o.push(x)})}}return l!==i&&void 0!==i.providers}const mf=de({provide:String,useValue:de});function dl(i){return null!==i&&"object"==typeof i&&mf in i}function ki(i){return"function"==typeof i}const Vd=new sn("Set Injector scope."),so={},$s={};let Ud;function Bd(){return void 0===Ud&&(Ud=new gf),Ud}class Uo{}class jd extends Uo{constructor(o,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zu(o,v=>this.processProvider(v)),this.records.set(Rd,Qr(void 0,this)),l.has("environment")&&this.records.set(Uo,Qr(void 0,this));const p=this.records.get(Vd);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(kd.multi,mt,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=io(this),c=Dn(void 0);try{return o()}finally{io(a),Dn(c)}}get(o,a=fi,c=We.Default){this.assertNotDestroyed();const l=io(this),p=Dn(void 0);try{if(!(c&We.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function yg(i){return"function"==typeof i||"object"==typeof i&&i instanceof sn}(o)&&Jt(o);C=b&&this.injectableDefInScope(b)?Qr(ar(o),so):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&We.Self?Bd():this.parent).get(o,a=c&We.Optional&&a===fi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ls]=v[Ls]||[]).unshift(he(o)),l)throw v;return function Y(i,o,a,c){const l=i[Ls];throw o[hr]&&l.unshift(o[hr]),i.message=function ne(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=he(o);if(Array.isArray(o))l=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):he(C)))}l=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(ro,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Ls]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Dn(p),io(l)}}resolveInjectorInitializers(){const o=io(this),a=Dn(void 0);try{const c=this.get(Nd.multi,mt,We.Self);for(const l of c)l()}finally{io(o),Dn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(o){let a=ki(o=K(o))?o:K(o&&o.provide);const c=function hl(i){return dl(i)?Qr(void 0,i.useValue):Qr(Hd(i),so)}(o);if(ki(o)||!0!==o.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Qr(void 0,so,!0),l.factory=()=>D(l.multi),this.records.set(a,l)),a=o,l.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===so&&(a.value=$s,a.value=a.factory()),"object"==typeof a.value&&a.value&&function mg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function ar(i){const o=Jt(i),a=null!==o?o.factory:Ti(i);if(null!==a)return a;if(i instanceof sn)throw new _e(204,!1);if(i instanceof Function)return function $d(i){const o=i.length;if(o>0)throw function Mo(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new _e(204,!1);const a=function lr(i){const o=i&&(i[Ii]||i[ii]);if(o){const a=function Nr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new _e(204,!1)}function Hd(i,o,a){let c;if(ki(i)){const l=K(i);return Ti(l)||ar(l)}if(dl(i))c=()=>K(i.useValue);else if(function Ri(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...D(i.deps||[]));else if(function Gu(i){return!(!i||!i.useExisting)}(i))c=()=>ln(K(i.useExisting));else{const l=K(i&&(i.useClass||i.provide));if(!function as(i){return!!i.deps}(i))return Ti(l)||ar(l);c=()=>new l(...D(i.deps))}return c}function Qr(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function vf(i){return!!i.\u0275providers}function zu(i,o){for(const a of i)Array.isArray(a)?zu(a,o):vf(a)?zu(a.\u0275providers,o):o(a)}class _f{}class h{resolveComponentFactory(o){throw function _g(i){const o=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let g=(()=>{class i{}return i.NULL=new h,i})();function _(){return A(_n(),Ee())}function A(i,o){return new P(br(i,o))}let P=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=_,i})();function W(i){return i instanceof P?i.nativeElement:i}class Fe{}let Ke=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function gt(){const i=Ee(),a=Ut(_n().index,i);return(er(a)?a:i)[11]}(),i})(),ct=(()=>{class i{}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:()=>null}),i})();class Zn{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Fi=new Zn("14.2.2"),qu={};function Uy(i){return i.ngOriginalError}class wf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Uy(o);for(;a&&Uy(a);)a=Uy(a);return a||null}}const By=new Map;let YI=0;const Tg="__ngContext__";function Dr(i,o){er(o)?(i[Tg]=o[20],function JI(i){By.set(i[20],i)}(o)):i[Tg]=o}function Ba(i){return i instanceof Function?i():i}var Hs=(()=>((Hs=Hs||{})[Hs.Important=1]="Important",Hs[Hs.DashCase=2]="DashCase",Hs))();function zy(i,o){return undefined(i,o)}function Yd(i){const o=i[3];return Cr(o)?o[3]:o}function Mg(i){return uw(i[13])}function xg(i){return uw(i[4])}function uw(i){for(;null!==i&&!Cr(i);)i=i[4];return i}function Qd(i,o,a,c,l){if(null!=c){let p,v=!1;Cr(c)?p=c:er(c)&&(v=!0,c=c[0]);const C=vn(c);0===i&&null!==a?null==l?gw(o,a,C):Gs(o,a,C,l||null,!0):1===i&&null!==a?Gs(o,a,C,l||null,!0):2===i?function hE(i,o,a){const c=Ng(i,o);c&&function dE(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,C,v):3===i&&o.destroyNode(C),null!=p&&function AA(i,o,a,c,l){const p=a[7];p!==vn(a)&&Qd(o,i,c,p,l);for(let C=10;C<a.length;C++){const b=a[C];yl(b[1],b,i,o,c,p)}}(o,i,p,a,l)}}function Og(i,o,a){return i.createElement(o,a)}function hw(i,o){const a=i[9],c=a.indexOf(o),l=o[3];512&o[2]&&(o[2]&=-513,mn(l,-1)),a.splice(c,1)}function Ky(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&hw(l,c),o>0&&(i[a-1][4]=c[4]);const p=Ir(i,10+o);!function Zy(i,o){yl(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function If(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&yl(i,o,a,3,null,null),function DA(i){let o=i[13];if(!o)return Pg(i[1],i);for(;o;){let a=null;if(er(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)er(o)&&Pg(o[1],o),o=o[3];null===o&&(o=i),er(o)&&Pg(o[1],o),a=o&&o[4]}o=a}}(o)}}function Pg(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Qy(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=o[a[c]];if(!(l instanceof Do)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=l[p[v]],b=p[v+1];try{b.call(C)}finally{}}else try{p.call(l)}finally{}}}}(i,o),function Yy(i,o){const a=i.cleanup,c=o[7];let l=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],C="function"==typeof v?v(o):vn(o[v]),b=c[l=a[p+2]],T=a[p+3];"boolean"==typeof T?C.removeEventListener(a[p],b,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),p+=2}else{const v=c[l=a[p+1]];a[p].call(v)}if(null!==c){for(let p=l+1;p<c.length;p++)(0,c[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Cr(o[3])){a!==o[3]&&hw(a,o);const c=o[19];null!==c&&c.detachView(i)}!function XI(i){By.delete(i[20])}(o)}}function fw(i,o,a){return function pw(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===ot.None||l===ot.Emulated)return null}return br(c,a)}(i,o.parent,a)}function Gs(i,o,a,c,l){i.insertBefore(o,a,c,l)}function gw(i,o,a){i.appendChild(o,a)}function mw(i,o,a,c,l){null!==c?Gs(i,o,a,c,l):gw(i,o,a)}function Ng(i,o){return i.parentNode(o)}let Jy=function vw(i,o,a){return 40&i.type?br(i,a):null};function kg(i,o,a,c){const l=fw(i,c,o),p=o[11],C=function Tr(i,o,a){return Jy(i,o,a)}(c.parent||o[6],c,o);if(null!=l)if(Array.isArray(a))for(let b=0;b<a.length;b++)mw(p,l,a[b],C,!1);else mw(p,l,a,C,!1)}function Fg(i,o){if(null!==o){const a=o.type;if(3&a)return br(o,i);if(4&a)return _w(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Fg(i,c);{const l=i[o.index];return Cr(l)?_w(-1,l):vn(l)}}if(32&a)return zy(o,i)()||vn(i[o.index]);{const c=Xy(i,o);return null!==c?Array.isArray(c)?c[0]:Fg(Yd(i[16]),c):Fg(i,o.next)}}return null}function Xy(i,o){return null!==o?i[16][6].projection[o.projection]:null}function _w(i,o){const a=10+i+1;if(a<o.length){const c=o[a],l=c[1].firstChild;if(null!==l)return Fg(c,l)}return o[7]}function ev(i,o,a,c,l,p,v){for(;null!=a;){const C=c[a.index],b=a.type;if(v&&0===o&&(C&&Dr(vn(C),c),a.flags|=4),64!=(64&a.flags))if(8&b)ev(i,o,a.child,c,l,p,!1),Qd(o,i,l,C,p);else if(32&b){const T=zy(a,c);let x;for(;x=T();)Qd(o,i,l,x,p);Qd(o,i,l,C,p)}else 16&b?Ef(i,o,c,a,l,p):Qd(o,i,l,C,p);a=v?a.projectionNext:a.next}}function yl(i,o,a,c,l,p){ev(a,c,i.firstChild,o,l,p,!1)}function Ef(i,o,a,c,l,p){const v=a[16],b=v[6].projection[c.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)Qd(o,i,l,b[T],p);else ev(i,o,b,v[3],l,p,!0)}function vl(i,o,a){i.setAttribute(o,"style",a)}function Df(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function fE(i,o,a){let c=i.length;for(;;){const l=i.indexOf(o,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const p=o.length;if(l+p===c||i.charCodeAt(l+p)<=32)return l}a=l+1}}const tv="ng-template";function nv(i,o,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==fE(l.toLowerCase(),o,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===o)return!0;return!1}}return!1}function bw(i){return 4===i.type&&i.value!==tv}function gE(i,o,a){return o===(4!==i.type||a?i.value:tv)}function mE(i,o,a){let c=4;const l=i.attrs||[],p=function SA(i){for(let o=0;o<i.length;o++)if(Xo(i[o]))return o;return i.length}(l);let v=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!gE(i,b,a)||""===b&&1===o.length){if(Bo(c))return!1;v=!0}}else{const T=8&c?b:o[++C];if(8&c&&null!==i.attrs){if(!nv(i.attrs,T,a)){if(Bo(c))return!1;v=!0}continue}const R=yE(8&c?"class":b,l,bw(i),a);if(-1===R){if(Bo(c))return!1;v=!0;continue}if(""!==T){let G;G=R>p?"":l[R+1].toLowerCase();const X=8&c?G:null;if(X&&-1!==fE(X,T,0)||2&c&&T!==G){if(Bo(c))return!1;v=!0}}}}else{if(!v&&!Bo(c)&&!Bo(b))return!1;if(v&&Bo(b))continue;v=!1,c=b|1&c}}return Bo(c)||v}function Bo(i){return 0==(1&i)}function yE(i,o,a,c){if(null===o)return-1;let l=0;if(c||!a){let p=!1;for(;l<o.length;){const v=o[l];if(v===i)return l;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=o[++l];for(;"string"==typeof C;)C=o[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=p?1:2}return-1}return function Iw(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function vE(i,o,a=!1){for(let c=0;c<o.length;c++)if(mE(i,o[c],a))return!0;return!1}function Ew(i,o){return i?":not("+o.trim()+")":o}function Dw(i){let o=i[0],a=1,c=2,l="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const C=i[++a];l+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!Bo(v)&&(o+=Ew(p,l),l=""),c=v,p=p||!Bo(c);a++}return""!==l&&(o+=Ew(p,l)),o}const Mt={};function Tw(i){Aw(kt(),Ee(),zn()+i,!1)}function Aw(i,o,a,c){if(!c)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&Is(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Es(o,p,0,a)}Lr(a)}function zs(i,o=null,a=null,c){const l=at(i,o,a,c);return l.resolveInjectorInitializers(),l}function at(i,o=null,a=null,c,l=new Set){const p=[a||mt,ky(i)];return c=c||("object"==typeof i?void 0:he(i)),new jd(p,o||Bd(),c||null,l)}let $a=(()=>{class i{static create(a,c){if(Array.isArray(a))return zs({name:""},c,a,"");{const l=a.name??"";return zs({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=fi,i.NULL=new gf,i.\u0275prov=Gt({token:i,providedIn:"any",factory:()=>ln(Rd)}),i.__NG_ELEMENT_ID__=-1,i})();function _l(i,o=We.Default){const a=Ee();return null===a?ln(i,o):ts(_n(),a,K(i),o)}function Fw(){throw new Error("invalid")}function wl(i,o){return i<<17|o<<2}function ao(i){return i>>17&32767}function av(i){return 2|i}function Ha(i){return(131068&i)>>2}function Sf(i,o){return-131069&i|o<<2}function cv(i){return 1|i}function rm(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],p=a[c+1];if(-1!==p){const v=i.data[p];ya(l),v.contentQueries(2,o[p],p)}}}function Ju(i,o,a,c,l,p,v,C,b,T,x){const R=o.blueprint.slice();return R[0]=l,R[2]=76|c,(null!==x||i&&1024&i[2])&&(R[2]|=1024),mu(R),R[3]=R[15]=i,R[8]=a,R[10]=v||i&&i[10],R[11]=C||i&&i[11],R[12]=b||i&&i[12]||null,R[9]=T||i&&i[9]||null,R[6]=p,R[20]=function QI(){return YI++}(),R[21]=x,R[16]=2==o.type?i[16]:R,R}function Cl(i,o,a,c,l){let p=i.data[o];if(null===p)p=function im(i,o,a,c,l){const p=bu(),v=ha(),b=i.data[o]=function mi(i,o,a,c,l,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,c,l);return null===i.firstChild&&(i.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,o,a,c,l),function Kp(){return yt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=l;const v=function bs(){const i=yt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Zr(p,!0),p}function bl(i,o,a,c){if(0===a)return-1;const l=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return l}function nh(i,o,a){Du(o);try{const c=i.viewQuery;null!==c&&ym(1,c,a);const l=i.template;null!==l&&Yw(i,o,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&rm(i,o),i.staticViewQueries&&ym(2,i.viewQuery,a);const p=i.components;null!==p&&function ME(i,o){for(let a=0;a<o.length;a++)eC(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,Yo()}}function om(i,o,a,c){const l=o[2];if(128!=(128&l)){Du(o);try{mu(o),function Bc(i){return yt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Yw(i,o,a,2,c);const v=3==(3&l);if(v){const T=i.preOrderCheckHooks;null!==T&&Is(o,T,null)}else{const T=i.preOrderHooks;null!==T&&Es(o,T,0,null),md(o,0)}if(function NE(i){for(let o=Mg(i);null!==o;o=xg(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const l=a[c],p=l[3];0==(512&l[2])&&mn(p,1),l[2]|=512}}}(o),function Tv(i){for(let o=Mg(i);null!==o;o=xg(o))for(let a=10;a<o.length;a++){const c=o[a],l=c[1];Zo(c)&&om(l,c,l.template,c[8])}}(o),null!==i.contentQueries&&rm(i,o),v){const T=i.contentCheckHooks;null!==T&&Is(o,T)}else{const T=i.contentHooks;null!==T&&Es(o,T,1),md(o,1)}!function mv(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Lr(~l);else{const p=l,v=a[++c],C=a[++c];Yp(v,p),C(2,o[p])}}}finally{Lr(-1)}}(i,o);const C=i.components;null!==C&&function Kw(i,o){for(let a=0;a<o.length;a++)RE(i,o[a])}(o,C);const b=i.viewQuery;if(null!==b&&ym(2,b,c),v){const T=i.viewCheckHooks;null!==T&&Is(o,T)}else{const T=i.viewHooks;null!==T&&Es(o,T,2),md(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,mn(o[3],-1))}finally{Yo()}}}function Yw(i,o,a,c,l){const p=zn(),v=2&c;try{Lr(-1),v&&o.length>22&&Aw(i,o,22,!1),a(c,l)}finally{Lr(p)}}function yv(i,o,a){!Xi()||(function dm(i,o,a,c){const l=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||es(a,o),Dr(c,o);const v=a.initialInputs;for(let C=l;C<p;C++){const b=i.data[C],T=dr(b);T&&Jw(o,a,b);const x=to(o,i,C,a);Dr(x,o),null!==v&&Xw(0,C-l,x,b,0,v),T&&(Ut(a.index,o)[8]=x)}}(i,o,a,br(a,o)),128==(128&a.flags)&&function Rf(i,o,a){const c=a.directiveStart,l=a.directiveEnd,p=a.index,v=function jc(){return yt.lFrame.currentDirectiveIndex}();try{Lr(p);for(let C=c;C<l;C++){const b=i.data[C],T=o[C];Iu(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&bv(b,T)}}finally{Lr(-1),Iu(v)}}(i,o,a))}function vv(i,o,a=br){const c=o.localNames;if(null!==c){let l=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],C=-1===v?a(o,i):i[v];i[l++]=C}}}function Xu(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=sm(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function sm(i,o,a,c,l,p,v,C,b,T){const x=22+c,R=x+l,G=function am(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Mt);return a}(x,R),X="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:C,declTNode:o,data:G.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:X,incompleteFirstPass:!1}}function _v(i,o,a,c){const l=kf(o);null===a?l.push(c):(l.push(a),i.firstCreatePass&&ih(i).push(c,l.length-1))}function wv(i,o,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,l):a[c]=[o,l]}return a}function rh(i,o){const c=o.directiveEnd,l=i.data,p=o.attrs,v=[];let C=null,b=null;for(let T=o.directiveStart;T<c;T++){const x=l[T],R=x.inputs,G=null===p||bw(o)?null:pm(R,p);v.push(G),C=wv(R,T,C),b=wv(x.outputs,T,b)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=b}function Li(i,o,a,c,l,p,v,C){const b=br(o,a);let x,T=o.inputs;!C&&null!=T&&(x=T[c])?(vm(i,a,x,c,l),ua(o)&&cm(a,o.index)):3&o.type&&(c=function um(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,o.value||"",c):l,p.setProperty(b,c,l))}function cm(i,o){const a=Ut(o,i);16&a[2]||(a[2]|=32)}function Nf(i,o,a,c){let l=!1;if(Xi()){const p=function PE(i,o,a){const c=i.directiveRegistry;let l=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];vE(a,v.selectors,!1)&&(l||(l=[]),To(es(a,o),i,v.type),dr(v)?(hm(i,a),l.unshift(v)):l.push(v))}return l}(i,o,a),v=null===c?null:{"":-1};if(null!==p){l=!0,Ev(a,i.data.length,p.length);for(let x=0;x<p.length;x++){const R=p[x];R.providersResolver&&R.providersResolver(R)}let C=!1,b=!1,T=bl(i,o,p.length,null);for(let x=0;x<p.length;x++){const R=p[x];a.mergedAttrs=va(a.mergedAttrs,R.hostAttrs),Dv(i,a,o,T,R),Iv(T,R,v),null!==R.contentQueries&&(a.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=128);const G=R.type.prototype;!C&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),C=!0),!b&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}rh(i,a)}v&&function fm(i,o,a){if(o){const c=i.localNames=[];for(let l=0;l<o.length;l+=2){const p=a[o[l+1]];if(null==p)throw new _e(-301,!1);c.push(o[l],p)}}}(a,c,v)}return a.mergedAttrs=va(a.mergedAttrs,a.attrs),l}function lm(i,o,a,c,l,p){const v=p.hostBindings;if(v){let C=i.hostBindingOpCodes;null===C&&(C=i.hostBindingOpCodes=[]);const b=~o.index;(function Cv(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(C)!=b&&C.push(b),C.push(c,l,v)}}function bv(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function hm(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function Iv(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;dr(o)&&(a[""]=i)}}function Ev(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function Dv(i,o,a,c,l){i.data[c]=l;const p=l.factory||(l.factory=Ti(l.type)),v=new Do(p,dr(l),_l);i.blueprint[c]=v,a[c]=v,lm(i,o,0,c,bl(i,a,l.hostVars,Mt),l)}function Jw(i,o,a){const c=br(o,i),l=Xu(a),p=i[10],v=Ws(i,Ju(i,l,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=v}function qs(i,o,a,c,l,p){const v=br(i,o);!function El(i,o,a,c,l,p,v){if(null==p)i.removeAttribute(o,l,a);else{const C=null==v?ye(p):v(p,c||"",l);i.setAttribute(o,l,C,a)}}(o[11],v,p,i.value,a,c,l)}function Xw(i,o,a,c,l,p){const v=p[o];if(null!==v){const C=c.setInput;for(let b=0;b<v.length;){const T=v[b++],x=v[b++],R=v[b++];null!==C?c.setInput(a,R,T,x):a[x]=R}}}function pm(i,o){let a=null,c=0;for(;c<o.length;){const l=o[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],o[c+1])),c+=2}else c+=2;else c+=4}return a}function ec(i,o,a,c){return new Array(i,!0,!1,o,null,0,c,a,null,null)}function RE(i,o){const a=Ut(o,i);if(Zo(a)){const c=a[1];48&a[2]?om(c,a,c.template,a[8]):a[5]>0&&mm(a)}}function mm(i){for(let c=Mg(i);null!==c;c=xg(c))for(let l=10;l<c.length;l++){const p=c[l];if(Zo(p))if(512&p[2]){const v=p[1];om(v,p,v.template,p[8])}else p[5]>0&&mm(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Ut(a[c],i);Zo(l)&&l[5]>0&&mm(l)}}function eC(i,o){const a=Ut(o,i),c=a[1];(function kE(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),nh(c,a,a[8])}function Ws(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function cs(i){for(;i;){i[2]|=32;const o=Yd(i);if(Hh(i)&&!o)return i;i=o}return null}function Dl(i,o,a,c=!0){const l=o[10];l.begin&&l.begin();try{om(i,o,i.template,a)}catch(v){throw c&&tC(o,v),v}finally{l.end&&l.end()}}function ym(i,o,a){ya(0),o(i,a)}function kf(i){return i[7]||(i[7]=[])}function ih(i){return i.cleanup||(i.cleanup=[])}function tC(i,o){const a=i[9],c=a?a.get(wf,null):null;c&&c.handleError(o)}function vm(i,o,a,c,l){for(let p=0;p<a.length;){const v=a[p++],C=a[p++],b=o[v],T=i.data[v];null!==T.setInput?T.setInput(b,l,c,C):b[C]=l}}function za(i,o,a){const c=Wr(o,i);!function cw(i,o,a){i.setValue(o,a)}(i[11],c,a)}function _m(i,o,a){let c=a?i.styles:null,l=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?p=C:1==p?l=pe(l,C):2==p&&(c=pe(c,C+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function wm(i,o,a,c,l=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(vn(p)),Cr(p))for(let C=10;C<p.length;C++){const b=p[C],T=b[1].firstChild;null!==T&&wm(b[1],b,T,c)}const v=a.type;if(8&v)wm(i,o,a.child,c);else if(32&v){const C=zy(a,o);let b;for(;b=C();)c.push(b)}else if(16&v){const C=Xy(o,a);if(Array.isArray(C))c.push(...C);else{const b=Yd(o[16]);wm(b[1],b,C,c,!0)}}a=l?a.projectionNext:a.next}return c}class Ff{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return wm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Cr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Ky(o,c),Ir(a,c))}this._attachedToViewContainer=!1}If(this._lView[1],this._lView)}onDestroy(o){_v(this._lView[1],this._lView,null,o)}markForCheck(){cs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Dl(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dw(i,o){yl(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=o}}class Lf extends Ff{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Dl(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Zs extends g{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=At(o);return new Ks(a,this.ngModule)}}function Sv(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class rC{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const l=this.injector.get(o,qu,c);return l!==qu||a===qu?l:this.parentInjector.get(o,a,c)}}class Ks extends _f{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function wE(i){return i.map(Dw).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Sv(this.componentDef.inputs)}get outputs(){return Sv(this.componentDef.outputs)}create(o,a,c,l){let p=(l=l||this.ngModule)instanceof Uo?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new rC(o,p):o,C=v.get(Fe,null);if(null===C)throw new _e(407,!1);const b=v.get(ct,null),T=C.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=c?function Of(i,o,a){return i.selectRootElement(o,a===ot.ShadowDom)}(T,c,this.componentDef.encapsulation):Og(C.createRenderer(null,this.componentDef),x,function nC(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),G=this.componentDef.onPush?288:272,X=sm(0,null,null,1,0,null,null,null,null,null),we=Ju(null,X,null,G,null,null,C,T,b,v,null);let ke,He;Du(we);try{const Xe=function oC(i,o,a,c,l,p){const v=a[1];a[22]=i;const b=Cl(v,22,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(_m(b,T,!0),null!==i&&(As(l,i,T),null!==b.classes&&Df(l,i,b.classes),null!==b.styles&&vl(l,i,b.styles)));const x=c.createRenderer(i,o),R=Ju(a,Xu(o),null,o.onPush?32:16,a[22],b,c,x,p||null,null,null);return v.firstCreatePass&&(To(es(b,a),v,o.type),hm(v,b),Ev(b,a.length,1)),Ws(a,R),a[22]=R}(R,this.componentDef,we,C,T);if(R)if(c)As(T,R,["ng-version",Fi.full]);else{const{attrs:ht,classes:Ae}=function CE(i){const o=[],a=[];let c=1,l=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===l?""!==p&&o.push(p,i[++c]):8===l&&a.push(p);else{if(!Bo(l))break;l=p}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);ht&&As(T,R,ht),Ae&&Ae.length>0&&Df(T,R,Ae.join(" "))}if(He=Cs(X,22),void 0!==a){const ht=He.projection=[];for(let Ae=0;Ae<this.ngContentSelectors.length;Ae++){const _t=a[Ae];ht.push(null!=_t?Array.from(_t):null)}}ke=function sC(i,o,a,c){const l=a[1],p=function Pf(i,o,a){const c=_n();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Dv(i,c,o,bl(i,o,1,null),a),rh(i,c));const l=to(o,i,c.directiveStart,c);Dr(l,o);const p=br(c,o);return p&&Dr(p,o),l}(l,a,o);if(i[8]=a[8]=p,null!==c)for(const C of c)C(p,o);if(o.contentQueries){const C=_n();o.contentQueries(1,p,C.directiveStart)}const v=_n();return!l.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Lr(v.index),lm(a[1],v,0,v.directiveStart,v.directiveEnd,o),bv(o,p)),p}(Xe,this.componentDef,we,[Mv]),nh(X,we,null)}finally{Yo()}return new iC(this.componentType,ke,A(He,we),we,He)}}class iC extends class vg{}{constructor(o,a,c,l,p){super(),this.location=c,this._rootLView=l,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Lf(l),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[o])){const p=this._rootLView;vm(p[1],p,l,o,a),cm(p,this._tNode.index)}}get injector(){return new ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Mv(){const i=_n();Kc(Ee()[1],i)}function bm(i){let o=function Cm(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let l;if(dr(i))l=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new _e(903,!1);l=o.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=Vf(i.inputs),v.declaredInputs=Vf(i.declaredInputs),v.outputs=Vf(i.outputs);const C=l.hostBindings;C&&UE(i,C);const b=l.viewQuery,T=l.contentQueries;if(b&&LE(i,b),T&&VE(i,T),ue(i.inputs,l.inputs),ue(i.declaredInputs,l.declaredInputs),ue(i.outputs,l.outputs),dr(l)&&l.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(i),C===bm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function aC(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=o+=l.hostVars,l.hostAttrs=va(l.hostAttrs,a=va(a,l.hostAttrs))}}(c)}function Vf(i){return i===_r?{}:i===mt?[]:i}function LE(i,o){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{o(c,l),a(c,l)}:o}function VE(i,o){const a=i.contentQueries;i.contentQueries=a?(c,l,p)=>{o(c,l,p),a(c,l,p)}:o}function UE(i,o){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{o(c,l),a(c,l)}:o}let sh=null;function tc(){if(!sh){const i=tn.Symbol;if(i&&i.iterator)sh=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(sh=c)}}}return sh}function qa(i){return!!Tm(i)&&(Array.isArray(i)||!(i instanceof Map)&&tc()in i)}function Tm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ys(i,o,a){return i[o]=a}function jr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function nc(i,o,a,c){const l=jr(i,o,a);return jr(i,o+1,c)||l}function Am(i,o,a,c){const l=Ee();return jr(l,Ko(),o)&&(kt(),qs(cn(),l,i,o,a,c)),Am}function Tl(i,o,a,c){return jr(i,Ko(),a)?o+ye(a)+c:Mt}function Al(i,o,a,c,l,p){const C=nc(i,function Ai(){return yt.lFrame.bindingIndex}(),a,l);return eo(2),C?o+ye(a)+c+ye(l)+p:Mt}function Rv(i,o,a,c,l,p,v,C){const b=Ee(),T=kt(),x=i+22,R=T.firstCreatePass?function cC(i,o,a,c,l,p,v,C,b){const T=o.consts,x=Cl(o,i,4,v||null,ci(T,C));Nf(o,a,x,ci(T,b)),Kc(o,x);const R=x.tViews=sm(2,x,c,l,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,x),R.queries=o.queries.embeddedTView(x)),x}(x,T,b,o,a,c,l,p,v):T.data[x];Zr(R,!1);const G=b[11].createComment("");kg(T,b,G,R),Dr(G,b),Ws(b,b[x]=ec(G,b,G,R)),Oc(R)&&yv(T,b,R),null!=v&&vv(b,R,C)}function kv(i){return Ji(function Uc(){return yt.lFrame.contextLView}(),22+i)}function Om(i,o,a){const c=Ee();return jr(c,Ko(),o)&&Li(kt(),cn(),c,i,o,c[11],a,!1),Om}function Pm(i,o,a,c,l){const v=l?"class":"style";vm(i,a,o.inputs[v],v,c)}function Ol(i,o,a,c){const l=Ee(),p=kt(),v=22+i,C=l[11],b=l[v]=Og(C,o,function Au(){return yt.lFrame.currentNamespace}()),T=p.firstCreatePass?function lC(i,o,a,c,l,p,v){const C=o.consts,T=Cl(o,i,2,l,ci(C,p));return Nf(o,a,T,ci(C,v)),null!==T.attrs&&_m(T,T.attrs,!1),null!==T.mergedAttrs&&_m(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,p,l,0,o,a,c):p.data[v];Zr(T,!0);const x=T.mergedAttrs;null!==x&&As(C,b,x);const R=T.classes;null!==R&&Df(C,b,R);const G=T.styles;return null!==G&&vl(C,b,G),64!=(64&T.flags)&&kg(p,l,b,T),0===function vu(){return yt.lFrame.elementDepthCount}()&&Dr(b,l),function _u(){yt.lFrame.elementDepthCount++}(),Oc(T)&&(yv(p,l,T),function Il(i,o,a){if(cu(o)){const l=o.directiveEnd;for(let p=o.directiveStart;p<l;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,T,l)),null!==c&&vv(l,T),Ol}function ni(){let i=_n();ha()?function fa(){yt.lFrame.isParent=!1}():(i=i.parent,Zr(i,!1));const o=i;!function Fc(){yt.lFrame.elementDepthCount--}();const a=kt();return a.firstCreatePass&&(Kc(a,i),cu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function xu(i){return 0!=(16&i.flags)}(o)&&Pm(a,o,Ee(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function vd(i){return 0!=(32&i.flags)}(o)&&Pm(a,o,Ee(),o.stylesWithoutHost,!1),ni}function Nm(i,o,a,c){return Ol(i,o,a,c),ni(),Nm}function Rm(){return Ee()}function Lv(i){return!!i&&"function"==typeof i.then}function fC(i){return!!i&&"function"==typeof i.subscribe}const Vv=fC;function Uv(i,o,a,c){const l=Ee(),p=kt(),v=_n();return function Bv(i,o,a,c,l,p,v,C){const b=Oc(c),x=i.firstCreatePass&&ih(i),R=o[8],G=kf(o);let X=!0;if(3&c.type||C){const He=br(c,o),Xe=C?C(He):He,ht=G.length,Ae=C?Yt=>C(vn(Yt[c.index])):c.index;let _t=null;if(!C&&b&&(_t=function $E(i,o,a,c){const l=i.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const v=l[p];if(v===a&&l[p+1]===c){const C=o[7],b=l[p+2];return C.length>b?C[b]:null}"string"==typeof v&&(p+=2)}return null}(i,o,l,c.index)),null!==_t)(_t.__ngLastListenerFn__||_t).__ngNextListenerFn__=p,_t.__ngLastListenerFn__=p,X=!1;else{p=Pl(c,o,R,p,!1);const Yt=a.listen(Xe,l,p);G.push(p,Yt),x&&x.push(l,Ae,ht,ht+1)}}else p=Pl(c,o,R,p,!1);const we=c.outputs;let ke;if(X&&null!==we&&(ke=we[l])){const He=ke.length;if(He)for(let Xe=0;Xe<He;Xe+=2){const On=o[ke[Xe]][ke[Xe+1]].subscribe(p),ou=G.length;G.push(p,On),x&&x.push(l,c.index,ou,-(ou+1))}}}(p,l,l[11],v,i,o,0,c),Uv}function fr(i,o,a,c){try{return!1!==a(c)}catch(l){return tC(i,l),!1}}function Pl(i,o,a,c,l){return function p(v){if(v===Function)return c;cs(2&i.flags?Ut(i.index,o):o);let b=fr(o,0,c,v),T=p.__ngNextListenerFn__;for(;T;)b=fr(o,0,T,v)&&b,T=T.__ngNextListenerFn__;return l&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function Za(i=1){return function Qo(i){return(yt.lFrame.contextLView=function Tu(i,o){for(;i>0;)o=o[15],i--;return o}(i,yt.lFrame.contextLView))[8]}(i)}function Vn(i,o,a){return Ka(i,"",o,"",a),Vn}function Ka(i,o,a,c,l){const p=Ee(),v=Tl(p,o,a,c);return v!==Mt&&Li(kt(),cn(),p,i,v,p[11],l,!1),Ka}function gC(i,o,a,c,l){const p=i[a+1],v=null===o;let C=c?ao(p):Ha(p),b=!1;for(;0!==C&&(!1===b||v);){const x=i[C+1];WE(i[C],o)&&(b=!0,i[C+1]=c?cv(x):av(x)),C=c?ao(x):Ha(x)}b&&(i[a+1]=c?av(p):cv(p))}function WE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Oo(i,o)>=0}function ch(i,o){return function ls(i,o,a,c){const l=Ee(),p=kt(),v=eo(2);p.firstUpdatePass&&function Gv(i,o,a,c){const l=i.data;if(null===l[a+1]){const p=l[zn()],v=function Hv(i,o){return o>=i.expandoStartIndex}(i,a);(function sc(i,o){return 0!=(i.flags&(o?16:32))})(p,c)&&null===o&&!v&&(o=!1),o=function co(i,o,a,c){const l=function ma(i){const o=yt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=c?o.residualClasses:o.residualStyles;if(null===l)0===(c?o.classBindings:o.styleBindings)&&(a=Fl(a=Js(null,i,o,a,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==l)if(a=Js(l,i,o,a,c),null===p){let b=function zv(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Ha(c))return i[ao(c)]}(i,o,c);void 0!==b&&Array.isArray(b)&&(b=Js(null,i,o,b[1],c),b=Fl(b,o.attrs,c),function _C(i,o,a,c){i[ao(a?o.classBindings:o.styleBindings)]=c}(i,o,c,b))}else p=function wC(i,o,a){let c;const l=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<l;p++)c=Fl(c,i[p].hostAttrs,a);return Fl(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(l,p,o,c),function zE(i,o,a,c,l,p){let v=p?o.classBindings:o.styleBindings,C=ao(v),b=Ha(v);i[c]=a;let x,T=!1;if(Array.isArray(a)){const R=a;x=R[1],(null===x||Oo(R,x)>0)&&(T=!0)}else x=a;if(l)if(0!==b){const G=ao(i[C+1]);i[c+1]=wl(G,C),0!==G&&(i[G+1]=Sf(i[G+1],c)),i[C+1]=function sv(i,o){return 131071&i|o<<17}(i[C+1],c)}else i[c+1]=wl(C,0),0!==C&&(i[C+1]=Sf(i[C+1],c)),C=c;else i[c+1]=wl(b,0),0===C?C=c:i[b+1]=Sf(i[b+1],c),b=c;T&&(i[c+1]=av(i[c+1])),gC(i,x,c,!0),gC(i,x,c,!1),function qE(i,o,a,c,l){const p=l?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Oo(p,o)>=0&&(a[c+1]=cv(a[c+1]))}(o,x,i,c,p),v=wl(C,b),p?o.classBindings=v:o.styleBindings=v}(l,p,o,a,v,c)}}(p,i,v,c),o!==Mt&&jr(l,v,o)&&function CC(i,o,a,c,l,p,v,C){if(!(3&o.type))return;const b=i.data,T=b[C+1];hs(function uv(i){return 1==(1&i)}(T)?lh(b,o,a,l,Ha(T),v):void 0)||(hs(p)||function zg(i){return 2==(2&i)}(T)&&(p=lh(b,null,a,l,C,v)),function Cw(i,o,a,c,l){if(o)l?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Hs.DashCase;null==l?i.removeStyle(a,c,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=Hs.Important),i.setStyle(a,c,l,p))}}(c,v,Wr(zn(),a),l,p))}(p,p.data[zn()],l,l[11],i,l[v+1]=function YE(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=he(Pi(i)))),i}(o,a),c,v)}(i,o,null,!0),ch}function Js(i,o,a,c,l){let p=null;const v=a.directiveEnd;let C=a.directiveStylingLast;for(-1===C?C=a.directiveStart:C++;C<v&&(p=o[C],c=Fl(c,p.hostAttrs,l),p!==i);)C++;return null!==i&&(a.directiveStylingLast=C),c}function Fl(i,o,a){const c=a?1:2;let l=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),it(i,v,!!a||o[++p]))}return void 0===i?null:i}function lh(i,o,a,c,l,p){const v=null===o;let C;for(;l>0;){const b=i[l],T=Array.isArray(b),x=T?b[1]:b,R=null===x;let G=a[l+1];G===Mt&&(G=R?mt:void 0);let X=R?Ma(G,c):x===c?G:void 0;if(T&&!hs(X)&&(X=Ma(b,c)),hs(X)&&(C=X,v))return C;const we=i[l+1];l=v?ao(we):Ha(we)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(C=Ma(b,c))}return C}function hs(i){return void 0!==i}function qv(i,o=""){const a=Ee(),c=kt(),l=i+22,p=c.firstCreatePass?Cl(c,l,1,o,null):c.data[l],v=a[l]=function Wy(i,o){return i.createText(o)}(a[11],o);kg(c,a,v,p),Zr(p,!1)}function zf(i){return Wv("",i,""),zf}function Wv(i,o,a){const c=Ee(),l=Tl(c,i,o,a);return l!==Mt&&za(c,zn(),l),Wv}function Zv(i,o,a,c,l){const p=Ee(),v=Al(p,i,o,a,c,l);return v!==Mt&&za(p,zn(),v),Zv}const ps=void 0;var TC=["en",[["a","p"],["AM","PM"],ps],[["AM","PM"],ps,ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ps,"{1} 'at' {0}",ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DC(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ja={};function Um(i){const o=function SC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Xv(o);if(a)return a;const c=o.split("-")[0];if(a=Xv(c),a)return a;if("en"===c)return TC;throw new _e(701,!1)}function AC(i){return Um(i)[Ye.PluralCase]}function Xv(i){return i in Ja||(Ja[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),Ja[i]}var Ye=(()=>((Ye=Ye||{})[Ye.LocaleId=0]="LocaleId",Ye[Ye.DayPeriodsFormat=1]="DayPeriodsFormat",Ye[Ye.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ye[Ye.DaysFormat=3]="DaysFormat",Ye[Ye.DaysStandalone=4]="DaysStandalone",Ye[Ye.MonthsFormat=5]="MonthsFormat",Ye[Ye.MonthsStandalone=6]="MonthsStandalone",Ye[Ye.Eras=7]="Eras",Ye[Ye.FirstDayOfWeek=8]="FirstDayOfWeek",Ye[Ye.WeekendRange=9]="WeekendRange",Ye[Ye.DateFormat=10]="DateFormat",Ye[Ye.TimeFormat=11]="TimeFormat",Ye[Ye.DateTimeFormat=12]="DateTimeFormat",Ye[Ye.NumberSymbols=13]="NumberSymbols",Ye[Ye.NumberFormats=14]="NumberFormats",Ye[Ye.CurrencyCode=15]="CurrencyCode",Ye[Ye.CurrencySymbol=16]="CurrencySymbol",Ye[Ye.CurrencyName=17]="CurrencyName",Ye[Ye.Currencies=18]="Currencies",Ye[Ye.Directionality=19]="Directionality",Ye[Ye.PluralCase=20]="PluralCase",Ye[Ye.ExtraData=21]="ExtraData",Ye))();const Ul="en-US";let t_=Ul;function g_(i,o,a,c,l){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)g_(i[p],o,a,c,l);else{const p=kt(),v=Ee();let C=ki(i)?i:K(i.provide),b=Hd(i);const T=_n(),x=1048575&T.providerIndexes,R=T.directiveStart,G=T.providerIndexes>>20;if(ki(i)||!i.multi){const X=new Do(b,l,_l),we=ql(C,o,l?x:x+G,R);-1===we?(To(es(T,v),p,C),Ch(p,i,o.length),o.push(C),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(X),v.push(X)):(a[we]=X,v[we]=X)}else{const X=ql(C,o,x+G,R),we=ql(C,o,x,x+G),ke=X>=0&&a[X],He=we>=0&&a[we];if(l&&!He||!l&&!ke){To(es(T,v),p,C);const Xe=function KC(i,o,a,c,l){const p=new Do(i,a,_l);return p.multi=[],p.index=o,p.componentProviders=0,bh(p,l,c&&!a),p}(l?ZC:Hm,a.length,l,c,b);!l&&He&&(a[we].providerFactory=Xe),Ch(p,i,o.length,0),o.push(C),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(Xe),v.push(Xe)}else Ch(p,i,X>-1?X:we,bh(a[l?we:X],b,!l&&c));!l&&c&&He&&a[we].componentProviders++}}}function Ch(i,o,a,c){const l=ki(o),p=function yf(i){return!!i.useClass}(o);if(l||p){const b=(p?K(o.useClass):o).prototype.ngOnDestroy;if(b){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&o.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,b]):T[x+1].push(c,b)}else T.push(a,b)}}}function bh(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function ql(i,o,a,c){for(let l=a;l<c;l++)if(o[l]===i)return l;return-1}function Hm(i,o,a,c){return Gm(this.multi,[])}function ZC(i,o,a,c){const l=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=to(a,a[1],this.providerFactory.index,c);p=C.slice(0,v),Gm(l,p);for(let b=v;b<C.length;b++)p.push(C[b])}else p=[],Gm(l,p);return p}function Gm(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function YC(i,o=[]){return a=>{a.providersResolver=(c,l)=>function Nt(i,o,a){const c=kt();if(c.firstCreatePass){const l=dr(i);g_(a,c.data,c.blueprint,l,!0),g_(o,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,o)}}class Wl{}class m_{}function gD(i,o){return new QC(i,o??null)}class QC extends Wl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zs(this);const c=wr(o);this._bootstrapComponents=Ba(c.bootstrap),this._r3Injector=at(o,a,[{provide:Wl,useValue:this},{provide:g,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Zl extends m_{constructor(o){super(),this.moduleType=o}create(o){return new QC(this.moduleType,o)}}class JC extends Wl{constructor(o,a,c){super(),this.componentFactoryResolver=new Zs(this),this.instance=null;const l=new jd([...o,{provide:Wl,useValue:this},{provide:g,useValue:this.componentFactoryResolver}],a||Bd(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function y_(i,o,a=null){return new JC(i,o,a).injector}let Sr=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Fd(0,a.type),l=c.length>0?y_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Gt({token:i,providedIn:"environment",factory:()=>new i(ln(Uo))}),i})();function zm(i){i.getStandaloneInjector=o=>o.get(Sr).getOrCreateStandaloneInjector(i)}function w_(i,o,a){const c=wn()+i,l=Ee();return l[c]===Mt?Ys(l,c,a?o.call(a):o()):function Bf(i,o){return i[o]}(l,c)}function op(i,o){const a=i[o];return a===Mt?void 0:a}function ob(i,o){const a=kt();let c;const l=i+22;a.firstCreatePass?(c=function DD(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[l]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(l,c.onDestroy)):c=a.data[l];const p=c.factory||(c.factory=Ti(c.type)),v=Dn(_l);try{const C=Ca(!1),b=p();return Ca(C),function xl(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Ee(),l,b),b}finally{Dn(v)}}function sb(i,o,a){const c=i+22,l=Ee(),p=Ji(l,c);return ap(l,c)?function C_(i,o,a,c,l,p){const v=o+a;return jr(i,v,l)?Ys(i,v+1,p?c.call(p,l):c(l)):op(i,v+1)}(l,wn(),o,p.transform,a,p):p.transform(a)}function ab(i,o,a,c){const l=i+22,p=Ee(),v=Ji(p,l);return ap(p,l)?function ms(i,o,a,c,l,p,v){const C=o+a;return nc(i,C,l,p)?Ys(i,C+2,v?c.call(v,l,p):c(l,p)):op(i,C+2)}(p,wn(),o,v.transform,a,c,v):v.transform(a,c)}function ap(i,o){return i[1].data[o].pure}function E_(i){return o=>{setTimeout(i,void 0,o)}}const ra=class MD extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let l=o,p=a||(()=>null),v=c;if(o&&"object"==typeof o){const b=o;l=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=E_(p),l&&(l=E_(l)),v&&(v=E_(v)));const C=super.subscribe({next:l,error:p,complete:v});return o instanceof ee.w0&&o.add(C),C}};function xD(){return this._results[tc()]()}class D_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=tc(),c=D_.prototype;c[a]||(c[a]=xD)}get changes(){return this._changes||(this._changes=new ra)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const l=pn(o);(this._changesDetected=!function Kr(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],p=o[c];if(a&&(l=a(l),p=a(p)),p!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let up=(()=>{class i{}return i.__NG_ELEMENT_ID__=cb,i})();const ub=up,OD=class extends ub{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,l=Ju(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),nh(c,l,o),new Ff(l)}};function cb(){return cp(_n(),Ee())}function cp(i,o){return 4&i.type?new OD(o,i,A(i,o)):null}let Zm=(()=>{class i{}return i.__NG_ELEMENT_ID__=T_,i})();function T_(){return Xa(_n(),Ee())}const Mr=Zm,Km=class extends Mr{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return A(this._hostTNode,this._hostLView)}get injector(){return new ns(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ru(this._hostTNode,this._hostLView);if(wd(o)){const a=wa(o,this._hostLView),c=tr(o);return new ns(a[1].data[c+8],a)}return new ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Ym(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let l,p;"number"==typeof c?l=c:null!=c&&(l=c.index,p=c.injector);const v=o.createEmbeddedView(a||{},p);return this.insert(v,l),v}createComponent(o,a,c,l,p){const v=o&&!function di(i){return"function"==typeof i}(o);let C;if(v)C=a;else{const R=a||{};C=R.index,c=R.injector,l=R.projectableNodes,p=R.environmentInjector||R.ngModuleRef}const b=v?o:new Ks(At(o)),T=c||this.parentInjector;if(!p&&null==b.ngModule){const G=(v?T:this.parentInjector).get(Uo,null);G&&(p=G)}const x=b.create(T,l,void 0,p);return this.insert(x.hostView,C),x}insert(o,a){const c=o._lView,l=c[1];if(function gu(i){return Cr(i[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const R=c[3],G=new Km(R,R[6],R[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function cE(i,o,a,c){const l=10+c,p=a.length;c>0&&(a[l-1][4]=o),c<p-10?(o[4]=a[l],Aa(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function lE(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(i),o[2]|=64}(l,c,v,p);const C=_w(p,v),b=c[11],T=Ng(b,v[7]);return null!==T&&function lw(i,o,a,c,l,p){c[0]=l,c[6]=o,yl(i,c,a,1,l,p)}(l,v[6],b,c,T,C),o.attachToViewContainerRef(),Aa(lp(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Ym(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Ky(this._lContainer,a);c&&(Ir(lp(this._lContainer),a),If(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Ky(this._lContainer,a);return c&&null!=Ir(lp(this._lContainer),a)?new Ff(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Ym(i){return i[8]}function lp(i){return i[8]||(i[8]=[])}function Xa(i,o){let a;const c=o[i.index];if(Cr(c))a=c;else{let l;if(8&i.type)l=vn(c);else{const p=o[11];l=p.createComment("");const v=br(i,o);Gs(p,Ng(p,v),l,function yw(i,o){return i.nextSibling(o)}(p,v),!1)}o[i.index]=a=ec(c,o,l,i),Ws(o,a)}return new Km(a,i,o)}class Ah{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ah(this.queryList)}setDirty(){this.queryList.setDirty()}}class eu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,l=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);l.push(this.queries[v.indexInDeclarationView].clone())}return new eu(l)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==gb(o,a).matches&&this.queries[a].setDirty()}}class mc{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class tu{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,l);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new tu(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Kl{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Kl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const p=c[l];this.matchTNodeWithReadOption(o,a,db(a,p)),this.matchTNodeWithReadOption(o,a,Ss(a,o,p,!1,!1))}else c===up?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ss(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===P||l===Zm||l===up&&4&a.type)this.addMatch(a.index,-2);else{const p=Ss(a,o,l,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function db(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function S_(i,o,a,c){return-1===a?function A_(i,o){return 11&i.type?A(i,o):4&i.type?cp(i,o):null}(o,i):-2===a?function hb(i,o,a){return a===P?A(o,i):a===up?cp(o,i):a===Zm?Xa(o,i):void 0}(i,o,c):to(i,i[1],a,o)}function M_(i,o,a,c){const l=o[19].queries[c];if(null===l.matches){const p=i.data,v=a.matches,C=[];for(let b=0;b<v.length;b+=2){const T=v[b];C.push(T<0?null:S_(o,p[T],v[b+1],a.metadata.read))}l.matches=C}return l.matches}function x_(i,o,a,c){const l=i.queries.getByIndex(a),p=l.matches;if(null!==p){const v=M_(i,o,l,a);for(let C=0;C<p.length;C+=2){const b=p[C];if(b>0)c.push(v[C/2]);else{const T=p[C+1],x=o[-b];for(let R=10;R<x.length;R++){const G=x[R];G[17]===G[3]&&x_(G[1],G,T,c)}if(null!==x[9]){const R=x[9];for(let G=0;G<R.length;G++){const X=R[G];x_(X[1],X,T,c)}}}}}return c}function O_(i){const o=Ee(),a=kt(),c=$c();ya(c+1);const l=gb(a,c);if(i.dirty&&function pu(i){return 4==(4&i[2])}(o)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const p=l.crossesNgTemplate?x_(a,o,c,[]):M_(a,o,l,c);i.reset(p,W),i.notifyOnChanges()}return!0}return!1}function dp(i,o,a,c){const l=kt();if(l.firstCreatePass){const p=_n();(function P_(i,o,a){null===i.queries&&(i.queries=new tu),i.queries.track(new Kl(o,a))})(l,new mc(o,a,c),p.index),function RD(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function pb(i,o,a){const c=new D_(4==(4&a));_v(i,o,c,c.destroy),null===o[19]&&(o[19]=new eu),o[19].queries.push(new Ah(c))}(l,Ee(),a)}function Sh(){return function Yl(i,o){return i[19].queries[o].queryList}(Ee(),$c())}function gb(i,o){return i.queries.getByIndex(o)}function vc(...i){}const ry=new sn("Application Initializer");let xh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=vc,this.reject=vc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(Lv(p))a.push(p);else if(Vv(p)){const v=new Promise((C,b)=>{p.subscribe({complete:C,error:b})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(ln(ry,8))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const B_=new sn("AppId",{providedIn:"root",factory:function xb(){return`${iy()}${iy()}${iy()}`}});function iy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oy=new sn("Platform Initializer"),GD=new sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),j_=new sn("appBootstrapListener");let qD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ru=new sn("LocaleId",{providedIn:"root",factory:()=>I(ru,We.Optional|We.SkipSelf)||function Oh(){return typeof $localize<"u"&&$localize.locale||Ul}()}),$_=new sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ob{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let KD=(()=>{class i{compileModuleSync(a){return new Zl(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ba(wr(a).declarations).reduce((v,C)=>{const b=At(C);return b&&v.push(new Ks(b)),v},[]);return new Ob(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _p=(()=>Promise.resolve(0))();function Ph(i){typeof Zone>"u"?_p.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class $i{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ra(!1),this.onMicrotaskEmpty=new ra(!1),this.onStable=new ra(!1),this.onError=new ra(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Z_(){let i=tn.requestAnimationFrame,o=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Nb(i){const o=()=>{!function YD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Y_(i),i.isCheckStableRunning=!0,sy(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Y_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,p,v,C)=>{try{return Rb(i),a.invokeTask(l,p,v,C)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),kb(i)}},onInvoke:(a,c,l,p,v,C,b)=>{try{return Rb(i),a.invoke(l,p,v,C,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),kb(i)}},onHasTask:(a,c,l,p)=>{a.hasTask(l,p),c===l&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Y_(i),sy(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,l,p)=>(a.handleError(l,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$i.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if($i.isInAngularZone())throw new _e(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,l){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+l,o,K_,vc,vc);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const K_={};function sy(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Y_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Rb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function kb(i){i._nesting--,sy(i)}class Fb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ra,this.onMicrotaskEmpty=new ra,this.onStable=new ra,this.onError=new ra}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,l){return o.apply(a,c)}}const wp=new sn(""),Nh=new sn("");let X_,Q_=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,X_||(function QD(i){X_=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$i.assertNotInAngularZone(),Ph(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ph(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(ln($i),ln(J_),ln(Nh))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac}),i})(),J_=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return X_?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),_c=null;const Lb=new sn("AllowMultipleToken"),e0=new sn("PlatformDestroyListeners");class ay{constructor(o,a){this.name=o,this.token=a}}function uy(i,o,a=[]){const c=`Platform: ${o}`,l=new sn(c);return(p=[])=>{let v=Ip();if(!v||v.injector.get(Lb,!1)){const C=[...a,...p,{provide:l,useValue:!0}];i?i(C):function bp(i){if(_c&&!_c.get(Lb,!1))throw new _e(400,!1);_c=i;const o=i.get(Ub);(function o0(i){const o=i.get(oy,null);o&&o.forEach(a=>a())})(i)}(function s0(i=[],o){return $a.create({name:o,providers:[{provide:Vd,useValue:"platform"},{provide:e0,useValue:new Set([()=>_c=null])},...i]})}(C,c))}return function wc(i){const o=Ip();if(!o)throw new _e(401,!1);return o}()}}function Ip(){return _c?.get(Ub)??null}let Ub=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function Bb(i,o){let a;return a="noop"===i?new Fb:("zone.js"===i?void 0:i)||new $i(o),a}(c?.ngZone,function cy(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:$i,useValue:l}];return l.run(()=>{const v=$a.create({providers:p,parent:this.injector,name:a.moduleType.name}),C=a.create(v),b=C.injector.get(wf,null);if(!b)throw new _e(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:x=>{b.handleError(x)}});C.onDestroy(()=>{Dp(this._modules,C),T.unsubscribe()})}),function ly(i,o,a){try{const c=a();return Lv(c)?c.catch(l=>{throw o.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(b,l,()=>{const T=C.injector.get(xh);return T.runInitializers(),T.donePromise.then(()=>(function n_(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(t_=i.toLowerCase().replace(/_/g,"-"))}(C.injector.get(ru,Ul)||Ul),this._moduleDoBootstrap(C),C))})})}bootstrapModule(a,c=[]){const l=Ep({},c);return function t0(i,o,a){const c=new Zl(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(a){const c=a.injector.get(Rh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new _e(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(e0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(ln($a))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Ep(i,o){return Array.isArray(o)?o.reduce(Ep,i):{...i,...o}}let Rh=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new N.y(C=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{$i.assertNotInAngularZone(),Ph(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{$i.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(p,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof _f;if(!this._injector.get(xh).done)throw!l&&Ei(a),new _e(405,false);let v;v=l?a:this._injector.get(g).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const C=function n0(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Wl),T=v.create($a.NULL,[],c||v.selector,C),x=T.location.nativeElement,R=T.injector.get(wp,null);return R?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),Dp(this.components,T),R?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Dp(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(j_,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Dp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new _e(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(ln($i),ln(Uo),ln(wf))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dp(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let jb=!0,$b=!1;function Hb(){return $b=!0,jb}function Gb(){if($b)throw new Error("Cannot enable prod mode after platform setup.");jb=!1}let u0=(()=>{class i{}return i.__NG_ELEMENT_ID__=JD,i})();function JD(i){return function c0(i,o,a){if(ua(i)&&!a){const c=Ut(i.index,o);return new Ff(c,c)}return 47&i.type?new Ff(o[16],o):null}(_n(),Ee(),16==(16&i))}class dy{constructor(){}supports(o){return qa(o)}create(o){return new Jb(o)}}const tT=(i,o)=>o;class Jb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,l=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<g0(c,l,p)?a:c,C=g0(v,l,p),b=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{p||(p=[]);const T=C-l,x=b-l;if(T!=x){for(let G=0;G<T;G++){const X=G<p.length?p[G]:p[G]=0,we=X+G;x<=we&&we<T&&(p[G]=X+1)}p[v.previousIndex]=x-T}}C!==b&&o(v,C,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!qa(o))throw new _e(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l,p,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],v=this._trackByFn(C,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,C)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,C),c=!0),a=a._next}else l=0,function ur(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[tc()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,C=>{v=this._trackByFn(l,C),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,C,v,l)),Object.is(a.item,C)||this._addIdentityChange(a,C)):(a=this._mismatch(a,C,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,l){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,l)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,l)):o=this._addAfter(new nT(a,c),p,l),o}_verifyReinsertion(o,a,c,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,l):o.currentIndex!=l&&(o.currentIndex=l,this._addToMoves(o,l)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const l=o._prevRemoved,p=o._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const l=null===a?this._itHead:a._next;return o._next=l,o._prev=a,null===l?this._itTail=o:l._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new p0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new p0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class nT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class p0{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Xb,this.map.set(a,c)),c.add(o)}get(o,a){const l=this.map.get(o);return l?l.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function g0(i,o,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+o+l}class m0{constructor(){}supports(o){return o instanceof Map||Tm(o)}create(){return new rT}}class rT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Tm(o)))throw new _e(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const l=this._records.get(o);this._maybeAddToChanges(l,a);const p=l._prev,v=l._next;return p&&(p._next=v),v&&(v._prev=p),l._next=null,l._prev=null,l}const c=new iT(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class iT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eI(){return new y0([new dy])}let y0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||eI()),deps:[[i,new pt,new xe]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new _e(901,!1)}}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:eI}),i})();function hy(){return new Sp([new m0])}let Sp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||hy()),deps:[[i,new pt,new xe]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new _e(901,!1)}}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:hy}),i})();const rI=uy(null,"core",[]);let _0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(ln(Rh))},i.\u0275mod=nt({type:i}),i.\u0275inj=Ot({}),i})();function iI(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(st,De,k)=>{k.d(De,{Z:()=>_e});var f=k(2090),ee=k(4859),N=k(9681),se=k(1877);class re{constructor(ye,fe){this._delegate=ye,this.firebase=fe,(0,N._addComponent)(ye,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ye,fe=N._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(ye);return!tt.isInitialized()&&"EXPLICIT"===(null===(Ze=tt.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:fe})}_removeServiceInstance(ye,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(fe)}_addComponent(ye){(0,N._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,N._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function pe(){const Qe=function he(Qe){const ye={},fe={__esModule:!0,initializeApp:function Te(je,V={}){const me=N.initializeApp(je,V);if((0,f.r3)(ye,me.name))return ye[me.name];const Z=new Qe(me,fe);return ye[me.name]=Z,Z},app:tt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(je){const V=je.name,me=V.replace("-compat","");if(N._registerComponent(je)&&"PUBLIC"===je.type){const Z=(J=tt())=>{if("function"!=typeof J[me])throw ue.create("invalid-app-argument",{appName:V});return J[me]()};void 0!==je.serviceProps&&(0,f.ZB)(Z,je.serviceProps),fe[me]=Z,Qe.prototype[me]=function(...J){return this._getService.bind(this,V).apply(this,je.multipleInstances?J:[])}}return"PUBLIC"===je.type?fe[me]:null},removeApp:function Ze(je){delete ye[je]},useAsService:function Be(je,V){return"serverAuth"===V?null:V},modularAPIs:N}};function tt(je){if(!(0,f.r3)(ye,je=je||N._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return ye[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ve(){return Object.keys(ye).map(je=>ye[je])}}),tt.App=Qe,fe}(re);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ye(fe){(0,f.ZB)(Qe,fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Qe}(),j=new se.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _e=U;!function Se(Qe){(0,N.registerVersion)("@firebase/app-compat","0.1.34",Qe)}()},9681:(st,De,k)=>{k.r(De),k.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>yo,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>Ht,_addOrOverwriteComponent:()=>Gt,_apps:()=>en,_clearComponents:()=>sa,_components:()=>En,_getProvider:()=>Ot,_registerComponent:()=>vr,_removeServiceInstance:()=>Jt,deleteApp:()=>vs,getApp:()=>Rr,getApps:()=>ii,initializeApp:()=>Ii,onLog:()=>zi,registerVersion:()=>kr,setLogLevel:()=>Dn});var f=k(5861),ee=k(4859),N=k(1877),se=k(2090),re=k(8766);class de{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function ue(L){return"VERSION"===L.getComponent()?.type}(z)){const Ie=z.getImmediate();return`${Ie.library}/${Ie.version}`}return null}).filter(z=>z).join(" ")}}const he="@firebase/app",U=new N.Yd("@firebase/app"),Vt="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,En=new Map;function Ht(L,$){try{L.container.addComponent($)}catch(z){U.debug(`Component ${$.name} failed to register with FirebaseApp ${L.name}`,z)}}function Gt(L,$){L.container.addOrOverwriteComponent($)}function vr(L){const $=L.name;if(En.has($))return U.debug(`There were multiple attempts to register component ${$}.`),!1;En.set($,L);for(const z of en.values())Ht(z,L);return!0}function Ot(L,$){const z=L.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),L.container.getProvider($)}function Jt(L,$,z=Vt){Ot(L,$).clearInstance(z)}function sa(){En.clear()}const lr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nr{constructor($,z,Ie){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=Ie,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const yo="9.10.0";function Ii(L,$={}){"object"!=typeof $&&($={name:$});const z=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},$),Ie=z.name;if("string"!=typeof Ie||!Ie)throw lr.create("bad-app-name",{appName:String(Ie)});const Ue=en.get(Ie);if(Ue){if((0,se.vZ)(L,Ue.options)&&(0,se.vZ)(z,Ue.config))return Ue;throw lr.create("duplicate-app",{appName:Ie})}const nt=new ee.H0(Ie);for(const qt of En.values())nt.addComponent(qt);const on=new Nr(L,z,nt);return en.set(Ie,on),on}function Rr(L=Vt){const $=en.get(L);if(!$)throw lr.create("no-app",{appName:L});return $}function ii(){return Array.from(en.values())}function vs(L){return We.apply(this,arguments)}function We(){return(We=(0,f.Z)(function*(L){const $=L.name;en.has($)&&(en.delete($),yield Promise.all(L.container.getProviders().map(z=>z.delete())),L.isDeleted=!0)})).apply(this,arguments)}function kr(L,$,z){var Ie;let Ue=null!==(Ie=ze[L])&&void 0!==Ie?Ie:L;z&&(Ue+=`-${z}`);const nt=Ue.match(/\s|\//),on=$.match(/\s|\//);if(nt||on){const qt=[`Unable to register library "${Ue}" with version "${$}":`];return nt&&qt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),nt&&on&&qt.push("and"),on&&qt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void U.warn(qt.join(" "))}vr(new ee.wA(`${Ue}-version`,()=>({library:Ue,version:$}),"VERSION"))}function zi(L,$){if(null!==L&&"function"!=typeof L)throw lr.create("invalid-log-argument");(0,N.Am)(L,$)}function Dn(L){(0,N.Ub)(L)}const Tn="firebase-heartbeat-store";let jn=null;function an(){return jn||(jn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(L,$)=>{0===$&&L.createObjectStore(Tn)}}).catch(L=>{throw lr.create("idb-open",{originalErrorMessage:L.message})})),jn}function ot(){return(ot=(0,f.Z)(function*(L){var $;try{return(yield an()).transaction(Tn).objectStore(Tn).get(Xn(L))}catch(z){if(z instanceof se.ZR)U.warn(z.message);else{const Ie=lr.create("idb-get",{originalErrorMessage:null===($=z)||void 0===$?void 0:$.message});U.warn(Ie.message)}}})).apply(this,arguments)}function tn(L,$){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(L,$){var z;try{const Ue=(yield an()).transaction(Tn,"readwrite");return yield Ue.objectStore(Tn).put($,Xn(L)),Ue.done}catch(Ie){if(Ie instanceof se.ZR)U.warn(Ie.message);else{const Ue=lr.create("idb-set",{originalErrorMessage:null===(z=Ie)||void 0===z?void 0:z.message});U.warn(Ue.message)}}})).apply(this,arguments)}function Xn(L){return`${L.name}!${L.options.appId}`}class qi{constructor($){this.container=$,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new $t(z),this._heartbeatsCachePromise=this._storage.read().then(Ie=>(this._heartbeatsCache=Ie,Ie))}triggerHeartbeat(){var $=this;return(0,f.Z)(function*(){const Ie=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=zt();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!$._heartbeatsCache.heartbeats.some(nt=>nt.date===Ue))return $._heartbeatsCache.heartbeats.push({date:Ue,agent:Ie}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(nt=>{const on=new Date(nt.date).valueOf();return Date.now()-on<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,f.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const z=zt(),{heartbeatsToSend:Ie,unsentEntries:Ue}=function si(L,$=1024){const z=[];let Ie=L.slice();for(const Ue of L){const nt=z.find(on=>on.agent===Ue.agent);if(nt){if(nt.dates.push(Ue.date),q(z)>$){nt.dates.pop();break}}else if(z.push({agent:Ue.agent,dates:[Ue.date]}),q(z)>$){z.pop();break}Ie=Ie.slice(1)}return{heartbeatsToSend:z,unsentEntries:Ie}}($._heartbeatsCache.heartbeats),nt=(0,se.L)(JSON.stringify({version:2,heartbeats:Ie}));return $._heartbeatsCache.lastSentHeartbeatDate=z,Ue.length>0?($._heartbeatsCache.heartbeats=Ue,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),nt})()}}function zt(){return(new Date).toISOString().substring(0,10)}class $t{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,f.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function dt(L){return ot.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var z=this;return(0,f.Z)(function*(){var Ie;if(yield z._canUseIndexedDBPromise){const nt=yield z.read();return tn(z.app,{lastSentHeartbeatDate:null!==(Ie=$.lastSentHeartbeatDate)&&void 0!==Ie?Ie:nt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var z=this;return(0,f.Z)(function*(){var Ie;if(yield z._canUseIndexedDBPromise){const nt=yield z.read();return tn(z.app,{lastSentHeartbeatDate:null!==(Ie=$.lastSentHeartbeatDate)&&void 0!==Ie?Ie:nt.lastSentHeartbeatDate,heartbeats:[...nt.heartbeats,...$.heartbeats]})}})()}}function q(L){return(0,se.L)(JSON.stringify({version:2,heartbeats:L})).length}!function B(L){vr(new ee.wA("platform-logger",$=>new de($),"PRIVATE")),vr(new ee.wA("heartbeat",$=>new qi($),"PRIVATE")),kr(he,"0.7.33",L),kr(he,"0.7.33","esm2017"),kr("fire-js","")}("")},4859:(st,De,k)=>{k.d(De,{H0:()=>he,wA:()=>N});var f=k(5861),ee=k(2090);class N{constructor(U,j,K){this.name=U,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const se="[DEFAULT]";class re{constructor(U,j){this.name=U,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const j=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(j)){const K=new ee.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&K.resolve(Ve)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(U){var j;const K=this.normalizeInstanceIdentifier(U?.identifier),Ve=null!==(j=U?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Se){if(Ve)return null;throw Se}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ue(pe){return"EAGER"===pe.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const Se=this.getOrInitializeService({instanceIdentifier:Ve});K.resolve(Se)}catch{}}}}clearInstance(U=se){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const j=Array.from(U.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=se){return this.instances.has(U)}getOptions(U=se){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:j={}}=U,K=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[Se,_e]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Se)&&_e.resolve(Ve);return Ve}onInit(U,j){var K;const Ve=this.normalizeInstanceIdentifier(j),Se=null!==(K=this.onInitCallbacks.get(Ve))&&void 0!==K?K:new Set;Se.add(U),this.onInitCallbacks.set(Ve,Se);const _e=this.instances.get(Ve);return _e&&U(_e,Ve),()=>{Se.delete(U)}}invokeOnInitCallbacks(U,j){const K=this.onInitCallbacks.get(j);if(K)for(const Ve of K)try{Ve(U,j)}catch{}}getOrInitializeService({instanceIdentifier:U,options:j={}}){let K=this.instances.get(U);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=U,pe===se?void 0:pe),options:j}),this.instances.set(U,K),this.instancesOptions.set(U,j),this.invokeOnInitCallbacks(K,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,K)}catch{}var pe;return K||null}normalizeInstanceIdentifier(U=se){return this.component?this.component.multipleInstances?U:se:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const j=this.getProvider(U.name);if(j.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);j.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const j=new re(U,this);return this.providers.set(U,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(st,De,k)=>{k.d(De,{Am:()=>pe,Ub:()=>he,Yd:()=>ue,in:()=>ee});const f=[];var ee=(()=>{return(U=ee||(ee={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",ee;var U})();const N={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},se=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(U,j,...K)=>{if(j<U.logLevel)return;const Ve=(new Date).toISOString(),Se=re[j];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Se](`[${Ve}]  ${U.name}:`,...K)};class ue{constructor(j){this.name=j,this._logLevel=se,this._logHandler=de,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in ee))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...j),this._logHandler(this,ee.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...j),this._logHandler(this,ee.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...j),this._logHandler(this,ee.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...j),this._logHandler(this,ee.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...j),this._logHandler(this,ee.ERROR,...j)}}function he(U){f.forEach(j=>{j.setLogLevel(U)})}function pe(U,j){for(const K of f){let Ve=null;j&&j.level&&(Ve=N[j.level]),K.userLogHandler=null===U?null:(Se,_e,...Qe)=>{const ye=Qe.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");_e>=(Ve??Se.logLevel)&&U({level:ee[_e].toLowerCase(),message:ye,args:Qe,type:Se.name})}}}},8766:(st,De,k)=>{k.d(De,{Lj:()=>Te,X3:()=>tt});var f=k(5861);let N,se;const ue=new WeakMap,he=new WeakMap,pe=new WeakMap,U=new WeakMap,j=new WeakMap;let Se={get(V,me,Z){if(V instanceof IDBTransaction){if("done"===me)return he.get(V);if("objectStoreNames"===me)return V.objectStoreNames||pe.get(V);if("store"===me)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return fe(V[me])},set:(V,me,Z)=>(V[me]=Z,!0),has:(V,me)=>V instanceof IDBTransaction&&("done"===me||"store"===me)||me in V};function ye(V){return"function"==typeof V?function Qe(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...me){return V.apply(Ze(this),me),fe(ue.get(this))}:function(...me){return fe(V.apply(Ze(this),me))}:function(me,...Z){const J=V.call(Ze(this),me,...Z);return pe.set(J,me.sort?me.sort():[me]),fe(J)}}(V):(V instanceof IDBTransaction&&function Ve(V){if(he.has(V))return;const me=new Promise((Z,J)=>{const ie=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",Re),V.removeEventListener("abort",Re)},te=()=>{Z(),ie()},Re=()=>{J(V.error||new DOMException("AbortError","AbortError")),ie()};V.addEventListener("complete",te),V.addEventListener("error",Re),V.addEventListener("abort",Re)});he.set(V,me)}(V),((V,me)=>me.some(Z=>V instanceof Z))(V,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Se):V)}function fe(V){if(V instanceof IDBRequest)return function K(V){const me=new Promise((Z,J)=>{const ie=()=>{V.removeEventListener("success",te),V.removeEventListener("error",Re)},te=()=>{Z(fe(V.result)),ie()},Re=()=>{J(V.error),ie()};V.addEventListener("success",te),V.addEventListener("error",Re)});return me.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,V)}).catch(()=>{}),j.set(me,V),me}(V);if(U.has(V))return U.get(V);const me=ye(V);return me!==V&&(U.set(V,me),j.set(me,V)),me}const Ze=V=>j.get(V);function tt(V,me,{blocked:Z,upgrade:J,blocking:ie,terminated:te}={}){const Re=indexedDB.open(V,me),Pe=fe(Re);return J&&Re.addEventListener("upgradeneeded",lt=>{J(fe(Re.result),lt.oldVersion,lt.newVersion,fe(Re.transaction))}),Z&&Re.addEventListener("blocked",()=>Z()),Pe.then(lt=>{te&&lt.addEventListener("close",()=>te()),ie&&lt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Pe}function Te(V,{blocked:me}={}){const Z=indexedDB.deleteDatabase(V);return me&&Z.addEventListener("blocked",()=>me()),fe(Z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Be=new Map;function je(V,me){if(!(V instanceof IDBDatabase)||me in V||"string"!=typeof me)return;if(Be.get(me))return Be.get(me);const Z=me.replace(/FromIndex$/,""),J=me!==Z,ie=be.includes(Z);if(!(Z in(J?IDBIndex:IDBObjectStore).prototype)||!ie&&!ve.includes(Z))return;const te=function(){var Re=(0,f.Z)(function*(Pe,...lt){const Bt=this.transaction(Pe,ie?"readwrite":"readonly");let Vt=Bt.store;return J&&(Vt=Vt.index(lt.shift())),(yield Promise.all([Vt[Z](...lt),ie&&Bt.done]))[0]});return function(lt){return Re.apply(this,arguments)}}();return Be.set(me,te),te}!function _e(V){Se=V(Se)}(V=>({...V,get:(me,Z,J)=>je(me,Z)||V.get(me,Z,J),has:(me,Z)=>!!je(me,Z)||V.has(me,Z)}))},5861:(st,De,k)=>{function f(N,se,re,de,ue,he,pe){try{var U=N[he](pe),j=U.value}catch(K){return void re(K)}U.done?se(j):Promise.resolve(j).then(de,ue)}function ee(N){return function(){var se=this,re=arguments;return new Promise(function(de,ue){var he=N.apply(se,re);function pe(j){f(he,de,ue,pe,U,"next",j)}function U(j){f(he,de,ue,pe,U,"throw",j)}pe(void 0)})}}k.d(De,{Z:()=>ee})}},st=>{st(st.s=8032)}]);